"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[4976],{24667(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"laravel-unit-converter/deep-diving/exceptions/unit-type-default-value","title":"UnitTypeDefaultValueException","description":"Thrown when the first unit created for a type does not have value = 1 (base unit requirement).","source":"@site/packages/laravel-unit-converter/deep-diving/exceptions/unit-type-default-value.md","sourceDirName":"laravel-unit-converter/deep-diving/exceptions","slug":"/laravel-unit-converter/deep-diving/exceptions/unit-type-default-value","permalink":"/packages/laravel-unit-converter/deep-diving/exceptions/unit-type-default-value","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-unit-converter/deep-diving/exceptions/unit-type-default-value.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"UnitTypeDefaultValueException"},"sidebar":"packagesSidebar","previous":{"title":"FromAndToMustSameTypeException","permalink":"/packages/laravel-unit-converter/deep-diving/exceptions/from-and-to-must-same-type"},"next":{"title":"UnitTypeUseDefaultValueException","permalink":"/packages/laravel-unit-converter/deep-diving/exceptions/unit-type-use-default-value"}}');var i=t(74848),s=t(28453);const l={sidebar_position:4,sidebar_label:"UnitTypeDefaultValueException"},a="UnitTypeDefaultValueException",d={},c=[{value:"Namespace",id:"namespace",level:2},{value:"HTTP Status Code",id:"http-status-code",level:2},{value:"Constructor",id:"constructor",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Understanding the Base Unit System",id:"understanding-the-base-unit-system",level:2},{value:"How Conversion Works",id:"how-conversion-works",level:3},{value:"When Is It Thrown?",id:"when-is-it-thrown",level:2},{value:"Incorrect: First Unit Without value = 1",id:"incorrect-first-unit-without-value--1",level:3},{value:"Correct: Create Base Unit First",id:"correct-create-base-unit-first",level:3},{value:"Handling the Exception",id:"handling-the-exception",level:2},{value:"In Controllers",id:"in-controllers",level:3},{value:"In Seeders",id:"in-seeders",level:3},{value:"Prevention",id:"prevention",level:2},{value:"1. Always Create Base Unit First",id:"1-always-create-base-unit-first",level:3},{value:"2. Check Before Creating",id:"2-check-before-creating",level:3},{value:"3. Use Built-in Seeders",id:"3-use-built-in-seeders",level:3},{value:"Common Base Units by Type",id:"common-base-units-by-type",level:2},{value:"Related Exceptions",id:"related-exceptions",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"unittypedefaultvalueexception",children:"UnitTypeDefaultValueException"})}),"\n",(0,i.jsxs)(n.p,{children:["Thrown when the first unit created for a type does not have ",(0,i.jsx)(n.code,{children:"value = 1"})," (base unit requirement)."]}),"\n",(0,i.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"JobMetric\\UnitConverter\\Exceptions\\UnitTypeDefaultValueException\n"})}),"\n",(0,i.jsx)(n.h2,{id:"http-status-code",children:"HTTP Status Code"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"400 Bad Request"})}),"\n",(0,i.jsx)(n.h2,{id:"constructor",children:"Constructor"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"public function __construct(\n    string $type,\n    int $code = 400,\n    ?Throwable $previous = null\n)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$type"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{children:"The unit type being created"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$code"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"int"})}),(0,i.jsx)(n.td,{children:"HTTP status code (default: 400)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$previous"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Throwable|null"})}),(0,i.jsx)(n.td,{children:"Previous exception for chaining"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"understanding-the-base-unit-system",children:"Understanding the Base Unit System"}),"\n",(0,i.jsxs)(n.p,{children:["Laravel Unit Converter uses a ",(0,i.jsx)(n.strong,{children:"base unit system"})," where:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Each unit type must have exactly one ",(0,i.jsx)(n.strong,{children:"base unit"})," with ",(0,i.jsx)(n.code,{children:"value = 1"})]}),"\n",(0,i.jsxs)(n.li,{children:["All other units are defined ",(0,i.jsx)(n.strong,{children:"relative"})," to this base unit"]}),"\n",(0,i.jsxs)(n.li,{children:["The first unit created for any type ",(0,i.jsx)(n.strong,{children:"must"})," be the base unit"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-conversion-works",children:"How Conversion Works"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"result = input_value \xd7 (from_unit.value / to_unit.value)\n"})}),"\n",(0,i.jsx)(n.p,{children:"Example with weight (base: gram = 1):"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Kilogram: ",(0,i.jsx)(n.code,{children:"value = 1000"})," (1 kg = 1000 g)"]}),"\n",(0,i.jsxs)(n.li,{children:["Milligram: ",(0,i.jsx)(n.code,{children:"value = 0.001"})," (1 mg = 0.001 g)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Converting 2 kg to mg:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"2 \xd7 (1000 / 0.001) = 2,000,000 mg\n"})}),"\n",(0,i.jsx)(n.h2,{id:"when-is-it-thrown",children:"When Is It Thrown?"}),"\n",(0,i.jsxs)(n.p,{children:["This exception is thrown when you try to create the ",(0,i.jsx)(n.strong,{children:"first"})," unit for a type with a value other than 1."]}),"\n",(0,i.jsx)(n.h3,{id:"incorrect-first-unit-without-value--1",children:"Incorrect: First Unit Without value = 1"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"use JobMetric\\UnitConverter\\Facades\\UnitConverter;\n\n// No weight units exist yet\n// Trying to create kilogram first (value = 1000) - WRONG!\nUnitConverter::store([\n    'type' => 'weight',\n    'value' => 1000,  // Error! First unit must be value = 1\n    'translation' => [\n        'en' => ['name' => 'Kilogram', 'code' => 'kg'],\n    ],\n]);\n// Throws: UnitTypeDefaultValueException\n"})}),"\n",(0,i.jsx)(n.h3,{id:"correct-create-base-unit-first",children:"Correct: Create Base Unit First"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"use JobMetric\\UnitConverter\\Facades\\UnitConverter;\n\n// Step 1: Create base unit (gram) with value = 1\nUnitConverter::store([\n    'type' => 'weight',\n    'value' => 1,  // Base unit\n    'translation' => [\n        'en' => ['name' => 'Gram', 'code' => 'g'],\n    ],\n]);\n\n// Step 2: Now create kilogram relative to gram\nUnitConverter::store([\n    'type' => 'weight',\n    'value' => 1000,  // 1 kg = 1000 g\n    'translation' => [\n        'en' => ['name' => 'Kilogram', 'code' => 'kg'],\n    ],\n]);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"handling-the-exception",children:"Handling the Exception"}),"\n",(0,i.jsx)(n.h3,{id:"in-controllers",children:"In Controllers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"use JobMetric\\UnitConverter\\Exceptions\\UnitTypeDefaultValueException;\nuse JobMetric\\UnitConverter\\Facades\\UnitConverter;\n\nclass UnitController extends Controller\n{\n    public function store(Request $request)\n    {\n        try {\n            $response = UnitConverter::store($request->all());\n            return response()->json($response->data, 201);\n        } catch (UnitTypeDefaultValueException $e) {\n            return response()->json([\n                'error' => 'base_unit_required',\n                'message' => $e->getMessage(),\n                'hint' => 'The first unit for this type must have value = 1 (base unit)',\n            ], 400);\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"in-seeders",children:"In Seeders"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"use JobMetric\\UnitConverter\\Facades\\UnitConverter;\nuse JobMetric\\UnitConverter\\Models\\Unit;\n\nclass WeightUnitSeeder extends Seeder\n{\n    public function run(): void\n    {\n        // Check if base unit already exists\n        $baseExists = Unit::where('type', 'weight')\n            ->where('value', 1)\n            ->exists();\n        \n        if (!$baseExists) {\n            // Create base unit first\n            UnitConverter::store([\n                'type' => 'weight',\n                'value' => 1,\n                'translation' => [\n                    'en' => ['name' => 'Gram', 'code' => 'g'],\n                ],\n            ]);\n        }\n        \n        // Now create other units\n        $this->createOtherUnits();\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"prevention",children:"Prevention"}),"\n",(0,i.jsx)(n.h3,{id:"1-always-create-base-unit-first",children:"1. Always Create Base Unit First"}),"\n",(0,i.jsx)(n.p,{children:"When setting up units for a new type, always start with the base unit:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Weight: base = gram\nUnitConverter::store(['type' => 'weight', 'value' => 1, ...]);\n\n// Length: base = meter\nUnitConverter::store(['type' => 'length', 'value' => 1, ...]);\n\n// Volume: base = liter\nUnitConverter::store(['type' => 'volume', 'value' => 1, ...]);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-check-before-creating",children:"2. Check Before Creating"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"use JobMetric\\UnitConverter\\Models\\Unit;\n\nfunction createUnit(string $type, float $value, array $translation): void\n{\n    $typeExists = Unit::where('type', $type)->exists();\n    \n    if (!$typeExists && $value !== 1.0) {\n        throw new \\InvalidArgumentException(\n            \"First unit for type '{$type}' must be the base unit (value = 1)\"\n        );\n    }\n    \n    UnitConverter::store([\n        'type' => $type,\n        'value' => $value,\n        'translation' => $translation,\n    ]);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-use-built-in-seeders",children:"3. Use Built-in Seeders"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"unit:seed"})," command which handles base units correctly:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"php artisan unit:seed\n"})}),"\n",(0,i.jsx)(n.h2,{id:"common-base-units-by-type",children:"Common Base Units by Type"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Recommended Base Unit"}),(0,i.jsx)(n.th,{children:"value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"weight"}),(0,i.jsx)(n.td,{children:"Gram"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"length"}),(0,i.jsx)(n.td,{children:"Meter"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"volume"}),(0,i.jsx)(n.td,{children:"Liter"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"area"}),(0,i.jsx)(n.td,{children:"Square Meter"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"temperature"}),(0,i.jsx)(n.td,{children:"Celsius"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"time"}),(0,i.jsx)(n.td,{children:"Second"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"currency"}),(0,i.jsx)(n.td,{children:"Your primary currency"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"data_storage"}),(0,i.jsx)(n.td,{children:"Byte"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"data_transfer"}),(0,i.jsx)(n.td,{children:"Bit per second"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"energy"}),(0,i.jsx)(n.td,{children:"Joule"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"power"}),(0,i.jsx)(n.td,{children:"Watt"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"pressure"}),(0,i.jsx)(n.td,{children:"Pascal"}),(0,i.jsx)(n.td,{children:"1"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"related-exceptions",children:"Related Exceptions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./unit-type-use-default-value",children:"UnitTypeUseDefaultValueException"})," - When trying to create another unit with value = 1"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./unit-type-cannot-change-default-value",children:"UnitTypeCannotChangeDefaultValueException"})," - When trying to modify base unit's value"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./cannot-delete-default-value",children:"CannotDeleteDefaultValueException"})," - When trying to delete base unit"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453(e,n,t){t.d(n,{R:()=>l,x:()=>a});var r=t(96540);const i={},s=r.createContext(i);function l(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);