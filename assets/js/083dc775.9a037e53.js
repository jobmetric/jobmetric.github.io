"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[5940],{28453(e,r,l){l.d(r,{R:()=>i,x:()=>d});var n=l(96540);const s={},t=n.createContext(s);function i(e){const r=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(t.Provider,{value:r},e.children)}},89231(e,r,l){l.r(r),l.d(r,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"laravel-url/deep-diving/resources/url-resource","title":"UrlResource","description":"The UrlResource transforms the Url model into a structured JSON resource for API responses.","source":"@site/packages/laravel-url/deep-diving/resources/url-resource.md","sourceDirName":"laravel-url/deep-diving/resources","slug":"/laravel-url/deep-diving/resources/url-resource","permalink":"/packages/laravel-url/deep-diving/resources/url-resource","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-url/deep-diving/resources/url-resource.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"UrlResource"},"sidebar":"packagesSidebar","previous":{"title":"SlugResource","permalink":"/packages/laravel-url/deep-diving/resources/slug-resource"},"next":{"title":"ModelUrlContractNotFoundException","permalink":"/packages/laravel-url/deep-diving/exceptions/model-url-contract-not-found-exception"}}');var s=l(74848),t=l(28453),i=l(28774);const d={sidebar_position:2,sidebar_label:"UrlResource"},c="UrlResource",o={},a=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"When to Use UrlResource",id:"when-to-use-urlresource",level:2},{value:"Resource Structure",id:"resource-structure",level:2},{value:"Field Details",id:"field-details",level:2},{value:"Usage",id:"usage",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"In API Responses",id:"in-api-responses",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Example 1: Single URL Resource",id:"example-1-single-url-resource",level:3},{value:"Example 2: URL History Collection",id:"example-2-url-history-collection",level:3},{value:"Example 3: Active URL Only",id:"example-3-active-url-only",level:3},{value:"Example 4: With Related Model",id:"example-4-with-related-model",level:3},{value:"Example 5: API Endpoint",id:"example-5-api-endpoint",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function u(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"urlresource",children:"UrlResource"})}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"UrlResource"})," transforms the ",(0,s.jsx)(r.code,{children:"Url"})," model into a structured JSON resource for API responses."]}),"\n",(0,s.jsx)(r.h2,{id:"namespace",children:"Namespace"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"JobMetric\\Url\\Http\\Resources\\UrlResource\n"})}),"\n",(0,s.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(r.p,{children:"The resource provides:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Structured output"}),": Consistent JSON format"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"ISO 8601 timestamps"}),": Standard datetime formatting"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Version information"}),": URL version number"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Related model"}),": Urlable model resource (via event)"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"when-to-use-urlresource",children:"When to Use UrlResource"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsxs)(r.strong,{children:["Use ",(0,s.jsx)(r.code,{children:"UrlResource"})," when you need:"]})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"API responses"}),": Return URL data in API endpoints"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Structured output"}),": Consistent JSON format for URLs"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Version history"}),": Display URL version information"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Related model data"}),": Include urlable model information"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Example scenarios:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"API endpoints returning URL information"}),"\n",(0,s.jsx)(r.li,{children:"URL history endpoints"}),"\n",(0,s.jsx)(r.li,{children:"Admin panels showing URL details"}),"\n",(0,s.jsx)(r.li,{children:"Version tracking interfaces"}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"resource-structure",children:"Resource Structure"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "urlable_type": "App\\\\Models\\\\Product",\n  "urlable_id": 1,\n  "full_url": "/shop/laptops/macbook-pro-14",\n  "collection": "products",\n  "version": 1,\n  "deleted_at": null,\n  "created_at": "2024-01-01T00:00:00.000000Z",\n  "updated_at": "2024-01-01T00:00:00.000000Z",\n  "urlable": {\n    // Resource from UrlableResourceEvent\n  }\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"field-details",children:"Field Details"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Field"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"urlable_type"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"Model class name (polymorphic)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"urlable_id"})}),(0,s.jsx)(r.td,{children:"int"}),(0,s.jsx)(r.td,{children:"Model ID (polymorphic)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"full_url"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"Complete canonical URL (max 2000 chars)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"collection"})}),(0,s.jsx)(r.td,{children:"string|null"}),(0,s.jsx)(r.td,{children:"Optional collection name"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"version"})}),(0,s.jsx)(r.td,{children:"int"}),(0,s.jsx)(r.td,{children:"Version number (starts at 1)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"deleted_at"})}),(0,s.jsx)(r.td,{children:"string|null"}),(0,s.jsx)(r.td,{children:"Soft delete timestamp (ISO 8601)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"created_at"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"Creation timestamp (ISO 8601)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"updated_at"})}),(0,s.jsx)(r.td,{children:"string"}),(0,s.jsx)(r.td,{children:"Update timestamp (ISO 8601)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"urlable"})}),(0,s.jsx)(r.td,{children:"mixed"}),(0,s.jsx)(r.td,{children:"Related model resource (from event)"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(r.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"use JobMetric\\Url\\Http\\Resources\\UrlResource;\nuse JobMetric\\Url\\Models\\Url;\n\n$url = Url::find(1);\nreturn new UrlResource($url);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"in-api-responses",children:"In API Responses"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"namespace App\\Http\\Controllers;\n\nuse App\\Models\\Product;\nuse JobMetric\\Url\\Http\\Resources\\UrlResource;\n\nclass ProductController extends Controller\n{\n    public function urlHistory(Product $product)\n    {\n        $urls = $product->urlHistory();\n        return UrlResource::collection($urls);\n    }\n}\n"})}),"\n",(0,s.jsx)(r.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,s.jsx)(r.h3,{id:"example-1-single-url-resource",children:"Example 1: Single URL Resource"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"$url = Url::find(1);\nreturn new UrlResource($url);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"example-2-url-history-collection",children:"Example 2: URL History Collection"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"$product = Product::find(1);\n$urls = $product->urlHistory();\nreturn UrlResource::collection($urls);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"example-3-active-url-only",children:"Example 3: Active URL Only"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"$product = Product::find(1);\n$activeUrl = $product->urlRecord()->first();\nreturn new UrlResource($activeUrl);\n"})}),"\n",(0,s.jsx)(r.h3,{id:"example-4-with-related-model",children:"Example 4: With Related Model"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"// Listen to UrlableResourceEvent to provide related model resource\nEvent::listen(UrlableResourceEvent::class, function (UrlableResourceEvent $event) {\n    if ($event->urlable instanceof Product) {\n        $event->resource = new ProductResource($event->urlable);\n    }\n});\n\n$url = Url::find(1);\nreturn new UrlResource($url);\n// urlable field will contain ProductResource\n"})}),"\n",(0,s.jsx)(r.h3,{id:"example-5-api-endpoint",children:"Example 5: API Endpoint"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"Route::get('/api/products/{product}/urls', function (Product $product) {\n    $urls = $product->urlHistory();\n    return UrlResource::collection($urls);\n});\n"})}),"\n",(0,s.jsx)(r.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(i.A,{to:"/packages/laravel-url/deep-diving/models/url",children:"Url Model"})," - Model that this resource transforms"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(i.A,{to:"/packages/laravel-url/deep-diving/has-url",children:"HasUrl Trait"})," - Trait that manages URLs"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(i.A,{to:"/packages/laravel-url/deep-diving/events",children:"Events"})," - UrlableResourceEvent for related model"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);