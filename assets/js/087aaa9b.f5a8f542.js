"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[3288],{28453(e,n,l){l.d(n,{R:()=>i,x:()=>c});var a=l(96540);const s={},r=a.createContext(s);function i(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(r.Provider,{value:n},e.children)}},84894(e,n,l){l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>g,frontMatter:()=>c,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"laravel-language/deep-diving/rules/check-locale-rule","title":"CheckLocaleRule","description":"The CheckLocaleRule validates that the provided locale is unique and matches Laravel\'s folder convention (two-letter lowercase codes).","source":"@site/packages/laravel-language/deep-diving/rules/check-locale-rule.md","sourceDirName":"laravel-language/deep-diving/rules","slug":"/laravel-language/deep-diving/rules/check-locale-rule","permalink":"/packages/laravel-language/deep-diving/rules/check-locale-rule","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-language/deep-diving/rules/check-locale-rule.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"CheckLocaleRule"},"sidebar":"packagesSidebar","previous":{"title":"Language","permalink":"/packages/laravel-language/deep-diving/models/language"},"next":{"title":"LanguageExistRule","permalink":"/packages/laravel-language/deep-diving/rules/language-exist-rule"}}');var s=l(74848),r=l(28453),i=l(28774);const c={sidebar_position:1,sidebar_label:"CheckLocaleRule"},t="CheckLocaleRule",o={},d=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Behavior",id:"behavior",level:2},{value:"When to Use CheckLocaleRule",id:"when-to-use-checklocalerule",level:2},{value:"Primary Use Cases",id:"primary-use-cases",level:3},{value:"1. Creating New Languages (StoreLanguageRequest)",id:"1-creating-new-languages-storelanguagerequest",level:4},{value:"2. Updating Existing Languages (UpdateLanguageRequest)",id:"2-updating-existing-languages-updatelanguagerequest",level:4},{value:"3. Custom Language Management Forms",id:"3-custom-language-management-forms",level:4},{value:"When NOT to Use",id:"when-not-to-use",level:3},{value:"Decision Tree",id:"decision-tree",level:3},{value:"Common Mistakes to Avoid",id:"common-mistakes-to-avoid",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"checklocalerule",children:"CheckLocaleRule"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"CheckLocaleRule"})," validates that the provided locale is unique and matches Laravel's folder convention (two-letter lowercase codes)."]}),"\n",(0,s.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"JobMetric\\Language\\Rules\\CheckLocaleRule\n"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"This rule ensures that:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'Locale is exactly two lowercase letters (e.g., "fa", "en", "de")'}),"\n",(0,s.jsx)(n.li,{children:"Locale is unique in the languages table"}),"\n",(0,s.jsx)(n.li,{children:"Can optionally ignore the current record when updating"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"use JobMetric\\Language\\Rules\\CheckLocaleRule;\n\n$request->validate([\n    'locale' => ['required', 'string', new CheckLocaleRule],\n]);\n\n// When updating, pass the language ID to ignore current record\n$request->validate([\n    'locale' => ['required', 'string', new CheckLocaleRule($languageId)],\n]);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$languageId"})," (",(0,s.jsx)(n.code,{children:"int|null"}),"): Optional language ID to ignore when checking uniqueness (for updates)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"behavior",children:"Behavior"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Skips empty values (let 'required' handle them)"}),"\n",(0,s.jsx)(n.li,{children:"Validates format: exactly two lowercase letters"}),"\n",(0,s.jsx)(n.li,{children:"Checks uniqueness in languages table"}),"\n",(0,s.jsxs)(n.li,{children:["Ignores current record if ",(0,s.jsx)(n.code,{children:"$languageId"})," is provided"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use-checklocalerule",children:"When to Use CheckLocaleRule"}),"\n",(0,s.jsx)(n.h3,{id:"primary-use-cases",children:"Primary Use Cases"}),"\n",(0,s.jsx)(n.h4,{id:"1-creating-new-languages-storelanguagerequest",children:"1. Creating New Languages (StoreLanguageRequest)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When"}),": You're creating a new language record and need to validate the locale."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why"}),": Ensures the locale is:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"In correct format (two lowercase letters)"}),"\n",(0,s.jsx)(n.li,{children:"Unique in the database"}),"\n",(0,s.jsx)(n.li,{children:"Compatible with Laravel's translation system"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// app/Http/Requests/StoreLanguageRequest.php\nuse JobMetric\\Language\\Rules\\CheckLocaleRule;\n\npublic function rules(): array\n{\n    return [\n        'locale' => ['required', 'string', new CheckLocaleRule],\n        // ... other rules\n    ];\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Real-World Scenario"}),': Admin panel form for adding a new language. User enters "fa" for Persian - rule validates it\'s unique and correctly formatted.']}),"\n",(0,s.jsx)(n.h4,{id:"2-updating-existing-languages-updatelanguagerequest",children:"2. Updating Existing Languages (UpdateLanguageRequest)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When"}),": You're updating a language and the locale might change."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Validates new locale format"}),"\n",(0,s.jsx)(n.li,{children:"Ensures uniqueness (excluding current record)"}),"\n",(0,s.jsx)(n.li,{children:"Prevents duplicate locales"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// app/Http/Requests/UpdateLanguageRequest.php\nuse JobMetric\\Language\\Rules\\CheckLocaleRule;\n\npublic function rules(): array\n{\n    $languageId = $this->route('language')->id;\n    \n    return [\n        'locale' => ['required', 'string', new CheckLocaleRule($languageId)],\n        // ... other rules\n    ];\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Real-World Scenario"}),': Admin wants to change locale from "fa-IR" to "fa". Rule ensures "fa" doesn\'t already exist (excluding current record).']}),"\n",(0,s.jsx)(n.h4,{id:"3-custom-language-management-forms",children:"3. Custom Language Management Forms"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When"}),": You have custom forms for language management outside the default requests."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why"}),": Consistent validation across your application."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// Custom language import form\n$request->validate([\n    'languages' => 'required|array',\n    'languages.*.locale' => ['required', 'string', new CheckLocaleRule],\n]);\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Real-World Scenario"}),": Bulk language import feature where you validate multiple locales at once."]}),"\n",(0,s.jsx)(n.h3,{id:"when-not-to-use",children:"When NOT to Use"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reading/Displaying"}),": Don't use for reading locale values - it's a validation rule"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"API Responses"}),": Not needed when returning locale data"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Internal Logic"}),": Don't use for internal locale checks - use model methods instead"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"decision-tree",children:"Decision Tree"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Do you need to validate a locale input?\n\u251c\u2500 Yes \u2192 Is it for creating a new language?\n\u2502  \u251c\u2500 Yes \u2192 Use CheckLocaleRule() (without ID)\n\u2502  \u2514\u2500 No \u2192 Is it for updating an existing language?\n\u2502     \u251c\u2500 Yes \u2192 Use CheckLocaleRule($languageId)\n\u2502     \u2514\u2500 No \u2192 Use CheckLocaleRule() for other scenarios\n\u2514\u2500 No \u2192 Don't use this rule\n"})}),"\n",(0,s.jsx)(n.h3,{id:"common-mistakes-to-avoid",children:"Common Mistakes to Avoid"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Forgetting to pass ID on updates"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// \u274c Wrong - will fail if locale already exists\nnew CheckLocaleRule()\n\n// \u2705 Correct - ignores current record\nnew CheckLocaleRule($languageId)\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Using for non-locale fields"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// \u274c Wrong - this rule is only for locale\n'name' => [new CheckLocaleRule]\n\n// \u2705 Correct\n'locale' => [new CheckLocaleRule]\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Not combining with 'required'"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// \u274c Wrong - allows empty values\n'locale' => [new CheckLocaleRule]\n\n// \u2705 Correct - validates format and uniqueness\n'locale' => ['required', 'string', new CheckLocaleRule]\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(i.A,{to:"/packages/laravel-language/deep-diving/rules/language-exist-rule",children:"LanguageExistRule"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(i.A,{to:"/packages/laravel-language/deep-diving/models/language",children:"Language Model"}),"\n"]}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);