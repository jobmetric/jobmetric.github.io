"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[8435],{28453(e,s,n){n.d(s,{R:()=>t,x:()=>r});var i=n(96540);const a={},l=i.createContext(a);function t(e){const s=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),i.createElement(l.Provider,{value:s},e.children)}},60886(e,s,n){n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"laravel-event-system/deep-diving/class-exist-rule","title":"ClassExistRule","description":"The ClassExistRule is a custom validation rule that ensures a given string value is a valid, existing PHP class that can be loaded by PHP\'s autoloader. It\'s used to validate event and listener class names when registering event-listener bindings in the Event System, preventing errors from non-existent classes.","source":"@site/packages/laravel-event-system/deep-diving/class-exist-rule.md","sourceDirName":"laravel-event-system/deep-diving","slug":"/laravel-event-system/deep-diving/class-exist-rule","permalink":"/packages/laravel-event-system/deep-diving/class-exist-rule","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-event-system/deep-diving/class-exist-rule.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"sidebar_label":"ClassExistRule"},"sidebar":"packagesSidebar","previous":{"title":"EventSystemResource","permalink":"/packages/laravel-event-system/deep-diving/event-system-resource"},"next":{"title":"Laravel Env Modifier","permalink":"/packages/laravel-env-modifier/"}}');var a=n(74848),l=n(28453),t=n(28774);const r={sidebar_position:8,sidebar_label:"ClassExistRule"},d="ClassExistRule",o={},c=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"In Form Request",id:"in-form-request",level:3},{value:"In Controller Validation",id:"in-controller-validation",level:3},{value:"Direct Validation",id:"direct-validation",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"Internal Implementation",id:"internal-implementation",level:3},{value:"Validation Process",id:"validation-process",level:3},{value:"<code>class_exists()</code> Behavior",id:"class_exists-behavior",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Example 1: Basic Form Request",id:"example-1-basic-form-request",level:3},{value:"Example 2: With StoreEventSystemRequest",id:"example-2-with-storeeventsystemrequest",level:3},{value:"Example 3: Custom Validation with Error Handling",id:"example-3-custom-validation-with-error-handling",level:3},{value:"Example 4: Conditional Validation",id:"example-4-conditional-validation",level:3},{value:"Example 5: Multiple Class Validation",id:"example-5-multiple-class-validation",level:3},{value:"Example 6: With Custom Error Messages",id:"example-6-with-custom-error-messages",level:3},{value:"Example 7: API Endpoint Validation",id:"example-7-api-endpoint-validation",level:3},{value:"Example 8: Programmatic Validation",id:"example-8-programmatic-validation",level:3},{value:"Valid Class Names",id:"valid-class-names",level:2},{value:"Valid Examples",id:"valid-examples",level:3},{value:"Invalid Examples",id:"invalid-examples",level:3},{value:"Error Messages",id:"error-messages",level:2},{value:"Default Error Message",id:"default-error-message",level:3},{value:"Error Response Format",id:"error-response-format",level:3},{value:"Custom Error Messages",id:"custom-error-messages",level:3},{value:"When to Use",id:"when-to-use",level:2},{value:"When NOT to Use",id:"when-not-to-use",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Always Combine with String Validation",id:"1-always-combine-with-string-validation",level:3},{value:"2. Use in Form Requests",id:"2-use-in-form-requests",level:3},{value:"3. Provide Clear Error Messages",id:"3-provide-clear-error-messages",level:3},{value:"4. Use Class Constants When Possible",id:"4-use-class-constants-when-possible",level:3},{value:"5. Validate Before Dynamic Instantiation",id:"5-validate-before-dynamic-instantiation",level:3},{value:"Common Mistakes",id:"common-mistakes",level:2},{value:"Mistake 1: Not Combining with String Validation",id:"mistake-1-not-combining-with-string-validation",level:3},{value:"Mistake 2: Using Wrong Namespace Format",id:"mistake-2-using-wrong-namespace-format",level:3},{value:"Mistake 3: Missing Full Namespace",id:"mistake-3-missing-full-namespace",level:3},{value:"Mistake 4: Case Sensitivity Issues",id:"mistake-4-case-sensitivity-issues",level:3},{value:"Mistake 5: Not Handling Validation Failures",id:"mistake-5-not-handling-validation-failures",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Autoloader Impact",id:"autoloader-impact",level:3},{value:"Optimization Tips",id:"optimization-tips",level:3},{value:"Integration with StoreEventSystemRequest",id:"integration-with-storeeventsystemrequest",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function u(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"classexistrule",children:"ClassExistRule"})}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"ClassExistRule"})," is a custom validation rule that ensures a given string value is a valid, existing PHP class that can be loaded by PHP's autoloader. It's used to validate event and listener class names when registering event-listener bindings in the Event System, preventing errors from non-existent classes."]}),"\n",(0,a.jsx)(s.h2,{id:"namespace",children:"Namespace"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"JobMetric\\EventSystem\\Rules\\ClassExistRule\n"})}),"\n",(0,a.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.code,{children:"ClassExistRule"})," validates that:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"The value is a string"}),"\n",(0,a.jsx)(s.li,{children:"The string represents an existing PHP class"}),"\n",(0,a.jsx)(s.li,{children:"The class can be loaded by PHP's autoloader (PSR-4)"}),"\n",(0,a.jsx)(s.li,{children:"The class is accessible in the current context"}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"This rule is essential for:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Type Safety"}),": Ensuring only valid class names are accepted"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Error Prevention"}),": Preventing runtime errors from non-existent classes"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Dynamic Loading"}),": Safely validating classes before dynamic instantiation"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"API Validation"}),": Validating class names in API requests"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,a.jsx)(s.h3,{id:"in-form-request",children:"In Form Request"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"namespace App\\Http\\Requests;\n\nuse Illuminate\\Foundation\\Http\\FormRequest;\nuse JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\nclass StoreEventRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        return [\n            'event' => [\n                'required',\n                'string',\n                new ClassExistRule\n            ],\n            'listener' => [\n                'required',\n                'string',\n                new ClassExistRule\n            ],\n        ];\n    }\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"in-controller-validation",children:"In Controller Validation"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"use Illuminate\\Support\\Facades\\Validator;\nuse JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\n$validator = Validator::make($data, [\n    'event' => ['required', 'string', new ClassExistRule],\n    'listener' => ['required', 'string', new ClassExistRule],\n]);\n\nif ($validator->fails()) {\n    return response()->json($validator->errors(), 422);\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"direct-validation",children:"Direct Validation"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"use Illuminate\\Support\\Facades\\Validator;\nuse JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\n$data = [\n    'event' => 'App\\Events\\UserCreated',\n];\n\n$validator = Validator::make($data, [\n    'event' => new ClassExistRule,\n]);\n\nif ($validator->fails()) {\n    // Handle validation failure\n}\n"})}),"\n",(0,a.jsx)(s.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,a.jsx)(s.h3,{id:"internal-implementation",children:"Internal Implementation"}),"\n",(0,a.jsxs)(s.p,{children:["The rule uses PHP's ",(0,a.jsx)(s.code,{children:"class_exists()"})," function to check if a class exists:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"class ClassExistRule implements ValidationRule\n{\n    public function validate(string $attribute, mixed $value, Closure $fail): void\n    {\n        if (!class_exists($value)) {\n            $fail(trans('event-system::base.validation.class_exist', [\n                'class' => $value\n            ]));\n        }\n    }\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"validation-process",children:"Validation Process"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Receives the value"})," from the validation attribute"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Checks if value is string"})," (handled by Laravel's ",(0,a.jsx)(s.code,{children:"string"})," rule)"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsxs)(s.strong,{children:["Calls ",(0,a.jsx)(s.code,{children:"class_exists($value)"})]})," to verify class existence"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Triggers autoloader"})," if class hasn't been loaded yet"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Returns success"})," if class exists, ",(0,a.jsx)(s.strong,{children:"fails"})," if it doesn't"]}),"\n"]}),"\n",(0,a.jsxs)(s.h3,{id:"class_exists-behavior",children:[(0,a.jsx)(s.code,{children:"class_exists()"})," Behavior"]}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"class_exists()"})," function:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Triggers autoloader"}),": Attempts to load the class via PSR-4 autoloading"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Case-sensitive"}),": Class names are case-sensitive"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Namespace-aware"}),": Requires full namespace path"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Returns boolean"}),": ",(0,a.jsx)(s.code,{children:"true"})," if class exists, ",(0,a.jsx)(s.code,{children:"false"})," otherwise"]}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Important Notes:"})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Works with PSR-4 autoloaded classes"}),"\n",(0,a.jsxs)(s.li,{children:["Requires full namespace (e.g., ",(0,a.jsx)(s.code,{children:"App\\Events\\UserCreated"}),")"]}),"\n",(0,a.jsx)(s.li,{children:"Case-sensitive matching"}),"\n",(0,a.jsx)(s.li,{children:"Triggers autoloader if class not yet loaded"}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,a.jsx)(s.h3,{id:"example-1-basic-form-request",children:"Example 1: Basic Form Request"}),"\n",(0,a.jsx)(s.p,{children:"Validate event and listener classes:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"namespace App\\Http\\Requests;\n\nuse Illuminate\\Foundation\\Http\\FormRequest;\nuse JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\nclass StoreEventRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        return [\n            'name' => 'required|string|max:255|unique:events,name',\n            'description' => 'nullable|string',\n            'event' => [\n                'required',\n                'string',\n                new ClassExistRule\n            ],\n            'listener' => [\n                'required',\n                'string',\n                new ClassExistRule\n            ],\n            'priority' => 'nullable|integer',\n            'status' => 'boolean',\n        ];\n    }\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"example-2-with-storeeventsystemrequest",children:"Example 2: With StoreEventSystemRequest"}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"StoreEventSystemRequest"})," already uses this rule:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Http\\Requests\\StoreEventSystemRequest;\n\n// Automatically validates classes\n$dto = dto([\n    'name' => 'user.created',\n    'event' => 'App\\Events\\UserCreated',      // Validated with ClassExistRule\n    'listener' => 'App\\Listeners\\SendWelcomeEmail', // Validated with ClassExistRule\n], StoreEventSystemRequest::class);\n"})}),"\n",(0,a.jsx)(s.h3,{id:"example-3-custom-validation-with-error-handling",children:"Example 3: Custom Validation with Error Handling"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"use Illuminate\\Support\\Facades\\Validator;\nuse JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\n$data = [\n    'event' => 'App\\Events\\UserCreated',\n    'listener' => 'App\\Listeners\\SendWelcomeEmail',\n];\n\n$validator = Validator::make($data, [\n    'event' => ['required', 'string', new ClassExistRule],\n    'listener' => ['required', 'string', new ClassExistRule],\n]);\n\nif ($validator->fails()) {\n    $errors = $validator->errors();\n    \n    foreach ($errors->all() as $error) {\n        // Handle each error\n        Log::error('Validation failed', ['error' => $error]);\n    }\n    \n    return response()->json([\n        'success' => false,\n        'errors' => $errors,\n    ], 422);\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"example-4-conditional-validation",children:"Example 4: Conditional Validation"}),"\n",(0,a.jsx)(s.p,{children:"Apply rule conditionally:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"namespace App\\Http\\Requests;\n\nuse Illuminate\\Foundation\\Http\\FormRequest;\nuse Illuminate\\Validation\\Rule;\nuse JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\nclass StoreEventRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        $rules = [\n            'name' => 'required|string',\n        ];\n\n        // Only validate class if type is 'custom'\n        if ($this->input('type') === 'custom') {\n            $rules['event'] = ['required', 'string', new ClassExistRule];\n            $rules['listener'] = ['required', 'string', new ClassExistRule];\n        }\n\n        return $rules;\n    }\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"example-5-multiple-class-validation",children:"Example 5: Multiple Class Validation"}),"\n",(0,a.jsx)(s.p,{children:"Validate multiple class fields:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"use Illuminate\\Support\\Facades\\Validator;\nuse JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\n$validator = Validator::make($data, [\n    'event' => ['required', 'string', new ClassExistRule],\n    'listener' => ['required', 'string', new ClassExistRule],\n    'middleware' => ['nullable', 'string', new ClassExistRule],\n    'handler' => ['nullable', 'string', new ClassExistRule],\n]);\n"})}),"\n",(0,a.jsx)(s.h3,{id:"example-6-with-custom-error-messages",children:"Example 6: With Custom Error Messages"}),"\n",(0,a.jsx)(s.p,{children:"Provide custom error messages:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"namespace App\\Http\\Requests;\n\nuse Illuminate\\Foundation\\Http\\FormRequest;\nuse JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\nclass StoreEventRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        return [\n            'event' => ['required', 'string', new ClassExistRule],\n            'listener' => ['required', 'string', new ClassExistRule],\n        ];\n    }\n\n    public function messages(): array\n    {\n        return [\n            'event' => 'The event class does not exist or cannot be loaded.',\n            'listener' => 'The listener class does not exist or cannot be loaded.',\n        ];\n    }\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"example-7-api-endpoint-validation",children:"Example 7: API Endpoint Validation"}),"\n",(0,a.jsx)(s.p,{children:"Validate in API controller:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"namespace App\\Http\\Controllers\\Api;\n\nuse App\\Http\\Controllers\\Controller;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Validator;\nuse JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\nclass EventController extends Controller\n{\n    public function store(Request $request)\n    {\n        $validator = Validator::make($request->all(), [\n            'event' => ['required', 'string', new ClassExistRule],\n            'listener' => ['required', 'string', new ClassExistRule],\n        ]);\n\n        if ($validator->fails()) {\n            return response()->json([\n                'success' => false,\n                'errors' => $validator->errors(),\n            ], 422);\n        }\n\n        // Process validated data\n        return response()->json(['success' => true], 201);\n    }\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"example-8-programmatic-validation",children:"Example 8: Programmatic Validation"}),"\n",(0,a.jsx)(s.p,{children:"Validate before dynamic class instantiation:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Rules\\ClassExistRule;\nuse Illuminate\\Support\\Facades\\Validator;\n\n$className = 'App\\Events\\UserCreated';\n\n// Validate before using\n$validator = Validator::make(\n    ['class' => $className],\n    ['class' => new ClassExistRule]\n);\n\nif ($validator->passes()) {\n    // Safe to instantiate\n    $event = new $className();\n} else {\n    // Handle error\n    throw new \\InvalidArgumentException(\"Class {$className} does not exist\");\n}\n"})}),"\n",(0,a.jsx)(s.h2,{id:"valid-class-names",children:"Valid Class Names"}),"\n",(0,a.jsx)(s.h3,{id:"valid-examples",children:"Valid Examples"}),"\n",(0,a.jsx)(s.p,{children:"The rule accepts valid PHP class names:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"// Fully qualified class names\n'App\\Events\\UserCreated'\n'App\\Listeners\\SendWelcomeEmail'\n'JobMetric\\EventSystem\\Events\\EventSystemStoredEvent'\n\n// Using class constants (converted to string)\nApp\\Events\\UserCreated::class  // Returns 'App\\Events\\UserCreated'\n"})}),"\n",(0,a.jsx)(s.h3,{id:"invalid-examples",children:"Invalid Examples"}),"\n",(0,a.jsx)(s.p,{children:"The rule rejects invalid class names:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"// Non-existent classes\n'App\\Events\\NonExistentEvent'  // \u274c Class doesn't exist\n'App\\Listeners\\InvalidListener' // \u274c Class doesn't exist\n\n// Invalid syntax\n'App Events UserCreated'        // \u274c Invalid namespace separator\n'App\\Events\\User Created'      // \u274c Space in class name\n'App\\Events\\UserCreated!'      // \u274c Invalid character\n\n// Missing namespace\n'UserCreated'                   // \u274c Missing namespace (unless in global namespace)\n"})}),"\n",(0,a.jsx)(s.h2,{id:"error-messages",children:"Error Messages"}),"\n",(0,a.jsx)(s.h3,{id:"default-error-message",children:"Default Error Message"}),"\n",(0,a.jsx)(s.p,{children:"The rule uses a translation key for error messages:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"trans('event-system::base.validation.class_exist', [\n    'class' => $value\n])\n"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Translation Key:"})," ",(0,a.jsx)(s.code,{children:"event-system::base.validation.class_exist"})]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Default Message:"})," ",(0,a.jsx)(s.code,{children:'"The class :class does not exist."'})]}),"\n",(0,a.jsx)(s.h3,{id:"error-response-format",children:"Error Response Format"}),"\n",(0,a.jsx)(s.p,{children:"When validation fails:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-json",children:'{\n    "errors": {\n        "event": [\n            "The class App\\\\Events\\\\NonExistentEvent does not exist."\n        ],\n        "listener": [\n            "The class App\\\\Listeners\\\\InvalidListener does not exist."\n        ]\n    }\n}\n'})}),"\n",(0,a.jsx)(s.h3,{id:"custom-error-messages",children:"Custom Error Messages"}),"\n",(0,a.jsx)(s.p,{children:"Override error messages in form requests:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"namespace App\\Http\\Requests;\n\nuse Illuminate\\Foundation\\Http\\FormRequest;\nuse JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\nclass StoreEventRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        return [\n            'event' => ['required', 'string', new ClassExistRule],\n            'listener' => ['required', 'string', new ClassExistRule],\n        ];\n    }\n\n    public function messages(): array\n    {\n        return [\n            'event' => 'The event class :input does not exist or cannot be loaded.',\n            'listener' => 'The listener class :input does not exist or cannot be loaded.',\n        ];\n    }\n}\n"})}),"\n",(0,a.jsx)(s.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,a.jsxs)(s.p,{children:["Use ",(0,a.jsx)(s.code,{children:"ClassExistRule"})," when you need to:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Validate Class Names"}),": Ensure class names exist before using them"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Event Validation"}),": Validate event class names in form requests"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Listener Validation"}),": Validate listener class names in form requests"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Dynamic Loading"}),": Prevent errors when loading classes dynamically"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Type Safety"}),": Ensure only valid class names are accepted"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"API Validation"}),": Validate class names in API requests"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Import/Export"}),": Validate class names during import/export operations"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"when-not-to-use",children:"When NOT to Use"}),"\n",(0,a.jsx)(s.p,{children:"Avoid using this rule when:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Interface Validation"}),": Use interface validation for interfaces"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Trait Validation"}),": Use trait validation for traits"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Already Validated"}),": If classes are already validated elsewhere"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Performance Critical"}),": For high-frequency validations, consider caching"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsx)(s.h3,{id:"1-always-combine-with-string-validation",children:"1. Always Combine with String Validation"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"// Good: Combined with string validation\n'event' => ['required', 'string', new ClassExistRule]\n\n// Avoid: Missing string validation\n'event' => [new ClassExistRule]  // May fail if value is not string\n"})}),"\n",(0,a.jsx)(s.h3,{id:"2-use-in-form-requests",children:"2. Use in Form Requests"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"// Good: Use in form requests\nclass StoreEventRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        return [\n            'event' => ['required', 'string', new ClassExistRule],\n        ];\n    }\n}\n\n// Avoid: Manual validation in controllers\npublic function store(Request $request)\n{\n    $validator = Validator::make(...); // Use form requests instead\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"3-provide-clear-error-messages",children:"3. Provide Clear Error Messages"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"// Good: Custom error messages\npublic function messages(): array\n{\n    return [\n        'event' => 'The event class does not exist or cannot be loaded.',\n    ];\n}\n\n// Avoid: Generic error messages\n// Let default message be used\n"})}),"\n",(0,a.jsx)(s.h3,{id:"4-use-class-constants-when-possible",children:"4. Use Class Constants When Possible"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"// Good: Use class constants\n'event' => App\\Events\\UserCreated::class\n\n// Avoid: String literals (prone to typos)\n'event' => 'App\\Events\\UserCreated'\n"})}),"\n",(0,a.jsx)(s.h3,{id:"5-validate-before-dynamic-instantiation",children:"5. Validate Before Dynamic Instantiation"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"// Good: Validate before using\n$validator = Validator::make(['class' => $className], [\n    'class' => new ClassExistRule\n]);\n\nif ($validator->passes()) {\n    $instance = new $className();\n}\n\n// Avoid: Direct instantiation without validation\n$instance = new $className(); // May throw error\n"})}),"\n",(0,a.jsx)(s.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,a.jsx)(s.h3,{id:"mistake-1-not-combining-with-string-validation",children:"Mistake 1: Not Combining with String Validation"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"// Bad: Missing string validation\n'event' => [new ClassExistRule]\n\n// Good: Combined with string validation\n'event' => ['required', 'string', new ClassExistRule]\n"})}),"\n",(0,a.jsx)(s.h3,{id:"mistake-2-using-wrong-namespace-format",children:"Mistake 2: Using Wrong Namespace Format"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"// Bad: Wrong namespace separator\n'event' => 'App/Events/UserCreated'  // \u274c Uses / instead of \\\n\n// Good: Correct namespace format\n'event' => 'App\\Events\\UserCreated'   // \u2705 Uses \\\n"})}),"\n",(0,a.jsx)(s.h3,{id:"mistake-3-missing-full-namespace",children:"Mistake 3: Missing Full Namespace"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"// Bad: Missing namespace\n'event' => 'UserCreated'  // \u274c May not work if not in global namespace\n\n// Good: Full namespace\n'event' => 'App\\Events\\UserCreated'  // \u2705 Complete namespace\n"})}),"\n",(0,a.jsx)(s.h3,{id:"mistake-4-case-sensitivity-issues",children:"Mistake 4: Case Sensitivity Issues"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"// Bad: Wrong case\n'event' => 'App\\Events\\usercreated'  // \u274c Wrong case\n\n// Good: Correct case\n'event' => 'App\\Events\\UserCreated'  // \u2705 Correct case\n"})}),"\n",(0,a.jsx)(s.h3,{id:"mistake-5-not-handling-validation-failures",children:"Mistake 5: Not Handling Validation Failures"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"// Bad: No error handling\n$validator = Validator::make($data, [\n    'event' => new ClassExistRule,\n]);\n// No check for failures\n\n// Good: Handle failures\n$validator = Validator::make($data, [\n    'event' => new ClassExistRule,\n]);\n\nif ($validator->fails()) {\n    return response()->json($validator->errors(), 422);\n}\n"})}),"\n",(0,a.jsx)(s.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,a.jsx)(s.h3,{id:"autoloader-impact",children:"Autoloader Impact"}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"class_exists()"})," function triggers PHP's autoloader:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"First Check"}),": May be slower if class file needs to be loaded"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Subsequent Checks"}),": Faster if class is already loaded"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"PSR-4"}),": Works efficiently with PSR-4 autoloading"]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"optimization-tips",children:"Optimization Tips"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Cache Validation Results"}),": For frequently validated classes"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Pre-load Classes"}),": Load classes before validation if possible"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Use Composer Autoloader"}),": Ensure PSR-4 autoloading is optimized"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"integration-with-storeeventsystemrequest",children:"Integration with StoreEventSystemRequest"}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"StoreEventSystemRequest"})," automatically uses this rule:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"namespace JobMetric\\EventSystem\\Http\\Requests;\n\nclass StoreEventSystemRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        return [\n            'event' => [\n                'required',\n                'string',\n                new ClassExistRule  // \u2190 Used here\n            ],\n            'listener' => [\n                'required',\n                'string',\n                new ClassExistRule  // \u2190 Used here\n            ],\n        ];\n    }\n}\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Usage:"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Http\\Requests\\StoreEventSystemRequest;\n\n// Automatically validates classes\n$dto = dto([\n    'name' => 'user.created',\n    'event' => 'App\\Events\\UserCreated',      // Validated\n    'listener' => 'App\\Listeners\\SendWelcomeEmail', // Validated\n], StoreEventSystemRequest::class);\n"})}),"\n",(0,a.jsx)(s.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(t.A,{to:"/packages/laravel-event-system/deep-diving/store-event-system-request",children:"StoreEventSystemRequest"})," - Form request using this rule"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(t.A,{to:"/packages/laravel-event-system/deep-diving/event-system",children:"EventSystem"})," - Service for managing event bindings"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(t.A,{to:"/packages/laravel-event-system/deep-diving/domain-event",children:"DomainEvent"})," - Domain event contract"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}}}]);