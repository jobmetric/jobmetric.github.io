"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[8852],{114(e,a,t){t.r(a),t.d(a,{assets:()=>o,contentTitle:()=>d,default:()=>m,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"laravel-metadata/deep-diving/models/meta","title":"Meta Model","description":"The Meta model represents a key-value metadata entry associated with any Eloquent model via a polymorphic relation. It stores arbitrary metadata for models such as posts, products, users, etc., allowing extensibility without altering their main table.","source":"@site/packages/laravel-metadata/deep-diving/models/meta.md","sourceDirName":"laravel-metadata/deep-diving/models","slug":"/laravel-metadata/deep-diving/models/meta","permalink":"/packages/laravel-metadata/deep-diving/models/meta","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-metadata/deep-diving/models/meta.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"Meta"},"sidebar":"packagesSidebar","previous":{"title":"HasDynamicMeta","permalink":"/packages/laravel-metadata/deep-diving/has-dynamic-meta"},"next":{"title":"Events","permalink":"/packages/laravel-metadata/deep-diving/events"}}');var l=t(74848),s=t(28453),i=t(28774);const r={sidebar_position:1,sidebar_label:"Meta"},d="Meta Model",o={},c=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Table Structure",id:"table-structure",level:2},{value:"Relationships",id:"relationships",level:2},{value:"Metaable (Polymorphic)",id:"metaable-polymorphic",level:3},{value:"Available Methods",id:"available-methods",level:2},{value:"Query Scopes",id:"query-scopes",level:3},{value:"Direct Usage",id:"direct-usage",level:2},{value:"JSON Values",id:"json-values",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function h(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.header,{children:(0,l.jsx)(a.h1,{id:"meta-model",children:"Meta Model"})}),"\n",(0,l.jsxs)(a.p,{children:["The ",(0,l.jsx)(a.code,{children:"Meta"})," model represents a key-value metadata entry associated with any Eloquent model via a polymorphic relation. It stores arbitrary metadata for models such as posts, products, users, etc., allowing extensibility without altering their main table."]}),"\n",(0,l.jsx)(a.h2,{id:"namespace",children:"Namespace"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-php",children:"JobMetric\\Metadata\\Models\\Meta\n"})}),"\n",(0,l.jsx)(a.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(a.p,{children:["The ",(0,l.jsx)(a.code,{children:"Meta"})," model is designed to store arbitrary metadata for models via a polymorphic relationship. It supports complex data types by marking values as JSON-encoded and provides a clean API for querying metadata."]}),"\n",(0,l.jsx)(a.h2,{id:"table-structure",children:"Table Structure"}),"\n",(0,l.jsxs)(a.p,{children:["The ",(0,l.jsx)(a.code,{children:"metas"})," table has the following structure:"]}),"\n",(0,l.jsxs)(a.ul,{children:["\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.code,{children:"id"})," - Primary key"]}),"\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.code,{children:"metaable_type"})," - Model class name (polymorphic)"]}),"\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.code,{children:"metaable_id"})," - Model ID (polymorphic)"]}),"\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.code,{children:"key"})," - Metadata key (indexed)"]}),"\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.code,{children:"value"})," - Metadata value (text, nullable)"]}),"\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.code,{children:"is_json"})," - Boolean flag indicating if value is JSON"]}),"\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.code,{children:"created_at"})," - Timestamp"]}),"\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.code,{children:"updated_at"})," - Timestamp"]}),"\n",(0,l.jsxs)(a.li,{children:["Unique index on ",(0,l.jsx)(a.code,{children:"(metaable_type, metaable_id, key)"})]}),"\n"]}),"\n",(0,l.jsx)(a.h2,{id:"relationships",children:"Relationships"}),"\n",(0,l.jsx)(a.h3,{id:"metaable-polymorphic",children:"Metaable (Polymorphic)"}),"\n",(0,l.jsx)(a.p,{children:"Get the parent model that owns this metadata:"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-php",children:"$meta = Meta::find(1);\n$product = $meta->metaable;\n// => Product model instance\n"})}),"\n",(0,l.jsxs)(a.p,{children:[(0,l.jsx)(a.strong,{children:"Returns:"})," ",(0,l.jsx)(a.code,{children:"MorphTo"})," - Polymorphic relationship"]}),"\n",(0,l.jsx)(a.h2,{id:"available-methods",children:"Available Methods"}),"\n",(0,l.jsx)(a.h3,{id:"query-scopes",children:"Query Scopes"}),"\n",(0,l.jsx)(a.p,{children:"The model provides query scopes for common operations:"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-php",children:"// Filter by metaable type\nMeta::whereMetaableType(Product::class)->get();\n\n// Filter by metaable ID\nMeta::whereMetaableId(1)->get();\n\n// Filter by key\nMeta::whereKey('color')->get();\n\n// Filter by value\nMeta::whereValue('red')->get();\n\n// Filter by JSON flag\nMeta::whereIsJson(true)->get();\n"})}),"\n",(0,l.jsx)(a.h2,{id:"direct-usage",children:"Direct Usage"}),"\n",(0,l.jsxs)(a.p,{children:["While you typically interact with metadata through the ",(0,l.jsx)(a.code,{children:"HasMeta"})," trait, you can also work with the ",(0,l.jsx)(a.code,{children:"Meta"})," model directly:"]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-php",children:"use JobMetric\\Metadata\\Models\\Meta;\n\n// Create metadata directly\n$meta = Meta::create([\n    'metaable_type' => Product::class,\n    'metaable_id' => 1,\n    'key' => 'color',\n    'value' => 'red',\n    'is_json' => false,\n]);\n\n// Query metadata\n$colorMetas = Meta::where('key', 'color')->get();\n\n// Find metadata for a specific model\n$productMetas = Meta::where('metaable_type', Product::class)\n    ->where('metaable_id', 1)\n    ->get();\n"})}),"\n",(0,l.jsx)(a.h2,{id:"json-values",children:"JSON Values"}),"\n",(0,l.jsxs)(a.p,{children:["When storing arrays or objects, the value is automatically JSON-encoded and ",(0,l.jsx)(a.code,{children:"is_json"})," is set to ",(0,l.jsx)(a.code,{children:"true"}),":"]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-php",children:"$meta = Meta::create([\n    'metaable_type' => Product::class,\n    'metaable_id' => 1,\n    'key' => 'dimensions',\n    'value' => json_encode(['width' => 10, 'height' => 20]),\n    'is_json' => true,\n]);\n\n// When retrieving, decode if needed\n$dimensions = $meta->is_json \n    ? json_decode($meta->value, true) \n    : $meta->value;\n"})}),"\n",(0,l.jsx)(a.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,l.jsxs)(a.ul,{children:["\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsx)(i.A,{to:"/packages/laravel-metadata/deep-diving/has-meta",children:"HasMeta Trait"}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsx)(i.A,{to:"/packages/laravel-metadata/deep-diving/resources/metadata-resource",children:"MetadataResource"}),"\n"]}),"\n"]})]})}function m(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,l.jsx)(a,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453(e,a,t){t.d(a,{R:()=>i,x:()=>r});var n=t(96540);const l={},s=n.createContext(l);function i(e){const a=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),n.createElement(s.Provider,{value:a},e.children)}}}]);