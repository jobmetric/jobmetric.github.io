"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[1335],{19618(e,n,a){a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"laravel-location/deep-diving/datasets","title":"Datasets (database/data)","description":"Laravel Location includes a dataset workflow under database/data/ to standardize country and subdivision data.","source":"@site/packages/laravel-location/deep-diving/datasets.md","sourceDirName":"laravel-location/deep-diving","slug":"/laravel-location/deep-diving/datasets","permalink":"/packages/laravel-location/deep-diving/datasets","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-location/deep-diving/datasets.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"sidebar_label":"Datasets"},"sidebar":"packagesSidebar","previous":{"title":"CheckExistNameRule","permalink":"/packages/laravel-location/deep-diving/rules/check-exist-name-rule"},"next":{"title":"Events","permalink":"/packages/laravel-location/deep-diving/events"}}');var t=a(74848),i=a(28453);const r={sidebar_position:10,sidebar_label:"Datasets"},d="Datasets (database/data)",o={},l=[{value:"Goals",id:"goals",level:2},{value:"Folder structure",id:"folder-structure",level:2},{value:"Data shapes",id:"data-shapes",level:2},{value:"<code>countries.json</code>",id:"countriesjson",level:3},{value:"<code>{country_key}/data.json</code>",id:"country_keydatajson",level:3},{value:"Workflow",id:"workflow",level:2},{value:"Where to read more",id:"where-to-read-more",level:2},{value:"Related",id:"related",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsxs)(n.h1,{id:"datasets-databasedata",children:["Datasets (",(0,t.jsx)(n.code,{children:"database/data"}),")"]})}),"\n",(0,t.jsxs)(n.p,{children:["Laravel Location includes a dataset workflow under ",(0,t.jsx)(n.code,{children:"database/data/"})," to standardize country and subdivision data."]}),"\n",(0,t.jsx)(n.h2,{id:"goals",children:"Goals"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Maintain a ",(0,t.jsx)(n.strong,{children:"single master list"})," of countries (",(0,t.jsx)(n.code,{children:"countries.json"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Allow adding ",(0,t.jsx)(n.strong,{children:"country-specific subdivisions"})," under ",(0,t.jsx)(n.code,{children:"database/data/{country_key}/"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"folder-structure",children:"Folder structure"}),"\n",(0,t.jsx)(n.p,{children:"Recommended:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"database/data/countries.json"})," (required)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"database/data/{country_key}/data.json"})," (optional; preferred)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"database/data/{country_key}/subdivisions.json"})," (optional; legacy)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"database/data/\n  countries.json\n  ir/\n    data.json\n  us/\n    data.json\n"})}),"\n",(0,t.jsx)(n.h2,{id:"data-shapes",children:"Data shapes"}),"\n",(0,t.jsx)(n.h3,{id:"countriesjson",children:(0,t.jsx)(n.code,{children:"countries.json"})}),"\n",(0,t.jsxs)(n.p,{children:["The generator command produces a list of countries. The import command primarily uses fields like ",(0,t.jsx)(n.code,{children:"key"}),", ",(0,t.jsx)(n.code,{children:"name"}),", ",(0,t.jsx)(n.code,{children:"flag"}),", ",(0,t.jsx)(n.code,{children:"mobile_prefix"}),", ",(0,t.jsx)(n.code,{children:"validation"}),", and ",(0,t.jsx)(n.code,{children:"address_on_letter"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Example (simplified):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "key": "ir",\n    "name": "Iran",\n    "flag": "ir.svg",\n    "mobile_prefix": 98,\n    "validation": ["/^9\\\\d{9}$/"],\n    "address_on_letter": "{country}, {province}, {city}\\n{district}, {street}, {number}",\n    "status": true\n  }\n]\n'})}),"\n",(0,t.jsx)(n.h3,{id:"country_keydatajson",children:(0,t.jsx)(n.code,{children:"{country_key}/data.json"})}),"\n",(0,t.jsx)(n.p,{children:"Hierarchy file is optional and used when you want to import provinces/cities/districts for that country."}),"\n",(0,t.jsx)(n.p,{children:"Recommended shape:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "provinces": [\n    {\n      "name": "Tehran",\n      "status": true,\n      "cities": [\n        {\n          "name": "Tehran",\n          "status": true,\n          "districts": [\n            { "name": "District 1", "status": true }\n          ]\n        }\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"workflow",children:"Workflow"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Generate/update countries dataset:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"php artisan location:generate-countries --pretty\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Add subdivisions for the countries you care about (optional)"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Import:"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"php artisan location:import\nphp artisan location:import ir --force\n"})}),"\n",(0,t.jsx)(n.h2,{id:"where-to-read-more",children:"Where to read more"}),"\n",(0,t.jsx)(n.p,{children:"This documentation is a summary. The dataset layer is documented in detail in the package dataset README:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"packages/laravel-location/database/data/README.md"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"related",children:"Related"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.a,{href:"/packages/laravel-location/deep-diving/commands/generate-countries-data",children:["location",":generate-countries"]})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.a,{href:"/packages/laravel-location/deep-diving/commands/import-location-data",children:["location",":import"]})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453(e,n,a){a.d(n,{R:()=>r,x:()=>d});var s=a(96540);const t={},i=s.createContext(t);function r(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);