"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[4863],{28453(e,n,t){t.d(n,{R:()=>r,x:()=>a});var i=t(96540);const l={},s=i.createContext(l);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(s.Provider,{value:n},e.children)}},91306(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"laravel-unit-converter/deep-diving/models","title":"Models","description":"Laravel Unit Converter provides two Eloquent models for managing units and their relations to other models.","source":"@site/packages/laravel-unit-converter/deep-diving/models.md","sourceDirName":"laravel-unit-converter/deep-diving","slug":"/laravel-unit-converter/deep-diving/models","permalink":"/packages/laravel-unit-converter/deep-diving/models","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-unit-converter/deep-diving/models.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"Models"},"sidebar":"packagesSidebar","previous":{"title":"Unit Types","permalink":"/packages/laravel-unit-converter/deep-diving/unit-types"},"next":{"title":"UnitStoreEvent","permalink":"/packages/laravel-unit-converter/deep-diving/events/unit-store-event"}}');var l=t(74848),s=t(28453);t(28774);const r={sidebar_position:4,sidebar_label:"Models"},a="Models",d={},c=[{value:"Unit Model",id:"unit-model",level:2},{value:"Namespace",id:"namespace",level:3},{value:"Table Structure",id:"table-structure",level:3},{value:"Properties",id:"properties",level:3},{value:"Fillable Attributes",id:"fillable-attributes",level:3},{value:"Casts",id:"casts",level:3},{value:"Traits Used",id:"traits-used",level:3},{value:"Translatable Fields",id:"translatable-fields",level:3},{value:"Relationships",id:"relationships",level:3},{value:"unitRelations",id:"unitrelations",level:4},{value:"Query Scopes",id:"query-scopes",level:3},{value:"ofType",id:"oftype",level:4},{value:"Example Usage",id:"example-usage",level:3},{value:"UnitRelation Model",id:"unitrelation-model",level:2},{value:"Namespace",id:"namespace-1",level:3},{value:"Table Structure",id:"table-structure-1",level:3},{value:"Properties",id:"properties-1",level:3},{value:"Fillable Attributes",id:"fillable-attributes-1",level:3},{value:"Casts",id:"casts-1",level:3},{value:"Relationships",id:"relationships-1",level:3},{value:"unit",id:"unit",level:4},{value:"unitable",id:"unitable",level:4},{value:"Query Scopes",id:"query-scopes-1",level:3},{value:"ofType",id:"oftype-1",level:4},{value:"Accessor: unitable_resource",id:"accessor-unitable_resource",level:3},{value:"Example Usage",id:"example-usage-1",level:3},{value:"Configuration",id:"configuration",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"models",children:"Models"})}),"\n",(0,l.jsx)(n.p,{children:"Laravel Unit Converter provides two Eloquent models for managing units and their relations to other models."}),"\n",(0,l.jsx)(n.h2,{id:"unit-model",children:"Unit Model"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"Unit"})," model represents a measurement unit that can be used for conversions."]}),"\n",(0,l.jsx)(n.h3,{id:"namespace",children:"Namespace"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"JobMetric\\UnitConverter\\Models\\Unit\n"})}),"\n",(0,l.jsx)(n.h3,{id:"table-structure",children:"Table Structure"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Column"}),(0,l.jsx)(n.th,{children:"Type"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"id"})}),(0,l.jsx)(n.td,{children:"bigint"}),(0,l.jsx)(n.td,{children:"Primary key"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"type"})}),(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"Unit type (weight, length, etc.)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"value"})}),(0,l.jsx)(n.td,{children:"decimal(20,10)"}),(0,l.jsx)(n.td,{children:"Conversion value relative to base unit"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"status"})}),(0,l.jsx)(n.td,{children:"boolean"}),(0,l.jsx)(n.td,{children:"Active status (true=enabled)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"created_at"})}),(0,l.jsx)(n.td,{children:"timestamp"}),(0,l.jsx)(n.td,{children:"Creation timestamp"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"updated_at"})}),(0,l.jsx)(n.td,{children:"timestamp"}),(0,l.jsx)(n.td,{children:"Update timestamp"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"properties",children:"Properties"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"/**\n * @property int $id                         The primary identifier of the unit.\n * @property string $type                    The type of measurement unit.\n * @property float $value                    Conversion value relative to base unit.\n * @property bool $status                    Active flag (true=enabled, false=disabled).\n * @property Carbon $created_at              Creation timestamp.\n * @property Carbon $updated_at              Update timestamp.\n */\n"})}),"\n",(0,l.jsx)(n.h3,{id:"fillable-attributes",children:"Fillable Attributes"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"protected $fillable = [\n    'type',\n    'value',\n    'status',\n];\n"})}),"\n",(0,l.jsx)(n.h3,{id:"casts",children:"Casts"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"protected $casts = [\n    'type'   => 'string',\n    'value'  => 'decimal:15',\n    'status' => 'boolean',\n];\n"})}),"\n",(0,l.jsx)(n.h3,{id:"traits-used",children:"Traits Used"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"HasFactory"})," - Factory support for testing"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"HasBooleanStatus"})," - Status management helpers"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"HasTranslation"})," - Translation support"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"translatable-fields",children:"Translatable Fields"}),"\n",(0,l.jsx)(n.p,{children:"The Unit model supports translations for:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"protected array $translatables = [\n    'name',        // Unit name (e.g., \"Kilogram\")\n    'code',        // Unit code/symbol (e.g., \"kg\")\n    'position',    // Symbol position (\"left\" or \"right\")\n    'description', // Optional description\n];\n"})}),"\n",(0,l.jsx)(n.h3,{id:"relationships",children:"Relationships"}),"\n",(0,l.jsx)(n.h4,{id:"unitrelations",children:"unitRelations"}),"\n",(0,l.jsx)(n.p,{children:"Get all polymorphic relations where this unit is used:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"public function unitRelations(): HasMany\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Returns:"})," ",(0,l.jsx)(n.code,{children:"HasMany"})," relationship to ",(0,l.jsx)(n.code,{children:"UnitRelation"})," model"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"$unit = Unit::find(1);\n\n// Get all places where this unit is used\n$relations = $unit->unitRelations;\n\nforeach ($relations as $relation) {\n    echo $relation->unitable_type; // 'App\\Models\\Product'\n    echo $relation->unitable_id;   // 42\n    echo $relation->value;         // 2.5\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"query-scopes",children:"Query Scopes"}),"\n",(0,l.jsx)(n.h4,{id:"oftype",children:"ofType"}),"\n",(0,l.jsx)(n.p,{children:"Filter units by type:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"$weightUnits = Unit::ofType('weight')->get();\n$lengthUnits = Unit::ofType('length')->get();\n"})}),"\n",(0,l.jsx)(n.h3,{id:"example-usage",children:"Example Usage"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"use JobMetric\\UnitConverter\\Models\\Unit;\n\n// Find a unit\n$kilogram = Unit::where('type', 'weight')\n    ->whereHas('translations', function ($query) {\n        $query->where('field', 'code')\n              ->where('value', 'kg');\n    })\n    ->first();\n\n// Get unit with translations\n$unit = Unit::with('translations')->find(1);\n\n// Check if unit is active\nif ($unit->status) {\n    // Unit is enabled\n}\n\n// Get translation\n$name = $unit->translations\n    ->where('locale', 'en')\n    ->where('field', 'name')\n    ->first()?->value;\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"unitrelation-model",children:"UnitRelation Model"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"UnitRelation"})," model represents the polymorphic relationship between units and any Eloquent model."]}),"\n",(0,l.jsx)(n.h3,{id:"namespace-1",children:"Namespace"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"JobMetric\\UnitConverter\\Models\\UnitRelation\n"})}),"\n",(0,l.jsx)(n.h3,{id:"table-structure-1",children:"Table Structure"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Column"}),(0,l.jsx)(n.th,{children:"Type"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"unit_id"})}),(0,l.jsx)(n.td,{children:"bigint"}),(0,l.jsx)(n.td,{children:"Foreign key to units table"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"unitable_type"})}),(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"Model class name"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"unitable_id"})}),(0,l.jsx)(n.td,{children:"bigint"}),(0,l.jsx)(n.td,{children:"Model ID"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"type"})}),(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"Unit key (e.g., weight, width)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"value"})}),(0,l.jsx)(n.td,{children:"decimal(15,8)"}),(0,l.jsx)(n.td,{children:"Value in the specified unit"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"created_at"})}),(0,l.jsx)(n.td,{children:"timestamp"}),(0,l.jsx)(n.td,{children:"Creation timestamp"})]})]})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Note:"})," This model extends ",(0,l.jsx)(n.code,{children:"Pivot"})," and does not have an ",(0,l.jsx)(n.code,{children:"updated_at"})," column."]}),"\n",(0,l.jsx)(n.h3,{id:"properties-1",children:"Properties"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"/**\n * @property int $unit_id            The attached unit identifier.\n * @property string $unitable_type   The class name of the related model.\n * @property int $unitable_id        The ID of the related model instance.\n * @property string $type            The unit key (weight, length, etc.).\n * @property float $value            The value stored in the attached unit.\n * @property Carbon $created_at      Creation timestamp.\n */\n"})}),"\n",(0,l.jsx)(n.h3,{id:"fillable-attributes-1",children:"Fillable Attributes"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"protected $fillable = [\n    'unit_id',\n    'unitable_type',\n    'unitable_id',\n    'type',\n    'value',\n    'created_at',\n];\n"})}),"\n",(0,l.jsx)(n.h3,{id:"casts-1",children:"Casts"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"protected $casts = [\n    'unit_id'       => 'integer',\n    'unitable_type' => 'string',\n    'unitable_id'   => 'integer',\n    'type'          => 'string',\n    'value'         => 'float',\n    'created_at'    => 'datetime',\n];\n"})}),"\n",(0,l.jsx)(n.h3,{id:"relationships-1",children:"Relationships"}),"\n",(0,l.jsx)(n.h4,{id:"unit",children:"unit"}),"\n",(0,l.jsx)(n.p,{children:"Get the associated Unit model:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"public function unit(): BelongsTo\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"$relation = UnitRelation::first();\n$unit = $relation->unit;\n\necho $unit->type;  // 'weight'\necho $unit->value; // 1000\n"})}),"\n",(0,l.jsx)(n.h4,{id:"unitable",children:"unitable"}),"\n",(0,l.jsx)(n.p,{children:"Get the polymorphic parent model:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"public function unitable(): MorphTo\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"$relation = UnitRelation::first();\n$model = $relation->unitable;\n\n// $model could be Product, Order, etc.\necho get_class($model); // 'App\\Models\\Product'\n"})}),"\n",(0,l.jsx)(n.h3,{id:"query-scopes-1",children:"Query Scopes"}),"\n",(0,l.jsx)(n.h4,{id:"oftype-1",children:"ofType"}),"\n",(0,l.jsx)(n.p,{children:"Filter relations by unit key:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"$weightRelations = UnitRelation::ofType('weight')->get();\n"})}),"\n",(0,l.jsx)(n.h3,{id:"accessor-unitable_resource",children:"Accessor: unitable_resource"}),"\n",(0,l.jsx)(n.p,{children:"Get a resource representation of the related model:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"$relation = UnitRelation::first();\n$resource = $relation->unitable_resource;\n"})}),"\n",(0,l.jsx)(n.h3,{id:"example-usage-1",children:"Example Usage"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"use JobMetric\\UnitConverter\\Models\\UnitRelation;\n\n// Find all relations for a specific model\n$relations = UnitRelation::where('unitable_type', Product::class)\n    ->where('unitable_id', 42)\n    ->with('unit.translations')\n    ->get();\n\n// Find all models using a specific unit\n$productsUsingKg = UnitRelation::where('unit_id', $kilogramId)\n    ->where('unitable_type', Product::class)\n    ->get();\n\n// Get all weight values across all models\n$weights = UnitRelation::ofType('weight')\n    ->with('unit', 'unitable')\n    ->get();\n\n// Calculate total weight\n$totalWeight = UnitRelation::ofType('weight')\n    ->where('unit_id', $gramId)\n    ->sum('value');\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,l.jsxs)(n.p,{children:["Both models use configurable table names from ",(0,l.jsx)(n.code,{children:"config/unit-converter.php"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"return [\n    'tables' => [\n        'unit' => 'units',\n        'unit_relation' => 'unit_relations',\n    ],\n];\n"})}),"\n",(0,l.jsx)(n.p,{children:"To customize table names:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"// config/unit-converter.php\nreturn [\n    'tables' => [\n        'unit' => 'custom_units',\n        'unit_relation' => 'custom_unit_relations',\n    ],\n];\n"})}),"\n",(0,l.jsx)(n.p,{children:"The models automatically use these config values:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"public function getTable(): string\n{\n    return config('unit-converter.tables.unit', parent::getTable());\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);