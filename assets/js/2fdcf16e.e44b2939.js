"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[5156],{3095(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"laravel-reaction/deep-diving/models/reaction","title":"Reaction Model","description":"The Reaction model represents a user\'s or device\'s reaction (like, dislike, love, etc.) on any reactable model. This model supports polymorphic relations for both the reacting entity (reactor) and the target entity (reactable).","source":"@site/packages/laravel-reaction/deep-diving/models/reaction.md","sourceDirName":"laravel-reaction/deep-diving/models","slug":"/laravel-reaction/deep-diving/models/reaction","permalink":"/packages/laravel-reaction/deep-diving/models/reaction","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-reaction/deep-diving/models/reaction.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"Reaction"},"sidebar":"packagesSidebar","previous":{"title":"CanReact","permalink":"/packages/laravel-reaction/deep-diving/can-react"},"next":{"title":"Events","permalink":"/packages/laravel-reaction/deep-diving/events"}}');var a=i(74848),l=i(28453),t=i(28774);const c={sidebar_position:1,sidebar_label:"Reaction"},s="Reaction Model",o={},d=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Properties",id:"properties",level:2},{value:"Reactor Type",id:"reactor-type",level:3},{value:"Reactor ID",id:"reactor-id",level:3},{value:"Reactable Type",id:"reactable-type",level:3},{value:"Reactable ID",id:"reactable-id",level:3},{value:"Reaction",id:"reaction",level:3},{value:"IP",id:"ip",level:3},{value:"Device ID",id:"device-id",level:3},{value:"Source",id:"source",level:3},{value:"Relationships",id:"relationships",level:2},{value:"Reactor",id:"reactor",level:3},{value:"Reactable",id:"reactable",level:3},{value:"Query Scopes",id:"query-scopes",level:2},{value:"Of Reactor",id:"of-reactor",level:3},{value:"Of Reactable",id:"of-reactable",level:3},{value:"Soft Deletes",id:"soft-deletes",level:2},{value:"Pruning",id:"pruning",level:2},{value:"Table Configuration",id:"table-configuration",level:2},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Querying Reactions",id:"querying-reactions",level:3},{value:"Working with Soft Deletes",id:"working-with-soft-deletes",level:3},{value:"When to Use Reaction Model",id:"when-to-use-reaction-model",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"reaction-model",children:"Reaction Model"})}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"Reaction"})," model represents a user's or device's reaction (like, dislike, love, etc.) on any reactable model. This model supports polymorphic relations for both the reacting entity (reactor) and the target entity (reactable)."]}),"\n",(0,a.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"JobMetric\\Reaction\\Models\\Reaction\n"})}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"Reaction"})," model stores all reactions in the application. It uses polymorphic relationships to work with any Eloquent model, supports soft deletes, and includes automatic pruning capabilities."]}),"\n",(0,a.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,a.jsx)(n.h3,{id:"reactor-type",children:"Reactor Type"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"public string|null $reactor_type;\n"})}),"\n",(0,a.jsx)(n.p,{children:"The class name of the reacting user (polymorphic). Can be null for anonymous reactions."}),"\n",(0,a.jsx)(n.h3,{id:"reactor-id",children:"Reactor ID"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"public int|null $reactor_id;\n"})}),"\n",(0,a.jsx)(n.p,{children:"The ID of the reacting user (polymorphic). Can be null for anonymous reactions."}),"\n",(0,a.jsx)(n.h3,{id:"reactable-type",children:"Reactable Type"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"public string $reactable_type;\n"})}),"\n",(0,a.jsx)(n.p,{children:"The class name of the target model being reacted to."}),"\n",(0,a.jsx)(n.h3,{id:"reactable-id",children:"Reactable ID"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"public int $reactable_id;\n"})}),"\n",(0,a.jsx)(n.p,{children:"The ID of the target model being reacted to."}),"\n",(0,a.jsx)(n.h3,{id:"reaction",children:"Reaction"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"public string $reaction;\n"})}),"\n",(0,a.jsx)(n.p,{children:"The type of reaction (e.g., 'like', 'dislike', 'love', 'angry', 'sad')."}),"\n",(0,a.jsx)(n.h3,{id:"ip",children:"IP"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"public string|null $ip;\n"})}),"\n",(0,a.jsx)(n.p,{children:"The IP address from which the reaction was made."}),"\n",(0,a.jsx)(n.h3,{id:"device-id",children:"Device ID"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"public string|null $device_id;\n"})}),"\n",(0,a.jsx)(n.p,{children:"Optional device identifier for anonymous reactions."}),"\n",(0,a.jsx)(n.h3,{id:"source",children:"Source"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"public string|null $source;\n"})}),"\n",(0,a.jsx)(n.p,{children:"Optional source indicator (e.g., 'web', 'app', 'api')."}),"\n",(0,a.jsx)(n.h2,{id:"relationships",children:"Relationships"}),"\n",(0,a.jsx)(n.h3,{id:"reactor",children:"Reactor"}),"\n",(0,a.jsx)(n.p,{children:"Get the model that made the reaction:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$reaction->reactor; // User, Admin, etc. or null\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Returns:"})," ",(0,a.jsx)(n.code,{children:"Model|null"})," - The reactor model or null for anonymous reactions"]}),"\n",(0,a.jsx)(n.h3,{id:"reactable",children:"Reactable"}),"\n",(0,a.jsx)(n.p,{children:"Get the model that was reacted to:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$reaction->reactable; // Article, Post, Comment, etc.\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Returns:"})," ",(0,a.jsx)(n.code,{children:"Model"})," - The reactable model"]}),"\n",(0,a.jsx)(n.h2,{id:"query-scopes",children:"Query Scopes"}),"\n",(0,a.jsx)(n.h3,{id:"of-reactor",children:"Of Reactor"}),"\n",(0,a.jsx)(n.p,{children:"Filter reactions by reactor:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"Reaction::ofReactor($user)->get();\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"$reactor"})," (",(0,a.jsx)(n.code,{children:"Model"}),"): The reactor model"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Returns:"})," ",(0,a.jsx)(n.code,{children:"Builder"})," - Query builder"]}),"\n",(0,a.jsx)(n.h3,{id:"of-reactable",children:"Of Reactable"}),"\n",(0,a.jsx)(n.p,{children:"Filter reactions by reactable:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"Reaction::ofReactable($article)->get();\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"$reactable"})," (",(0,a.jsx)(n.code,{children:"Model"}),"): The reactable model"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Returns:"})," ",(0,a.jsx)(n.code,{children:"Builder"})," - Query builder"]}),"\n",(0,a.jsx)(n.h2,{id:"soft-deletes",children:"Soft Deletes"}),"\n",(0,a.jsx)(n.p,{children:"The model uses soft deletes:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$reaction->delete(); // Soft delete\n$reaction->restore(); // Restore\n$reaction->forceDelete(); // Permanent delete\n"})}),"\n",(0,a.jsx)(n.h2,{id:"pruning",children:"Pruning"}),"\n",(0,a.jsx)(n.p,{children:"The model supports automatic pruning of old soft-deleted reactions:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"// Configure in config/reaction.php\n'reaction' => [\n    'prune_days' => 30, // Days to keep soft-deleted reactions\n],\n\n// Run pruning\nphp artisan model:prune\n"})}),"\n",(0,a.jsx)(n.h2,{id:"table-configuration",children:"Table Configuration"}),"\n",(0,a.jsxs)(n.p,{children:["The table name can be configured in ",(0,a.jsx)(n.code,{children:"config/reaction.php"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"'tables' => [\n    'reaction' => 'reactions', // Default table name\n],\n"})}),"\n",(0,a.jsx)(n.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,a.jsx)(n.h3,{id:"querying-reactions",children:"Querying Reactions"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"use JobMetric\\Reaction\\Models\\Reaction;\n\n// Get all reactions\n$reactions = Reaction::all();\n\n// Get reactions by type\n$likes = Reaction::where('reaction', 'like')->get();\n\n// Get reactions for a specific article\n$article = Article::find(1);\n$reactions = Reaction::ofReactable($article)->get();\n\n// Get reactions from a specific user\n$user = User::find(1);\n$reactions = Reaction::ofReactor($user)->get();\n\n// Get reactions with reactor and reactable\n$reactions = Reaction::with(['reactor', 'reactable'])->get();\n"})}),"\n",(0,a.jsx)(n.h3,{id:"working-with-soft-deletes",children:"Working with Soft Deletes"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$reaction = Reaction::find(1);\n\n// Soft delete\n$reaction->delete();\n\n// Restore\n$reaction->restore();\n\n// Check if trashed\nif ($reaction->trashed()) {\n    // Reaction is soft-deleted\n}\n\n// Get only trashed\n$trashed = Reaction::onlyTrashed()->get();\n\n// Get with trashed\n$all = Reaction::withTrashed()->get();\n"})}),"\n",(0,a.jsx)(n.h2,{id:"when-to-use-reaction-model",children:"When to Use Reaction Model"}),"\n",(0,a.jsxs)(n.p,{children:["Use the ",(0,a.jsx)(n.code,{children:"Reaction"})," model directly when you need to:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Direct Queries"}),": Query reactions directly without going through relationships"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Bulk Operations"}),": Perform bulk operations on reactions"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Analytics"}),": Analyze reaction data across the application"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Custom Logic"}),": Implement custom reaction-related logic"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Reporting"}),": Generate reports on reaction activity"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(t.A,{to:"/packages/laravel-reaction/deep-diving/has-reaction",children:"HasReaction"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(t.A,{to:"/packages/laravel-reaction/deep-diving/can-react",children:"CanReact"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(t.A,{to:"/packages/laravel-reaction/deep-diving/events",children:"Events"}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},28453(e,n,i){i.d(n,{R:()=>t,x:()=>c});var r=i(96540);const a={},l=r.createContext(a);function t(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);