"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[584],{6171(e,a,t){t.r(a),t.d(a,{assets:()=>u,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"laravel-metadata/deep-diving/rules/metadata-value-exist-rule","title":"MetadataValueExistRule","description":"The MetadataValueExistRule is a validation rule that checks if a metadata value already exists for a specific model class and metadata key. Useful for ensuring unique metadata values.","source":"@site/packages/laravel-metadata/deep-diving/rules/metadata-value-exist-rule.md","sourceDirName":"laravel-metadata/deep-diving/rules","slug":"/laravel-metadata/deep-diving/rules/metadata-value-exist-rule","permalink":"/packages/laravel-metadata/deep-diving/rules/metadata-value-exist-rule","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-metadata/deep-diving/rules/metadata-value-exist-rule.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"MetadataValueExistRule"},"sidebar":"packagesSidebar","previous":{"title":"Metadata Events","permalink":"/packages/laravel-metadata/deep-diving/events/metadata-events"}}');var l=t(4848),n=t(8453),i=t(8774);const r={sidebar_position:1,sidebar_label:"MetadataValueExistRule"},d="MetadataValueExistRule",u={},c=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"In Form Request",id:"in-form-request",level:3},{value:"In Controller",id:"in-controller",level:3},{value:"Constructor",id:"constructor",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Unique Product Slug",id:"unique-product-slug",level:3},{value:"Unique User Code",id:"unique-user-code",level:3},{value:"Custom Error Message",id:"custom-error-message",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function o(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.header,{children:(0,l.jsx)(a.h1,{id:"metadatavalueexistrule",children:"MetadataValueExistRule"})}),"\n",(0,l.jsxs)(a.p,{children:["The ",(0,l.jsx)(a.code,{children:"MetadataValueExistRule"})," is a validation rule that checks if a metadata value already exists for a specific model class and metadata key. Useful for ensuring unique metadata values."]}),"\n",(0,l.jsx)(a.h2,{id:"namespace",children:"Namespace"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-php",children:"JobMetric\\Metadata\\Rules\\MetadataValueExistRule\n"})}),"\n",(0,l.jsx)(a.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(a.p,{children:"This validation rule verifies that a given metadata value does not already exist for a specific model class and key combination. It's useful for ensuring unique values in metadata, such as unique slugs or codes."}),"\n",(0,l.jsx)(a.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,l.jsx)(a.h3,{id:"in-form-request",children:"In Form Request"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-php",children:"namespace App\\Http\\Requests;\n\nuse Illuminate\\Foundation\\Http\\FormRequest;\nuse JobMetric\\Metadata\\Rules\\MetadataValueExistRule;\n\nclass StoreProductRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        return [\n            'slug' => [\n                'required',\n                'string',\n                new MetadataValueExistRule(Product::class, 'slug'),\n            ],\n        ];\n    }\n}\n"})}),"\n",(0,l.jsx)(a.h3,{id:"in-controller",children:"In Controller"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-php",children:"use JobMetric\\Metadata\\Rules\\MetadataValueExistRule;\n\n$request->validate([\n    'code' => [\n        'required',\n        new MetadataValueExistRule(Product::class, 'code'),\n    ],\n]);\n"})}),"\n",(0,l.jsx)(a.h2,{id:"constructor",children:"Constructor"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-php",children:"public function __construct(string $class_name, string $key)\n"})}),"\n",(0,l.jsx)(a.p,{children:(0,l.jsx)(a.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(a.ul,{children:["\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.code,{children:"string $class_name"})," - The fully-qualified model class name"]}),"\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.code,{children:"string $key"})," - The metadata key to check"]}),"\n"]}),"\n",(0,l.jsx)(a.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,l.jsx)(a.p,{children:"The rule:"}),"\n",(0,l.jsxs)(a.ol,{children:["\n",(0,l.jsx)(a.li,{children:"Checks if the value already exists in the metadata table"}),"\n",(0,l.jsx)(a.li,{children:"Filters by the specified model class (metaable_type)"}),"\n",(0,l.jsx)(a.li,{children:"Filters by the specified metadata key"}),"\n",(0,l.jsxs)(a.li,{children:["Returns ",(0,l.jsx)(a.code,{children:"true"})," if the value does NOT exist (validation passes)"]}),"\n",(0,l.jsxs)(a.li,{children:["Returns ",(0,l.jsx)(a.code,{children:"false"})," if the value exists (validation fails)"]}),"\n"]}),"\n",(0,l.jsx)(a.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,l.jsx)(a.h3,{id:"unique-product-slug",children:"Unique Product Slug"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-php",children:"use JobMetric\\Metadata\\Rules\\MetadataValueExistRule;\n\n$request->validate([\n    'slug' => [\n        'required',\n        'string',\n        'max:255',\n        new MetadataValueExistRule(Product::class, 'slug'),\n    ],\n]);\n"})}),"\n",(0,l.jsx)(a.h3,{id:"unique-user-code",children:"Unique User Code"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-php",children:"$request->validate([\n    'user_code' => [\n        'required',\n        'string',\n        new MetadataValueExistRule(User::class, 'user_code'),\n    ],\n]);\n"})}),"\n",(0,l.jsx)(a.h3,{id:"custom-error-message",children:"Custom Error Message"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-php",children:"$validator = Validator::make($data, [\n    'slug' => new MetadataValueExistRule(Product::class, 'slug'),\n], [\n    'slug' => 'This slug is already taken.',\n]);\n"})}),"\n",(0,l.jsx)(a.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,l.jsxs)(a.ul,{children:["\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsx)(i.A,{to:"/packages/laravel-metadata/deep-diving/has-meta",children:"HasMeta Trait"}),"\n"]}),"\n",(0,l.jsxs)(a.li,{children:["\n",(0,l.jsx)(i.A,{to:"/packages/laravel-metadata/deep-diving/models/meta",children:"Meta Model"}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:a}={...(0,n.R)(),...e.components};return a?(0,l.jsx)(a,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453(e,a,t){t.d(a,{R:()=>i,x:()=>r});var s=t(6540);const l={},n=s.createContext(l);function i(e){const a=s.useContext(n);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),s.createElement(n.Provider,{value:a},e.children)}}}]);