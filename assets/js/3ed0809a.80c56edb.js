"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[4985],{4662(e,s,n){n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"laravel-event-system/deep-diving/rules/class-exist-rule","title":"ClassExistRule","description":"The ClassExistRule is a custom validation rule that ensures a given string value is a valid, existing PHP class. It\'s used to validate event and listener class names when registering event-listener bindings in the Event System.","source":"@site/packages/laravel-event-system/deep-diving/rules/class-exist-rule.md","sourceDirName":"laravel-event-system/deep-diving/rules","slug":"/laravel-event-system/deep-diving/rules/class-exist-rule","permalink":"/packages/laravel-event-system/deep-diving/rules/class-exist-rule","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-event-system/deep-diving/rules/class-exist-rule.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"sidebar_label":"ClassExistRule"},"sidebar":"packagesSidebar","previous":{"title":"EventSystemResource","permalink":"/packages/laravel-event-system/deep-diving/resources/event-system-resource"},"next":{"title":"EventBus","permalink":"/packages/laravel-event-system/deep-diving/support/event-bus"}}');var t=n(4848),l=n(8453);const r={sidebar_position:5,sidebar_label:"ClassExistRule"},a="ClassExistRule",d={},c=[{value:"When to Use ClassExistRule",id:"when-to-use-classexistrule",level:2},{value:"Overview",id:"overview",level:2},{value:"Namespace",id:"namespace",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Validation Behavior",id:"validation-behavior",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"In Form Request",id:"in-form-request",level:3},{value:"Custom Validation",id:"custom-validation",level:3},{value:"With StoreEventSystemRequest",id:"with-storeeventsystemrequest",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"classexistrule",children:"ClassExistRule"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"ClassExistRule"})," is a custom validation rule that ensures a given string value is a valid, existing PHP class. It's used to validate event and listener class names when registering event-listener bindings in the Event System."]}),"\n",(0,t.jsx)(s.h2,{id:"when-to-use-classexistrule",children:"When to Use ClassExistRule"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.strong,{children:["Use ",(0,t.jsx)(s.code,{children:"ClassExistRule"})," when you need:"]})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Class validation"}),": Ensure class names exist before using them"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Event validation"}),": Validate event class names in form requests"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Listener validation"}),": Validate listener class names in form requests"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Dynamic class loading"}),": Prevent errors when loading classes dynamically"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Type safety"}),": Ensure only valid class names are accepted"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Example scenarios:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Validating event class names in API requests"}),"\n",(0,t.jsx)(s.li,{children:"Validating listener class names in admin forms"}),"\n",(0,t.jsx)(s.li,{children:"Import/export functionality with class validation"}),"\n",(0,t.jsx)(s.li,{children:"Dynamic event registration with validation"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"ClassExistRule"})," validates that:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"The value is a string"}),"\n",(0,t.jsx)(s.li,{children:"The string represents an existing PHP class"}),"\n",(0,t.jsx)(s.li,{children:"The class can be loaded by PHP's autoloader"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"namespace",children:"Namespace"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"JobMetric\\EventSystem\\Rules\\ClassExistRule\n"})}),"\n",(0,t.jsx)(s.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,t.jsx)(s.p,{children:"Use in form requests or validation:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\n// In form request\npublic function rules(): array\n{\n    return [\n        'event' => ['required', 'string', new ClassExistRule],\n        'listener' => ['required', 'string', new ClassExistRule],\n    ];\n}\n\n// In validation\n$validator = Validator::make($data, [\n    'event' => ['required', 'string', new ClassExistRule],\n]);\n"})}),"\n",(0,t.jsx)(s.h2,{id:"validation-behavior",children:"Validation Behavior"}),"\n",(0,t.jsx)(s.p,{children:"The rule:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Checks if the value is a string"}),"\n",(0,t.jsxs)(s.li,{children:["Uses ",(0,t.jsx)(s.code,{children:"class_exists()"})," to verify the class exists"]}),"\n",(0,t.jsx)(s.li,{children:"Returns a translated error message if validation fails"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Error Message:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"trans('event-system::base.validation.class_exist', [\n    'class' => $value\n])\n"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Translation Key:"})," ",(0,t.jsx)(s.code,{children:"event-system::base.validation.class_exist"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Default Message:"})," ",(0,t.jsx)(s.code,{children:'"The class :class does not exist."'})]}),"\n",(0,t.jsx)(s.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,t.jsx)(s.h3,{id:"in-form-request",children:"In Form Request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"namespace App\\Http\\Requests;\n\nuse Illuminate\\Foundation\\Http\\FormRequest;\nuse JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\nclass StoreEventRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        return [\n            'name' => 'required|string|max:255|unique:events,name',\n            'description' => 'nullable|string',\n            'event' => [\n                'required',\n                'string',\n                new ClassExistRule\n            ],\n            'listener' => [\n                'required',\n                'string',\n                new ClassExistRule\n            ],\n            'priority' => 'nullable|integer',\n            'status' => 'boolean',\n        ];\n    }\n}\n"})}),"\n",(0,t.jsx)(s.h3,{id:"custom-validation",children:"Custom Validation"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"use Illuminate\\Support\\Facades\\Validator;\nuse JobMetric\\EventSystem\\Rules\\ClassExistRule;\n\n$data = [\n    'event' => 'App\\Events\\UserCreated',\n    'listener' => 'App\\Listeners\\SendWelcomeEmail',\n];\n\n$validator = Validator::make($data, [\n    'event' => ['required', 'string', new ClassExistRule],\n    'listener' => ['required', 'string', new ClassExistRule],\n]);\n\nif ($validator->fails()) {\n    $errors = $validator->errors();\n    // Handle validation errors\n}\n"})}),"\n",(0,t.jsx)(s.h3,{id:"with-storeeventsystemrequest",children:"With StoreEventSystemRequest"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"StoreEventSystemRequest"})," already uses this rule:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Http\\Requests\\StoreEventSystemRequest;\n\n// The request automatically validates classes\n$dto = dto([\n    'name' => 'user.created',\n    'event' => 'App\\Events\\UserCreated',      // Validated\n    'listener' => 'App\\Listeners\\SendWelcomeEmail', // Validated\n], StoreEventSystemRequest::class);\n"})}),"\n",(0,t.jsx)(s.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(s.p,{children:"When validation fails, the rule returns a translated error:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n    "errors": {\n        "event": ["The class App\\\\Events\\\\NonExistentEvent does not exist."]\n    }\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Use in Form Requests"}),": Always use in form requests for HTTP validation"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Validate Before Use"}),": Validate class names before dynamically loading them"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Provide Clear Errors"}),": Ensure error messages are user-friendly"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Check Autoloading"}),": Make sure classes are autoloadable (PSR-4)"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/packages/laravel-event-system/deep-diving/requests/store-event-system-request",children:"StoreEventSystemRequest"})," - Form request using this rule"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/packages/laravel-event-system/deep-diving/event-system",children:"EventSystem"})," - Service for managing event bindings"]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453(e,s,n){n.d(s,{R:()=>r,x:()=>a});var i=n(6540);const t={},l=i.createContext(t);function r(e){const s=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);