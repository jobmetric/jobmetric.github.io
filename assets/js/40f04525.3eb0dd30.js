"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[8559],{18232(e,d,r){r.r(d),r.d(d,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"laravel-location/deep-diving/resources/address-resource","title":"AddressResource","description":"JSON resource class for transforming Address models into structured API responses. It can optionally include related geography (country/province/city/district) and versioning information (parent/child/history).","source":"@site/packages/laravel-location/deep-diving/resources/address-resource.md","sourceDirName":"laravel-location/deep-diving/resources","slug":"/laravel-location/deep-diving/resources/address-resource","permalink":"/packages/laravel-location/deep-diving/resources/address-resource","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-location/deep-diving/resources/address-resource.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"sidebar_label":"AddressResource"},"sidebar":"packagesSidebar","previous":{"title":"GeoAreaResource","permalink":"/packages/laravel-location/deep-diving/resources/geo-area-resource"},"next":{"title":"location:generate-countries","permalink":"/packages/laravel-location/deep-diving/commands/generate-countries-data"}}');var n=r(74848),i=r(28453);const c={sidebar_position:7,sidebar_label:"AddressResource"},t="AddressResource",l={},o=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Base Properties",id:"base-properties",level:2},{value:"Conditional Properties",id:"conditional-properties",level:2},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Basic usage",id:"basic-usage",level:3},{value:"With geography relations",id:"with-geography-relations",level:3},{value:"With versioning chain (parent/child/history)",id:"with-versioning-chain-parentchildhistory",level:3},{value:"Response Example (simplified)",id:"response-example-simplified",level:2}];function a(e){const d={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.header,{children:(0,n.jsx)(d.h1,{id:"addressresource",children:"AddressResource"})}),"\n",(0,n.jsx)(d.p,{children:"JSON resource class for transforming Address models into structured API responses. It can optionally include related geography (country/province/city/district) and versioning information (parent/child/history)."}),"\n",(0,n.jsx)(d.h2,{id:"namespace",children:"Namespace"}),"\n",(0,n.jsx)(d.p,{children:(0,n.jsx)(d.code,{children:"JobMetric\\Location\\Http\\Resources\\AddressResource"})}),"\n",(0,n.jsx)(d.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsxs)(d.p,{children:["This resource is typically used when you need to expose an Address entity for an owner model (polymorphic), including normalized location relations and the resolved address fields such as ",(0,n.jsx)(d.code,{children:"full_address"})," and ",(0,n.jsx)(d.code,{children:"address_for_letter"}),"."]}),"\n",(0,n.jsx)(d.h2,{id:"base-properties",children:"Base Properties"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Property"}),(0,n.jsx)(d.th,{children:"Type"}),(0,n.jsx)(d.th,{children:"Description"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"id"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"int"})}),(0,n.jsx)(d.td,{children:"Address ID"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"parent_id"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"int|null"})}),(0,n.jsx)(d.td,{children:"Previous version ID (when address is versioned)"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"owner_type"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"string"})}),(0,n.jsx)(d.td,{children:"Polymorphic owner type (FQCN)"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"owner_id"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"int"})}),(0,n.jsx)(d.td,{children:"Polymorphic owner id"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"address"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"object|null"})}),(0,n.jsx)(d.td,{children:"Structured address payload (as stored)"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"postcode"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"string|null"})}),(0,n.jsx)(d.td,{children:"Postal code"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"lat"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"string|null"})}),(0,n.jsx)(d.td,{children:"Latitude"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"lng"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"string|null"})}),(0,n.jsx)(d.td,{children:"Longitude"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"info"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"array|null"})}),(0,n.jsx)(d.td,{children:"Additional info payload"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"full_address"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"string"})}),(0,n.jsx)(d.td,{children:"Human readable full address"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"address_for_letter"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"string"})}),(0,n.jsx)(d.td,{children:"Address formatted for letter/printing"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"owner"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"mixed"})}),(0,n.jsxs)(d.td,{children:["Owner representation (via ",(0,n.jsx)(d.code,{children:"owner_resource"})," accessor on the model)"]})]})]})]}),"\n",(0,n.jsx)(d.h2,{id:"conditional-properties",children:"Conditional Properties"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Property"}),(0,n.jsx)(d.th,{children:"Condition"}),(0,n.jsx)(d.th,{children:"Type"}),(0,n.jsx)(d.th,{children:"Notes"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"country"})}),(0,n.jsxs)(d.td,{children:[(0,n.jsx)(d.code,{children:"country"})," loaded"]}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"CountryResource"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"whenLoaded('country')"})})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"province"})}),(0,n.jsxs)(d.td,{children:[(0,n.jsx)(d.code,{children:"province"})," loaded"]}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"ProvinceResource"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"whenLoaded('province')"})})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"city"})}),(0,n.jsxs)(d.td,{children:[(0,n.jsx)(d.code,{children:"city"})," loaded"]}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"CityResource"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"whenLoaded('city')"})})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"district"})}),(0,n.jsxs)(d.td,{children:[(0,n.jsx)(d.code,{children:"district"})," loaded"]}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"DistrictResource"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"whenLoaded('district')"})})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"parent"})}),(0,n.jsxs)(d.td,{children:[(0,n.jsx)(d.code,{children:"parent"})," loaded"]}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"AddressResource"})}),(0,n.jsx)(d.td,{children:"Previous version"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"child"})}),(0,n.jsxs)(d.td,{children:[(0,n.jsx)(d.code,{children:"child"})," loaded"]}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"AddressResource"})}),(0,n.jsx)(d.td,{children:"Next version"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"history"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"parent_id !== null"})}),(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"array"})}),(0,n.jsxs)(d.td,{children:["Computed chain of parent addresses (oldest \u2192 newest). If ",(0,n.jsx)(d.code,{children:"parent"})," is not eager loaded, the resource will load it."]})]})]})]}),"\n",(0,n.jsx)(d.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,n.jsx)(d.h3,{id:"basic-usage",children:"Basic usage"}),"\n",(0,n.jsx)(d.pre,{children:(0,n.jsx)(d.code,{className:"language-php",children:"use JobMetric\\Location\\Http\\Resources\\AddressResource;\nuse JobMetric\\Location\\Models\\Address;\n\n$address = Address::find(10);\n\nreturn AddressResource::make($address);\n"})}),"\n",(0,n.jsx)(d.h3,{id:"with-geography-relations",children:"With geography relations"}),"\n",(0,n.jsx)(d.pre,{children:(0,n.jsx)(d.code,{className:"language-php",children:"$address = Address::with(['country', 'province', 'city', 'district'])->find(10);\n\nreturn AddressResource::make($address);\n"})}),"\n",(0,n.jsx)(d.h3,{id:"with-versioning-chain-parentchildhistory",children:"With versioning chain (parent/child/history)"}),"\n",(0,n.jsx)(d.pre,{children:(0,n.jsx)(d.code,{className:"language-php",children:"$address = Address::with(['parent.parent', 'child'])->find(10);\n\nreturn AddressResource::make($address);\n"})}),"\n",(0,n.jsx)(d.h2,{id:"response-example-simplified",children:"Response Example (simplified)"}),"\n",(0,n.jsx)(d.pre,{children:(0,n.jsx)(d.code,{className:"language-json",children:'{\n  "id": 10,\n  "parent_id": null,\n  "owner_type": "App\\\\\\\\Models\\\\\\\\User",\n  "owner_id": 1,\n  "country": { "id": 1, "name": "Iran" },\n  "province": { "id": 10, "name": "Tehran" },\n  "city": { "id": 120, "name": "Tehran" },\n  "district": { "id": 900, "name": "District 1" },\n  "address": { "street": "Valiasr St", "number": "12" },\n  "postcode": "1234567890",\n  "lat": "35.7000",\n  "lng": "51.4000",\n  "info": { "name": "John Doe", "mobile": "9120000000" },\n  "full_address": "Iran, Tehran, Tehran ...",\n  "address_for_letter": "Iran, Tehran, Tehran\\\\n...",\n  "history": [],\n  "owner": {}\n}\n'})})]})}function h(e={}){const{wrapper:d}={...(0,i.R)(),...e.components};return d?(0,n.jsx)(d,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},28453(e,d,r){r.d(d,{R:()=>c,x:()=>t});var s=r(96540);const n={},i=s.createContext(n);function c(e){const d=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function t(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),s.createElement(i.Provider,{value:d},e.children)}}}]);