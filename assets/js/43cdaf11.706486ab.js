"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[2230],{8397(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>o,frontMatter:()=>r,metadata:()=>s,toc:()=>v});const s=JSON.parse('{"id":"laravel-event-system/deep-diving/events","title":"Events","description":"Laravel Event System provides a comprehensive event system that fires events when event-listener bindings are created, updated, or deleted. These events allow you to hook into the event system lifecycle and perform additional actions when bindings change.","source":"@site/packages/laravel-event-system/deep-diving/events.md","sourceDirName":"laravel-event-system/deep-diving","slug":"/laravel-event-system/deep-diving/events","permalink":"/packages/laravel-event-system/deep-diving/events","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-event-system/deep-diving/events.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9,"sidebar_label":"Events"},"sidebar":"packagesSidebar","previous":{"title":"DomainEvent","permalink":"/packages/laravel-event-system/deep-diving/domain-event"},"next":{"title":"Laravel Env Modifier","permalink":"/packages/laravel-env-modifier/"}}');var i=t(4848),l=t(8453);const r={sidebar_position:9,sidebar_label:"Events"},d="Events",a={},v=[{value:"When to Use Events",id:"when-to-use-events",level:2},{value:"Available Events",id:"available-events",level:2},{value:"EventSystemStoredEvent",id:"eventsystemstoredevent",level:2},{value:"EventSystemDeletingEvent",id:"eventsystemdeletingevent",level:2},{value:"EventSystemDeletedEvent",id:"eventsystemdeletedevent",level:2},{value:"Registering Event Listeners",id:"registering-event-listeners",level:2},{value:"Method 1: Event Listeners in Service Provider",id:"method-1-event-listeners-in-service-provider",level:3},{value:"Method 2: Using Event Facade",id:"method-2-using-event-facade",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Example 1: Audit Logging",id:"example-1-audit-logging",level:3},{value:"Example 2: Cache Invalidation",id:"example-2-cache-invalidation",level:3},{value:"Example 3: Notification System",id:"example-3-notification-system",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"events",children:"Events"})}),"\n",(0,i.jsx)(n.p,{children:"Laravel Event System provides a comprehensive event system that fires events when event-listener bindings are created, updated, or deleted. These events allow you to hook into the event system lifecycle and perform additional actions when bindings change."}),"\n",(0,i.jsx)(n.h2,{id:"when-to-use-events",children:"When to Use Events"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Use event system events when you need:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Audit logging"}),": Track changes to event bindings for compliance"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cache invalidation"}),": Clear caches when event configurations change"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Notification systems"}),": Notify administrators of event binding changes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Integration hooks"}),": Sync event configurations with external systems"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Analytics tracking"}),": Monitor event system activity and usage"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validation"}),": Perform additional validation before deletion"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example scenarios:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Logging all event binding changes for audit purposes"}),"\n",(0,i.jsx)(n.li,{children:"Invalidating caches when event configurations are modified"}),"\n",(0,i.jsx)(n.li,{children:"Sending notifications when critical events are registered"}),"\n",(0,i.jsx)(n.li,{children:"Syncing event configurations with external systems"}),"\n",(0,i.jsx)(n.li,{children:"Tracking event system usage metrics"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"available-events",children:"Available Events"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Event"}),(0,i.jsx)(n.th,{children:"When"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"EventSystemStoredEvent"})}),(0,i.jsx)(n.td,{children:"After storing a new event-listener binding"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"EventSystemDeletingEvent"})}),(0,i.jsx)(n.td,{children:"Before deleting an event-listener binding"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"EventSystemDeletedEvent"})}),(0,i.jsx)(n.td,{children:"After deleting an event-listener binding"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"eventsystemstoredevent",children:"EventSystemStoredEvent"}),"\n",(0,i.jsx)(n.p,{children:"Fired after successfully storing a new event-listener binding."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Namespace:"})," ",(0,i.jsx)(n.code,{children:"JobMetric\\EventSystem\\Events\\EventSystemStoredEvent"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$event"})," (Event): The created event model"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$validated"})," (array): The validated input data"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"namespace App\\Listeners;\n\nuse JobMetric\\EventSystem\\Events\\EventSystemStoredEvent;\nuse Illuminate\\Support\\Facades\\Log;\n\nclass LogEventSystemStored\n{\n    public function handle(EventSystemStoredEvent $event): void\n    {\n        Log::info('Event system entry created', [\n            'name' => $event->event->name,\n            'event' => $event->event->event,\n            'listener' => $event->event->listener,\n            'priority' => $event->event->priority,\n        ]);\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"eventsystemdeletingevent",children:"EventSystemDeletingEvent"}),"\n",(0,i.jsx)(n.p,{children:"Fired before deleting an event-listener binding. Use this to perform validation or cleanup before deletion."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Namespace:"})," ",(0,i.jsx)(n.code,{children:"JobMetric\\EventSystem\\Events\\EventSystemDeletingEvent"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$event"})," (Event): The event model being deleted"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"namespace App\\Listeners;\n\nuse JobMetric\\EventSystem\\Events\\EventSystemDeletingEvent;\nuse Illuminate\\Support\\Facades\\Log;\n\nclass ValidateEventSystemDeletion\n{\n    public function handle(EventSystemDeletingEvent $event): void\n    {\n        // Prevent deletion of critical events\n        if (in_array($event->event->name, ['critical.event.1', 'critical.event.2'])) {\n            throw new \\Exception('Cannot delete critical events');\n        }\n\n        Log::info('Event system entry being deleted', [\n            'name' => $event->event->name,\n        ]);\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"eventsystemdeletedevent",children:"EventSystemDeletedEvent"}),"\n",(0,i.jsx)(n.p,{children:"Fired after successfully deleting an event-listener binding."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Namespace:"})," ",(0,i.jsx)(n.code,{children:"JobMetric\\EventSystem\\Events\\EventSystemDeletedEvent"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$event"})," (Event): The deleted event model"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"namespace App\\Listeners;\n\nuse JobMetric\\EventSystem\\Events\\EventSystemDeletedEvent;\nuse Illuminate\\Support\\Facades\\Log;\nuse Illuminate\\Support\\Facades\\Cache;\n\nclass CleanupAfterEventSystemDeletion\n{\n    public function handle(EventSystemDeletedEvent $event): void\n    {\n        // Clear related caches\n        Cache::forget(\"event_system_{$event->event->id}\");\n        Cache::forget('events');\n\n        Log::info('Event system entry deleted', [\n            'name' => $event->event->name,\n        ]);\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"registering-event-listeners",children:"Registering Event Listeners"}),"\n",(0,i.jsx)(n.h3,{id:"method-1-event-listeners-in-service-provider",children:"Method 1: Event Listeners in Service Provider"}),"\n",(0,i.jsx)(n.p,{children:"Register event listeners in a service provider:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"namespace App\\Providers;\n\nuse Illuminate\\Foundation\\Support\\Providers\\EventServiceProvider as ServiceProvider;\nuse JobMetric\\EventSystem\\Events\\EventSystemStoredEvent;\nuse JobMetric\\EventSystem\\Events\\EventSystemDeletedEvent;\nuse App\\Listeners\\LogEventSystemStored;\nuse App\\Listeners\\CleanupAfterEventSystemDeletion;\n\nclass EventServiceProvider extends ServiceProvider\n{\n    protected $listen = [\n        EventSystemStoredEvent::class => [\n            LogEventSystemStored::class,\n        ],\n        EventSystemDeletedEvent::class => [\n            CleanupAfterEventSystemDeletion::class,\n        ],\n    ];\n\n    public function boot(): void\n    {\n        parent::boot();\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"method-2-using-event-facade",children:"Method 2: Using Event Facade"}),"\n",(0,i.jsx)(n.p,{children:"Listen to events using the Event facade:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"use Illuminate\\Support\\Facades\\Event;\nuse JobMetric\\EventSystem\\Events\\EventSystemStoredEvent;\n\nEvent::listen(EventSystemStoredEvent::class, function (EventSystemStoredEvent $event) {\n    $eventModel = $event->event;\n    \n    Log::info('Event system entry created', [\n        'name' => $eventModel->name,\n        'event' => $eventModel->event,\n        'listener' => $eventModel->listener,\n    ]);\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,i.jsx)(n.h3,{id:"example-1-audit-logging",children:"Example 1: Audit Logging"}),"\n",(0,i.jsx)(n.p,{children:"Log all event system operations for audit trail:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"namespace App\\Listeners;\n\nuse JobMetric\\EventSystem\\Events\\EventSystemStoredEvent;\nuse JobMetric\\EventSystem\\Events\\EventSystemDeletedEvent;\nuse App\\Models\\AuditLog;\nuse Illuminate\\Support\\Facades\\Auth;\n\nclass AuditEventSystemOperations\n{\n    public function handleStored(EventSystemStoredEvent $event): void\n    {\n        AuditLog::create([\n            'user_id' => Auth::id(),\n            'action' => 'event_system.created',\n            'model_type' => 'event_system',\n            'model_id' => $event->event->id,\n            'data' => [\n                'name' => $event->event->name,\n                'event' => $event->event->event,\n                'listener' => $event->event->listener,\n            ],\n        ]);\n    }\n\n    public function handleDeleted(EventSystemDeletedEvent $event): void\n    {\n        AuditLog::create([\n            'user_id' => Auth::id(),\n            'action' => 'event_system.deleted',\n            'model_type' => 'event_system',\n            'model_id' => $event->event->id,\n            'data' => [\n                'name' => $event->event->name,\n            ],\n        ]);\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-2-cache-invalidation",children:"Example 2: Cache Invalidation"}),"\n",(0,i.jsx)(n.p,{children:"Invalidate caches when event configurations change:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"namespace App\\Listeners;\n\nuse JobMetric\\EventSystem\\Events\\EventSystemStoredEvent;\nuse JobMetric\\EventSystem\\Events\\EventSystemDeletedEvent;\nuse Illuminate\\Support\\Facades\\Cache;\n\nclass InvalidateEventSystemCache\n{\n    public function handleStored(EventSystemStoredEvent $event): void\n    {\n        Cache::forget('events');\n        Cache::forget(\"event_system_{$event->event->id}\");\n    }\n\n    public function handleDeleted(EventSystemDeletedEvent $event): void\n    {\n        Cache::forget('events');\n        Cache::forget(\"event_system_{$event->event->id}\");\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-3-notification-system",children:"Example 3: Notification System"}),"\n",(0,i.jsx)(n.p,{children:"Send notifications when critical events are registered:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"namespace App\\Listeners;\n\nuse JobMetric\\EventSystem\\Events\\EventSystemStoredEvent;\nuse Illuminate\\Support\\Facades\\Notification;\nuse App\\Notifications\\CriticalEventRegistered;\n\nclass NotifyCriticalEventRegistration\n{\n    public function handle(EventSystemStoredEvent $event): void\n    {\n        $criticalEvents = ['user.created', 'order.completed', 'payment.processed'];\n\n        if (in_array($event->event->name, $criticalEvents)) {\n            Notification::route('slack', config('services.slack.webhook'))\n                ->notify(new CriticalEventRegistered($event->event));\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/packages/laravel-event-system/deep-diving/event-system",children:"EventSystem"})," - Service for managing event bindings"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/packages/laravel-event-system/deep-diving/domain-event",children:"DomainEvent"})," - Domain event contract"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,t){t.d(n,{R:()=>r,x:()=>d});var s=t(6540);const i={},l=s.createContext(i);function r(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);