"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[6132],{28453(e,n,a){a.d(n,{R:()=>i,x:()=>r});var s=a(96540);const t={},l=s.createContext(t);function i(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(l.Provider,{value:n},e.children)}},36038(e,n,a){a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"laravel-language/deep-diving/date-based-on-calendar-cast","title":"DateBasedOnCalendarCast","description":"The DateBasedOnCalendarCast is an Eloquent cast that automatically converts date/datetime values between storage format (Gregorian) and display format (user\'s language calendar system). It provides seamless multi-calendar support with automatic conversion, digit transliteration, and timezone handling.","source":"@site/packages/laravel-language/deep-diving/date-based-on-calendar-cast.md","sourceDirName":"laravel-language/deep-diving","slug":"/laravel-language/deep-diving/date-based-on-calendar-cast","permalink":"/packages/laravel-language/deep-diving/date-based-on-calendar-cast","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-language/deep-diving/date-based-on-calendar-cast.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"sidebar_label":"DateBasedOnCalendarCast"},"sidebar":"packagesSidebar","previous":{"title":"Helper Functions","permalink":"/packages/laravel-language/deep-diving/support/helpers"},"next":{"title":"CalendarTypeEnum","permalink":"/packages/laravel-language/deep-diving/calendar-type-enum"}}');var t=a(74848),l=a(28453),i=a(28774);const r={sidebar_position:10,sidebar_label:"DateBasedOnCalendarCast"},d="DateBasedOnCalendarCast",c={},o=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Storage vs Display",id:"storage-vs-display",level:3},{value:"Conversion Flow",id:"conversion-flow",level:3},{value:"Getting (Reading from Database)",id:"getting-reading-from-database",level:4},{value:"Setting (Writing to Database)",id:"setting-writing-to-database",level:4},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Simple Date Cast",id:"simple-date-cast",level:3},{value:"DateTime Cast",id:"datetime-cast",level:3},{value:"Constructor Parameters",id:"constructor-parameters",level:2},{value:"Mode",id:"mode",level:3},{value:"Date Separator",id:"date-separator",level:3},{value:"Digits",id:"digits",level:3},{value:"Advanced Usage",id:"advanced-usage",level:2},{value:"Using castUsing() Method",id:"using-castusing-method",level:3},{value:"Different Configurations",id:"different-configurations",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Example 1: Event Model with Jalali Dates",id:"example-1-event-model-with-jalali-dates",level:3},{value:"Example 2: Article Model with Publication Date",id:"example-2-article-model-with-publication-date",level:3},{value:"Example 3: Appointment Model",id:"example-3-appointment-model",level:3},{value:"Example 4: Task Model with Deadlines",id:"example-4-task-model-with-deadlines",level:3},{value:"Example 5: Form Input Handling",id:"example-5-form-input-handling",level:3},{value:"Example 6: API Response",id:"example-6-api-response",level:3},{value:"Supported Input Formats",id:"supported-input-formats",level:2},{value:"Calendar Formats",id:"calendar-formats",level:3},{value:"Date Separators",id:"date-separators",level:3},{value:"Digit Formats",id:"digit-formats",level:3},{value:"DateTime Formats",id:"datetime-formats",level:3},{value:"Special Inputs",id:"special-inputs",level:3},{value:"Calendar Systems",id:"calendar-systems",level:2},{value:"Timezone Handling",id:"timezone-handling",level:2},{value:"Fallback Behavior",id:"fallback-behavior",level:2},{value:"No Language Set",id:"no-language-set",level:3},{value:"Invalid Calendar",id:"invalid-calendar",level:3},{value:"Invalid Input",id:"invalid-input",level:3},{value:"When to Use DateBasedOnCalendarCast",id:"when-to-use-datebasedoncalendarcast",level:2},{value:"Primary Use Cases",id:"primary-use-cases",level:3},{value:"1. Multi-Calendar Applications",id:"1-multi-calendar-applications",level:4},{value:"2. Localized Date Display",id:"2-localized-date-display",level:4},{value:"3. Form Input Handling",id:"3-form-input-handling",level:4},{value:"4. API Responses",id:"4-api-responses",level:4},{value:"When NOT to Use",id:"when-not-to-use",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Always Store in Gregorian",id:"1-always-store-in-gregorian",level:3},{value:"2. Use Appropriate Mode",id:"2-use-appropriate-mode",level:3},{value:"3. Configure Digits Based on Locale",id:"3-configure-digits-based-on-locale",level:3},{value:"4. Handle Null Values",id:"4-handle-null-values",level:3},{value:"Common Mistakes to Avoid",id:"common-mistakes-to-avoid",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Converter Caching",id:"converter-caching",level:3},{value:"Language Resolution",id:"language-resolution",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"datebasedoncalendarcast",children:"DateBasedOnCalendarCast"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"DateBasedOnCalendarCast"})," is an Eloquent cast that automatically converts date/datetime values between storage format (Gregorian) and display format (user's language calendar system). It provides seamless multi-calendar support with automatic conversion, digit transliteration, and timezone handling."]}),"\n",(0,t.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"JobMetric\\Language\\Casts\\DateBasedOnCalendarCast\n"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"DateBasedOnCalendarCast"})," provides:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Automatic Calendar Conversion"}),": Converts dates between Gregorian (storage) and user's calendar (display)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Multi-Calendar Support"}),": Supports Jalali, Hijri, Hebrew, Buddhist, Coptic, Ethiopian, Chinese calendars"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Digit Transliteration"}),": Automatically converts between English, Persian, and Arabic numerals"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Timezone Awareness"}),": Handles timezone conversion based on client timezone"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Flexible Formatting"}),": Configurable date separators and modes (date/datetime)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Graceful Fallbacks"}),": Falls back to Gregorian if language/calendar not available"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,t.jsx)(n.h3,{id:"storage-vs-display",children:"Storage vs Display"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Storage"}),": Always Gregorian in ",(0,t.jsx)(n.code,{children:"Y-m-d H:i:s"})," format in app timezone (typically UTC)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Display"}),": Converted to user's calendar system based on current language settings"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"conversion-flow",children:"Conversion Flow"}),"\n",(0,t.jsx)(n.h4,{id:"getting-reading-from-database",children:"Getting (Reading from Database)"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Reads Gregorian date from database"}),"\n",(0,t.jsx)(n.li,{children:"Converts to client timezone"}),"\n",(0,t.jsx)(n.li,{children:"Converts Y-m-d part to user's calendar system"}),"\n",(0,t.jsx)(n.li,{children:"Applies digit transliteration (English/Persian/Arabic)"}),"\n",(0,t.jsx)(n.li,{children:"Returns formatted string"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"setting-writing-to-database",children:"Setting (Writing to Database)"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Accepts date in user's calendar system (or Gregorian)"}),"\n",(0,t.jsx)(n.li,{children:"Transliterates digits to English"}),"\n",(0,t.jsx)(n.li,{children:"Converts from user's calendar to Gregorian"}),"\n",(0,t.jsx)(n.li,{children:"Normalizes timezone to app timezone"}),"\n",(0,t.jsxs)(n.li,{children:["Stores as ",(0,t.jsx)(n.code,{children:"Y-m-d H:i:s"})," in database"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,t.jsx)(n.h3,{id:"simple-date-cast",children:"Simple Date Cast"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"use JobMetric\\Language\\Casts\\DateBasedOnCalendarCast;\n\nclass Event extends Model\n{\n    protected $casts = [\n        'event_date' => DateBasedOnCalendarCast::class,\n    ];\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:'// Database: "2024-12-25 00:00:00" (Gregorian)\n// User\'s language: Persian (Jalali calendar)\n\n$event = Event::find(1);\necho $event->event_date; // "1403-09-05" (Jalali, Persian digits: \u06f1\u06f4\u06f0\u06f3-\u06f0\u06f9-\u06f0\u06f5)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"datetime-cast",children:"DateTime Cast"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"protected $casts = [\n    'starts_at' => DateBasedOnCalendarCast::class . ':datetime',\n];\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:'// Database: "2024-12-25 14:30:00" (Gregorian)\n// User\'s language: Persian (Jalali calendar)\n\n$event = Event::find(1);\necho $event->starts_at; // "1403-09-05 14:30:00" (Jalali with time)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"constructor-parameters",children:"Constructor Parameters"}),"\n",(0,t.jsx)(n.p,{children:"The cast accepts three optional parameters:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"new DateBasedOnCalendarCast(\n    string $mode = 'date',      // 'date' or 'datetime'\n    string $dateSep = '-',      // '-', '/', or '.'\n    string $digits = 'auto'     // 'en', 'fa', 'ar', or 'auto'\n)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"mode",children:"Mode"}),"\n",(0,t.jsx)(n.p,{children:"Controls whether the attribute handles date-only or full datetime:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"'date'"})}),": Date only (e.g., ",(0,t.jsx)(n.code,{children:'"1403-09-05"'}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"'datetime'"})}),": Date with time (e.g., ",(0,t.jsx)(n.code,{children:'"1403-09-05 14:30:00"'}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"date-separator",children:"Date Separator"}),"\n",(0,t.jsx)(n.p,{children:"Controls the separator used in formatted output:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"'-'"})}),": ",(0,t.jsx)(n.code,{children:'"1403-09-05"'})," (default)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"'/'"})}),": ",(0,t.jsx)(n.code,{children:'"1403/09/05"'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"'.'"})}),": ",(0,t.jsx)(n.code,{children:'"1403.09.05"'})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": Input accepts all separators (",(0,t.jsx)(n.code,{children:"-"}),", ",(0,t.jsx)(n.code,{children:"/"}),", ",(0,t.jsx)(n.code,{children:"."}),") regardless of this setting."]}),"\n",(0,t.jsx)(n.h3,{id:"digits",children:"Digits"}),"\n",(0,t.jsx)(n.p,{children:"Controls digit transliteration in output:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"'auto'"})}),": Automatically uses digits based on current locale (fa \u2192 Persian, ar \u2192 Arabic, else \u2192 English)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"'en'"})}),": English digits (0-9)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"'fa'"})}),": Persian digits (\u06f0-\u06f9)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"'ar'"})}),": Arabic digits (\u0660-\u0669)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"advanced-usage",children:"Advanced Usage"}),"\n",(0,t.jsx)(n.h3,{id:"using-castusing-method",children:"Using castUsing() Method"}),"\n",(0,t.jsxs)(n.p,{children:["Laravel's ",(0,t.jsx)(n.code,{children:"castUsing()"})," allows passing parameters via cast string:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"protected $casts = [\n    'event_date' => DateBasedOnCalendarCast::class . ':date,-,fa',\n    // Mode: date\n    // Separator: -\n    // Digits: fa (Persian)\n];\n"})}),"\n",(0,t.jsx)(n.h3,{id:"different-configurations",children:"Different Configurations"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"protected $casts = [\n    // Date only, slash separator, Persian digits\n    'birth_date' => DateBasedOnCalendarCast::class . ':date,/,fa',\n    \n    // DateTime, dot separator, auto digits\n    'created_at' => DateBasedOnCalendarCast::class . ':datetime,.,auto',\n    \n    // Date only, dash separator, English digits\n    'published_at' => DateBasedOnCalendarCast::class . ':date,-,en',\n];\n"})}),"\n",(0,t.jsx)(n.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,t.jsx)(n.h3,{id:"example-1-event-model-with-jalali-dates",children:"Example 1: Event Model with Jalali Dates"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// app/Models/Event.php\nuse JobMetric\\Language\\Casts\\DateBasedOnCalendarCast;\n\nclass Event extends Model\n{\n    protected $casts = [\n        'event_date' => DateBasedOnCalendarCast::class . ':date,/,fa',\n        'starts_at' => DateBasedOnCalendarCast::class . ':datetime,-,auto',\n        'ends_at' => DateBasedOnCalendarCast::class . ':datetime,-,auto',\n    ];\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Create event\n$event = Event::create([\n    'title' => 'Conference',\n    'event_date' => '1403/09/05', // Jalali date\n    'starts_at' => '1403-09-05 09:00:00', // Jalali datetime\n    'ends_at' => '1403-09-05 17:00:00', // Jalali datetime\n]);\n\n// Database stores as Gregorian:\n// event_date: \"2024-12-25 00:00:00\"\n// starts_at: \"2024-12-25 09:00:00\"\n// ends_at: \"2024-12-25 17:00:00\"\n\n// When reading (Persian user):\n$event = Event::find(1);\necho $event->event_date; // \"1403/09/05\" (Jalali, Persian digits)\necho $event->starts_at; // \"1403-09-05 09:00:00\" (Jalali, auto digits)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"example-2-article-model-with-publication-date",children:"Example 2: Article Model with Publication Date"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// app/Models/Article.php\nclass Article extends Model\n{\n    protected $casts = [\n        'published_at' => DateBasedOnCalendarCast::class . ':date,-,auto',\n    ];\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Persian user creates article\n$article = Article::create([\n    'title' => 'New Article',\n    'published_at' => '1403-09-05', // Jalali date\n]);\n\n// English user views article\n// (Language changes, but date remains in database as Gregorian)\n$article = Article::find(1);\necho $article->published_at; // \"2024-12-25\" (Gregorian, English digits)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"example-3-appointment-model",children:"Example 3: Appointment Model"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// app/Models/Appointment.php\nclass Appointment extends Model\n{\n    protected $casts = [\n        'appointment_date' => DateBasedOnCalendarCast::class . ':date,/,fa',\n        'appointment_time' => DateBasedOnCalendarCast::class . ':datetime,-,fa',\n    ];\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// User books appointment in Jalali\n$appointment = Appointment::create([\n    'doctor_id' => 1,\n    'patient_id' => 1,\n    'appointment_date' => '1403/09/05', // Jalali\n    'appointment_time' => '1403-09-05 14:30:00', // Jalali with time\n]);\n\n// Display to user\necho $appointment->appointment_date; // \"1403/09/05\" (Persian digits: \u06f1\u06f4\u06f0\u06f3/\u06f0\u06f9/\u06f0\u06f5)\necho $appointment->appointment_time; // \"1403-09-05 14:30:00\"\n"})}),"\n",(0,t.jsx)(n.h3,{id:"example-4-task-model-with-deadlines",children:"Example 4: Task Model with Deadlines"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// app/Models/Task.php\nclass Task extends Model\n{\n    protected $casts = [\n        'due_date' => DateBasedOnCalendarCast::class . ':date,-,auto',\n        'completed_at' => DateBasedOnCalendarCast::class . ':datetime,-,auto',\n    ];\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Create task\n$task = Task::create([\n    'title' => 'Complete project',\n    'due_date' => '1403-09-10', // Jalali\n]);\n\n// Complete task\n$task->update([\n    'completed_at' => now(), // Automatically converts to Gregorian for storage\n]);\n\n// Display\necho $task->due_date; // \"1403-09-10\" (in user's calendar)\necho $task->completed_at; // \"1403-09-05 15:45:00\" (in user's calendar)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"example-5-form-input-handling",children:"Example 5: Form Input Handling"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// app/Http/Controllers/EventController.php\nclass EventController extends Controller\n{\n    public function store(Request $request)\n    {\n        // User submits: \"1403/09/05\" (Jalali)\n        $event = Event::create([\n            'title' => $request->input('title'),\n            'event_date' => $request->input('event_date'), // Cast handles conversion\n        ]);\n        \n        // Database stores: \"2024-12-25 00:00:00\" (Gregorian)\n        \n        return redirect()->back();\n    }\n    \n    public function show(Event $event)\n    {\n        // Automatically displays in user's calendar\n        return view('events.show', [\n            'event' => $event, // $event->event_date is in user's calendar\n        ]);\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"example-6-api-response",children:"Example 6: API Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// app/Http/Controllers/Api/EventController.php\nclass EventController extends Controller\n{\n    public function index()\n    {\n        $events = Event::all();\n        \n        return response()->json([\n            'data' => $events->map(function ($event) {\n                return [\n                    'id' => $event->id,\n                    'title' => $event->title,\n                    'event_date' => $event->event_date, // Already in user's calendar\n                    'starts_at' => $event->starts_at, // Already in user's calendar\n                ];\n            }),\n        ]);\n    }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response (Persian user)"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "data": [\n        {\n            "id": 1,\n            "title": "Conference",\n            "event_date": "1403/09/05",\n            "starts_at": "1403-09-05 09:00:00"\n        }\n    ]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response (English user)"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "data": [\n        {\n            "id": 1,\n            "title": "Conference",\n            "event_date": "2024-12-25",\n            "starts_at": "2024-12-25 09:00:00"\n        }\n    ]\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"supported-input-formats",children:"Supported Input Formats"}),"\n",(0,t.jsx)(n.h3,{id:"calendar-formats",children:"Calendar Formats"}),"\n",(0,t.jsx)(n.p,{children:"The cast accepts dates in various calendar systems:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Gregorian"}),": ",(0,t.jsx)(n.code,{children:'"2024-12-25"'}),", ",(0,t.jsx)(n.code,{children:'"2024/12/25"'}),", ",(0,t.jsx)(n.code,{children:'"2024.12.25"'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Jalali"}),": ",(0,t.jsx)(n.code,{children:'"1403-09-05"'}),", ",(0,t.jsx)(n.code,{children:'"1403/09/05"'}),", ",(0,t.jsx)(n.code,{children:'"1403.09.05"'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Hijri"}),": ",(0,t.jsx)(n.code,{children:'"1446-06-15"'}),", ",(0,t.jsx)(n.code,{children:'"1446/06/15"'}),", ",(0,t.jsx)(n.code,{children:'"1446.06.15"'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Other calendars"}),": Hebrew, Buddhist, Coptic, Ethiopian, Chinese"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"date-separators",children:"Date Separators"}),"\n",(0,t.jsx)(n.p,{children:"All separators are accepted in input:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Dash"}),": ",(0,t.jsx)(n.code,{children:'"1403-09-05"'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Slash"}),": ",(0,t.jsx)(n.code,{children:'"1403/09/05"'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Dot"}),": ",(0,t.jsx)(n.code,{children:'"1403.09.05"'})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"digit-formats",children:"Digit Formats"}),"\n",(0,t.jsx)(n.p,{children:"Input accepts digits in any format:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"English"}),": ",(0,t.jsx)(n.code,{children:'"1403-09-05"'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Persian"}),": ",(0,t.jsx)(n.code,{children:'"\u06f1\u06f4\u06f0\u06f3-\u06f0\u06f9-\u06f0\u06f5"'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Arabic"}),": ",(0,t.jsx)(n.code,{children:'"\u0661\u0664\u0660\u0663-\u0660\u0669-\u0660\u0665"'})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"datetime-formats",children:"DateTime Formats"}),"\n",(0,t.jsx)(n.p,{children:"For datetime mode:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Date + Time"}),": ",(0,t.jsx)(n.code,{children:'"1403-09-05 14:30:00"'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Date + Time (space)"}),": ",(0,t.jsx)(n.code,{children:'"1403-09-05 14:30"'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ISO Format"}),": ",(0,t.jsx)(n.code,{children:'"2024-12-25T14:30:00Z"'})," (treated as Gregorian)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"special-inputs",children:"Special Inputs"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DateTimeInterface"}),": ",(0,t.jsx)(n.code,{children:"Carbon::now()"}),", ",(0,t.jsx)(n.code,{children:"new DateTime()"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Unix Timestamp"}),": ",(0,t.jsx)(n.code,{children:"1703520000"})," (integer or string)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Null"}),": Returns ",(0,t.jsx)(n.code,{children:"null"})," (handles gracefully)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"calendar-systems",children:"Calendar Systems"}),"\n",(0,t.jsxs)(n.p,{children:["The cast supports all calendar types from ",(0,t.jsx)(n.code,{children:"CalendarTypeEnum"}),":"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Calendar"}),(0,t.jsx)(n.th,{children:"Example Input"}),(0,t.jsx)(n.th,{children:"Example Output"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Gregorian"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"2024-12-25"'})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"2024-12-25"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Jalali"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"1403-09-05"'})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"1403-09-05"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Hijri"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"1446-06-15"'})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"1446-06-15"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Hebrew"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"5785-03-15"'})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"5785-03-15"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Buddhist"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"2567-12-25"'})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"2567-12-25"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Coptic"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"1741-04-16"'})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"1741-04-16"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Ethiopian"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"2017-04-16"'})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"2017-04-16"'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Chinese"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"4722-11-15"'})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"4722-11-15"'})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"timezone-handling",children:"Timezone Handling"}),"\n",(0,t.jsx)(n.p,{children:"The cast automatically handles timezone conversion:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Storage"}),": Converts to app timezone (typically UTC)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Display"}),": Converts to client timezone (from ",(0,t.jsx)(n.code,{children:"Accept-Timezone"})," header)"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// User in Tehran (UTC+3:30) creates event at 14:30 local time\n$event = Event::create([\n    'starts_at' => '1403-09-05 14:30:00', // Tehran time\n]);\n\n// Database stores: \"2024-12-25 11:00:00\" (UTC)\n\n// User in New York (UTC-5) views event\n// Displays: \"1403-09-05 06:30:00\" (New York time, converted)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"fallback-behavior",children:"Fallback Behavior"}),"\n",(0,t.jsx)(n.p,{children:"The cast gracefully handles edge cases:"}),"\n",(0,t.jsx)(n.h3,{id:"no-language-set",children:"No Language Set"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// If no language is set or language has no calendar\n$event->event_date; // Returns Gregorian format\n"})}),"\n",(0,t.jsx)(n.h3,{id:"invalid-calendar",children:"Invalid Calendar"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// If calendar converter fails\n$event->event_date; // Falls back to Gregorian format\n"})}),"\n",(0,t.jsx)(n.h3,{id:"invalid-input",children:"Invalid Input"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// If input cannot be parsed\n$event->event_date = 'invalid-date'; // May throw exception or return null\n"})}),"\n",(0,t.jsx)(n.h2,{id:"when-to-use-datebasedoncalendarcast",children:"When to Use DateBasedOnCalendarCast"}),"\n",(0,t.jsx)(n.h3,{id:"primary-use-cases",children:"Primary Use Cases"}),"\n",(0,t.jsx)(n.h4,{id:"1-multi-calendar-applications",children:"1. Multi-Calendar Applications"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"When"}),": Your application serves users with different calendar preferences."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why"}),": Automatically displays dates in user's preferred calendar."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Persian users see Jalali dates\n// Arabic users see Hijri dates\n// English users see Gregorian dates\n"})}),"\n",(0,t.jsx)(n.h4,{id:"2-localized-date-display",children:"2. Localized Date Display"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"When"}),": You need dates displayed in user's local calendar system."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why"}),": Provides native date format for better user experience."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:'// Persian user sees: "1403/09/05"\n// Instead of: "2024-12-25"\n'})}),"\n",(0,t.jsx)(n.h4,{id:"3-form-input-handling",children:"3. Form Input Handling"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"When"}),": Users input dates in their local calendar system."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why"}),": Automatically converts to Gregorian for storage."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:'// User inputs: "1403/09/05" (Jalali)\n// Stored as: "2024-12-25" (Gregorian)\n'})}),"\n",(0,t.jsx)(n.h4,{id:"4-api-responses",children:"4. API Responses"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"When"}),": Building APIs that return date data."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why"}),": Automatically formats dates based on user's language."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// API returns dates in user's calendar automatically\nreturn new EventResource($event);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"when-not-to-use",children:"When NOT to Use"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Simple Gregorian-Only Apps"}),": If all users use Gregorian calendar"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Internal Calculations"}),": For server-side date calculations, use Carbon directly"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Timestamp Fields"}),": Use ",(0,t.jsx)(n.code,{children:"timestamp"})," cast for Unix timestamps"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Date Ranges"}),": For date range queries, work with Gregorian in database"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"1-always-store-in-gregorian",children:"1. Always Store in Gregorian"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// \u2705 Good - Cast handles conversion\nprotected $casts = [\n    'event_date' => DateBasedOnCalendarCast::class,\n];\n\n// Database always stores Gregorian\n// Display automatically converts\n\n// \u274c Bad - Don't manually convert before storage\n$event->event_date = convertToGregorian($jalaliDate); // Unnecessary\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-use-appropriate-mode",children:"2. Use Appropriate Mode"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// \u2705 Good - Use datetime for time-sensitive data\n'starts_at' => DateBasedOnCalendarCast::class . ':datetime',\n\n// \u2705 Good - Use date for date-only fields\n'birth_date' => DateBasedOnCalendarCast::class . ':date',\n\n// \u274c Bad - Using date mode for datetime data\n'starts_at' => DateBasedOnCalendarCast::class . ':date', // Loses time\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-configure-digits-based-on-locale",children:"3. Configure Digits Based on Locale"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// \u2705 Good - Auto digits adapts to locale\n'event_date' => DateBasedOnCalendarCast::class . ':date,-,auto',\n\n// \u2705 Good - Explicit digits for specific needs\n'event_date' => DateBasedOnCalendarCast::class . ':date,-,fa', // Always Persian\n\n// \u274c Bad - English digits for Persian users\n'event_date' => DateBasedOnCalendarCast::class . ':date,-,en', // Poor UX\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-handle-null-values",children:"4. Handle Null Values"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// \u2705 Good - Cast handles null gracefully\n$event->event_date = null; // Works fine\n\n// \u274c Bad - Don't set empty strings\n$event->event_date = ''; // May cause issues\n"})}),"\n",(0,t.jsx)(n.h2,{id:"common-mistakes-to-avoid",children:"Common Mistakes to Avoid"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Manual conversion before storage"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// \u274c Wrong - Unnecessary conversion\n$gregorian = convertToGregorian($jalaliDate);\n$event->event_date = $gregorian;\n\n// \u2705 Correct - Cast handles it\n$event->event_date = $jalaliDate;\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Using wrong mode"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// \u274c Wrong - Date mode loses time\n'starts_at' => DateBasedOnCalendarCast::class . ':date',\n\n// \u2705 Correct - Datetime mode preserves time\n'starts_at' => DateBasedOnCalendarCast::class . ':datetime',\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Not configuring digits"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// \u274c Wrong - May show English digits to Persian users\n'event_date' => DateBasedOnCalendarCast::class,\n\n// \u2705 Correct - Auto adapts to locale\n'event_date' => DateBasedOnCalendarCast::class . ':date,-,auto',\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Expecting consistent format across users"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// \u274c Wrong - Format depends on user's language\n$date = $event->event_date; // Different format for different users\n\n// \u2705 Correct - Use raw attribute for consistent format\n$date = $event->getRawOriginal('event_date'); // Always Gregorian\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,t.jsx)(n.h3,{id:"converter-caching",children:"Converter Caching"}),"\n",(0,t.jsx)(n.p,{children:"The cast caches calendar converters per request to avoid repeated factory calls:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// First call creates converter\n$event->event_date; // Creates converter, caches it\n\n// Subsequent calls use cached converter\n$event2->event_date; // Uses cached converter\n"})}),"\n",(0,t.jsx)(n.h3,{id:"language-resolution",children:"Language Resolution"}),"\n",(0,t.jsxs)(n.p,{children:["The cast uses ",(0,t.jsx)(n.code,{children:"CurrentLanguage::get()"})," which is cached based on ",(0,t.jsx)(n.code,{children:"config('language.cache_time')"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Configure cache for better performance\n// config/language.php\n'cache_time' => 60, // Cache for 60 minutes\n"})}),"\n",(0,t.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(i.A,{to:"/packages/laravel-language/deep-diving/calendar-type-enum",children:"CalendarTypeEnum"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(i.A,{to:"/packages/laravel-language/deep-diving/models/language",children:"Language Model"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(i.A,{to:"/packages/laravel-language/deep-diving/support/current-language",children:"CurrentLanguage"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(i.A,{to:"/packages/laravel-language/deep-diving/middleware/set-timezone-middleware",children:"SetTimezoneMiddleware"}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);