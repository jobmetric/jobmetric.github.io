"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[6811],{28453(e,s,r){r.d(s,{R:()=>i,x:()=>l});var n=r(96540);const t={},a=n.createContext(t);function i(e){const s=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(a.Provider,{value:s},e.children)}},88921(e,s,r){r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"laravel-star/deep-diving/can-star","title":"CanStar","description":"The CanStar trait enables a model to perform star ratings on other models that implement the HasStar trait. This trait is typically applied to user models or any actor that can \\"rate\\" content.","source":"@site/packages/laravel-star/deep-diving/can-star.md","sourceDirName":"laravel-star/deep-diving","slug":"/laravel-star/deep-diving/can-star","permalink":"/packages/laravel-star/deep-diving/can-star","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-star/deep-diving/can-star.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"CanStar"},"sidebar":"packagesSidebar","previous":{"title":"HasStar","permalink":"/packages/laravel-star/deep-diving/has-star"},"next":{"title":"Star","permalink":"/packages/laravel-star/deep-diving/models/star"}}');var t=r(74848),a=r(28453),i=r(28774);const l={sidebar_position:2,sidebar_label:"CanStar"},d="CanStar",c={},o=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Relationships",id:"relationships",level:2},{value:"Stars Given",id:"stars-given",level:3},{value:"Available Methods",id:"available-methods",level:2},{value:"Has Starred",id:"has-starred",level:3},{value:"Starred Rate",id:"starred-rate",level:3},{value:"Remove Star From",id:"remove-star-from",level:3},{value:"Count Star Given",id:"count-star-given",level:3},{value:"Total Stars Given",id:"total-stars-given",level:3},{value:"Star Summary",id:"star-summary",level:3},{value:"Starred Items",id:"starred-items",level:3},{value:"Stars To Type",id:"stars-to-type",level:3},{value:"Latest Stars Given",id:"latest-stars-given",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"User Rating History",id:"user-rating-history",level:3},{value:"User Rating Statistics",id:"user-rating-statistics",level:3},{value:"Filtering Ratings",id:"filtering-ratings",level:3},{value:"When to Use CanStar",id:"when-to-use-canstar",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function h(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"canstar",children:"CanStar"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"CanStar"})," trait enables a model to perform star ratings on other models that implement the ",(0,t.jsx)(s.code,{children:"HasStar"}),' trait. This trait is typically applied to user models or any actor that can "rate" content.']}),"\n",(0,t.jsx)(s.h2,{id:"namespace",children:"Namespace"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"JobMetric\\Star\\CanStar\n"})}),"\n",(0,t.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"CanStar"})," trait provides methods for models that can give star ratings. It allows you to check rating status, get rating history, count ratings given, and manage ratings from the starrer's perspective."]}),"\n",(0,t.jsx)(s.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(s.p,{children:"Add the trait to your model:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"use JobMetric\\Star\\CanStar;\n\nclass User extends Model\n{\n    use CanStar;\n}\n"})}),"\n",(0,t.jsx)(s.h2,{id:"relationships",children:"Relationships"}),"\n",(0,t.jsx)(s.h3,{id:"stars-given",children:"Stars Given"}),"\n",(0,t.jsx)(s.p,{children:"Get all star ratings given by this model:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"$user->starsGiven; // Collection of Star models\n$user->starsGiven()->where('rate', 5)->get();\n"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Returns:"})," ",(0,t.jsx)(s.code,{children:"MorphMany"})," - Relationship to Star model"]}),"\n",(0,t.jsx)(s.h2,{id:"available-methods",children:"Available Methods"}),"\n",(0,t.jsx)(s.h3,{id:"has-starred",children:"Has Starred"}),"\n",(0,t.jsx)(s.p,{children:"Check if this starrer has rated a specific starable model:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"$user->hasStarred($product);\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"$starable"})," (",(0,t.jsx)(s.code,{children:"Model"}),"): The model being rated"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Returns:"})," ",(0,t.jsx)(s.code,{children:"bool"})," - True if a rating exists"]}),"\n",(0,t.jsx)(s.h3,{id:"starred-rate",children:"Starred Rate"}),"\n",(0,t.jsx)(s.p,{children:"Get the rating value this starrer gave to a specific starable:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"$rate = $user->starredRate($product);\n// Returns: 5 or null\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"$starable"})," (",(0,t.jsx)(s.code,{children:"Model"}),"): The target model"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Returns:"})," ",(0,t.jsx)(s.code,{children:"int|null"})," - The rating value or null"]}),"\n",(0,t.jsx)(s.h3,{id:"remove-star-from",children:"Remove Star From"}),"\n",(0,t.jsx)(s.p,{children:"Remove a star rating from a specific starable model:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"$user->removeStarFrom($product);\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"$starable"})," (",(0,t.jsx)(s.code,{children:"Model"}),"): The target model"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Returns:"})," ",(0,t.jsx)(s.code,{children:"bool"})," - True if deletion was successful"]}),"\n",(0,t.jsx)(s.h3,{id:"count-star-given",children:"Count Star Given"}),"\n",(0,t.jsx)(s.p,{children:"Count how many times this starrer has given a specific rating value:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"$count = $user->countStarGiven(5);\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"$rate"})," (",(0,t.jsx)(s.code,{children:"int"}),"): The rating value"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Returns:"})," ",(0,t.jsx)(s.code,{children:"int"})," - Count of ratings"]}),"\n",(0,t.jsx)(s.h3,{id:"total-stars-given",children:"Total Stars Given"}),"\n",(0,t.jsx)(s.p,{children:"Count the total number of star ratings this model has given:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"$total = $user->totalStarsGiven();\n"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Returns:"})," ",(0,t.jsx)(s.code,{children:"int"})," - Total rating count"]}),"\n",(0,t.jsx)(s.h3,{id:"star-summary",children:"Star Summary"}),"\n",(0,t.jsx)(s.p,{children:"Get a summary of all rating values and their total counts:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"$summary = $user->starSummary();\n// Returns: [5 => 50, 4 => 30, 3 => 15, 2 => 4, 1 => 1]\n"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Returns:"})," ",(0,t.jsx)(s.code,{children:"Collection<int, int>"})," - Map of rating value => count"]}),"\n",(0,t.jsx)(s.h3,{id:"starred-items",children:"Starred Items"}),"\n",(0,t.jsx)(s.p,{children:"Get all starable items this starrer has rated:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"$items = $user->starredItems();\n// Filter by starable class\n$products = $user->starredItems(Product::class);\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"$starableClass"})," (",(0,t.jsx)(s.code,{children:"string|null"}),"): Optional starable class filter"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Returns:"})," ",(0,t.jsx)(s.code,{children:"Collection<Model>"})," - Collection of starable models"]}),"\n",(0,t.jsx)(s.h3,{id:"stars-to-type",children:"Stars To Type"}),"\n",(0,t.jsx)(s.p,{children:"Get all star ratings this starrer made to a specific starable type:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"$stars = $user->starsToType(Product::class);\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"$starableClass"})," (",(0,t.jsx)(s.code,{children:"string"}),"): The starable model class name"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Returns:"})," ",(0,t.jsx)(s.code,{children:"Collection<Star>"})," - Collection of Star models"]}),"\n",(0,t.jsx)(s.h3,{id:"latest-stars-given",children:"Latest Stars Given"}),"\n",(0,t.jsx)(s.p,{children:"Get the latest star ratings made by this model:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"$latest = $user->latestStarsGiven(10);\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"$limit"})," (",(0,t.jsx)(s.code,{children:"int"}),"): Number of ratings to retrieve (default: 5)"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Returns:"})," ",(0,t.jsx)(s.code,{children:"Collection<Star>"})," - Collection of Star models"]}),"\n",(0,t.jsx)(s.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,t.jsx)(s.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:'use JobMetric\\Star\\CanStar;\n\nclass User extends Model\n{\n    use CanStar;\n}\n\n$user = User::find(1);\n$product = Product::find(1);\n\n// Check if user has rated\nif ($user->hasStarred($product)) {\n    echo "User has rated this product";\n}\n\n// Get user\'s rating\n$rate = $user->starredRate($product);\nif ($rate) {\n    echo "User rated: {$rate} stars";\n}\n\n// Remove user\'s rating\n$user->removeStarFrom($product);\n'})}),"\n",(0,t.jsx)(s.h3,{id:"user-rating-history",children:"User Rating History"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:'$user = User::find(1);\n\n// Get all products user has rated\n$ratedProducts = $user->starredItems(Product::class);\n\n// Get all items user has rated\n$allRatedItems = $user->starredItems();\n\n// Get latest ratings\n$latest = $user->latestStarsGiven(20);\n\nforeach ($latest as $star) {\n    echo "Rated {$star->starable->name} with {$star->rate} stars\\n";\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"user-rating-statistics",children:"User Rating Statistics"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:'$user = User::find(1);\n\n// Get rating summary\n$summary = $user->starSummary();\n// [5 => 100, 4 => 50, 3 => 20, 2 => 5, 1 => 2]\n\n// Count specific rating value\n$fiveStarCount = $user->countStarGiven(5);\n\n// Total ratings given\n$total = $user->totalStarsGiven();\n\n// Display statistics\necho "Total ratings: {$total}\\n";\necho "5-star ratings: {$fiveStarCount}\\n";\nforeach ($summary as $rate => $count) {\n    echo "{$rate} stars: {$count}\\n";\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"filtering-ratings",children:"Filtering Ratings"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:"$user = User::find(1);\n\n// Get all 5-star ratings given\n$fiveStarRatings = $user->starsGiven()->where('rate', 5)->get();\n\n// Get all ratings to products\n$productRatings = $user->starsToType(Product::class);\n\n// Get all rated products\n$ratedProducts = $user->starredItems(Product::class);\n"})}),"\n",(0,t.jsx)(s.h2,{id:"when-to-use-canstar",children:"When to Use CanStar"}),"\n",(0,t.jsxs)(s.p,{children:["Use the ",(0,t.jsx)(s.code,{children:"CanStar"})," trait when you need to:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"User Ratings"}),": Track what users have rated"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Rating History"}),": Show user's rating history"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Rating Statistics"}),": Display user rating statistics"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Content Discovery"}),": Find content a user has rated"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"User Profiles"}),": Show rating activity on user profiles"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Analytics"}),": Analyze user rating patterns"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(i.A,{to:"/packages/laravel-star/deep-diving/has-star",children:"HasStar"}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(i.A,{to:"/packages/laravel-star/deep-diving/models/star",children:"Star Model"}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(i.A,{to:"/packages/laravel-star/deep-diving/events",children:"Events"}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);