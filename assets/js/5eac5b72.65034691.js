"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[2615],{28453(e,a,n){n.d(a,{R:()=>d,x:()=>i});var l=n(96540);const s={},t=l.createContext(s);function d(e){const a=l.useContext(t);return l.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function i(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),l.createElement(t.Provider,{value:a},e.children)}},34068(e,a,n){n.r(a),n.d(a,{assets:()=>u,contentTitle:()=>r,default:()=>o,frontMatter:()=>i,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"laravel-language/deep-diving/requests/update-language-request","title":"UpdateLanguageRequest","description":"The UpdateLanguageRequest is a FormRequest class that validates and normalizes data when updating existing language records. It provides flexible validation that handles partial updates and ensures data integrity.","source":"@site/packages/laravel-language/deep-diving/requests/update-language-request.md","sourceDirName":"laravel-language/deep-diving/requests","slug":"/laravel-language/deep-diving/requests/update-language-request","permalink":"/packages/laravel-language/deep-diving/requests/update-language-request","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-language/deep-diving/requests/update-language-request.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"UpdateLanguageRequest"},"sidebar":"packagesSidebar","previous":{"title":"StoreLanguageRequest","permalink":"/packages/laravel-language/deep-diving/requests/store-language-request"},"next":{"title":"LanguageResource","permalink":"/packages/laravel-language/deep-diving/language-resource"}}');var s=n(74848),t=n(28453),d=n(28774);const i={sidebar_position:2,sidebar_label:"UpdateLanguageRequest"},r="UpdateLanguageRequest",u={},c=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Key Differences from StoreLanguageRequest",id:"key-differences-from-storelanguagerequest",level:2},{value:"Available Methods",id:"available-methods",level:2},{value:"Rules",id:"rules",level:3},{value:"Rules For (Static)",id:"rules-for-static",level:3},{value:"Normalize (Static)",id:"normalize-static",level:3},{value:"Attributes",id:"attributes",level:3},{value:"Validation Rules",id:"validation-rules",level:2},{value:"Complete Rules Array",id:"complete-rules-array",level:3},{value:"Field Details",id:"field-details",level:3},{value:"Locale Uniqueness Handling",id:"locale-uniqueness-handling",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Example 1: Basic Controller Usage",id:"example-1-basic-controller-usage",level:3},{value:"Example 2: Partial Update",id:"example-2-partial-update",level:3},{value:"Example 3: Using Static Methods Outside Pipeline",id:"example-3-using-static-methods-outside-pipeline",level:3},{value:"Example 4: API Endpoint",id:"example-4-api-endpoint",level:3},{value:"Example 5: Form Submission",id:"example-5-form-submission",level:3},{value:"Example 6: Bulk Language Update",id:"example-6-bulk-language-update",level:3},{value:"Example 7: Changing Locale",id:"example-7-changing-locale",level:3},{value:"Example 8: With Authorization",id:"example-8-with-authorization",level:3},{value:"Route Parameter Extraction",id:"route-parameter-extraction",level:2},{value:"Data Normalization",id:"data-normalization",level:2},{value:"Empty Flag String",id:"empty-flag-string",level:3},{value:"Partial Updates",id:"partial-updates",level:3},{value:"When to Use UpdateLanguageRequest",id:"when-to-use-updatelanguagerequest",level:2},{value:"Primary Use Cases",id:"primary-use-cases",level:3},{value:"1. Language Update Forms",id:"1-language-update-forms",level:4},{value:"2. API Endpoints",id:"2-api-endpoints",level:4},{value:"3. Language Sync",id:"3-language-sync",level:4},{value:"4. Bulk Updates",id:"4-bulk-updates",level:4},{value:"When NOT to Use",id:"when-not-to-use",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Always Use in Controllers",id:"1-always-use-in-controllers",level:3},{value:"2. Use Validated Data",id:"2-use-validated-data",level:3},{value:"3. Use Static Methods with Context",id:"3-use-static-methods-with-context",level:3},{value:"4. Handle Partial Updates",id:"4-handle-partial-updates",level:3},{value:"Common Mistakes to Avoid",id:"common-mistakes-to-avoid",level:2},{value:"Comparison with StoreLanguageRequest",id:"comparison-with-storelanguagerequest",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function g(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.header,{children:(0,s.jsx)(a.h1,{id:"updatelanguagerequest",children:"UpdateLanguageRequest"})}),"\n",(0,s.jsxs)(a.p,{children:["The ",(0,s.jsx)(a.code,{children:"UpdateLanguageRequest"})," is a FormRequest class that validates and normalizes data when updating existing language records. It provides flexible validation that handles partial updates and ensures data integrity."]}),"\n",(0,s.jsx)(a.h2,{id:"namespace",children:"Namespace"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"JobMetric\\Language\\Http\\Requests\\UpdateLanguageRequest\n"})}),"\n",(0,s.jsx)(a.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.code,{children:"UpdateLanguageRequest"})," provides:"]}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Flexible Validation"}),": All fields are optional (partial updates supported)"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Context-Aware Rules"}),": Automatically extracts language ID from route for uniqueness validation"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Data Normalization"}),": Automatically normalizes input data"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Static Methods"}),": Can be used outside Laravel's request pipeline with explicit context"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Custom Attributes"}),": Provides translated field names for error messages"]}),"\n"]}),"\n",(0,s.jsx)(a.h2,{id:"key-differences-from-storelanguagerequest",children:"Key Differences from StoreLanguageRequest"}),"\n",(0,s.jsxs)(a.table,{children:[(0,s.jsx)(a.thead,{children:(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.th,{children:"Feature"}),(0,s.jsx)(a.th,{children:"StoreLanguageRequest"}),(0,s.jsx)(a.th,{children:"UpdateLanguageRequest"})]})}),(0,s.jsxs)(a.tbody,{children:[(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Fields"})}),(0,s.jsx)(a.td,{children:"All required"}),(0,s.jsx)(a.td,{children:"All optional (partial updates)"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Locale Uniqueness"})}),(0,s.jsx)(a.td,{children:"Checks against all languages"}),(0,s.jsx)(a.td,{children:"Excludes current language from check"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Language ID"})}),(0,s.jsx)(a.td,{children:"Not needed"}),(0,s.jsx)(a.td,{children:"Extracted from route parameter"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Static Methods"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"normalize($data)"})}),(0,s.jsxs)(a.td,{children:[(0,s.jsx)(a.code,{children:"normalize($data, $ctx)"})," and ",(0,s.jsx)(a.code,{children:"rulesFor($data, $ctx)"})]})]})]})]}),"\n",(0,s.jsx)(a.h2,{id:"available-methods",children:"Available Methods"}),"\n",(0,s.jsx)(a.h3,{id:"rules",children:"Rules"}),"\n",(0,s.jsx)(a.p,{children:"Get validation rules for language update:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"public function rules(): array\n"})}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Returns:"})," ",(0,s.jsx)(a.code,{children:"array"})," - Validation rules array"]}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"Behavior:"})}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:["Automatically extracts language ID from route parameter ",(0,s.jsx)(a.code,{children:"language"})]}),"\n",(0,s.jsxs)(a.li,{children:["Passes language ID to ",(0,s.jsx)(a.code,{children:"CheckLocaleRule"})," to exclude current record from uniqueness check"]}),"\n"]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// Route: PUT /languages/{language}\n// $language is the route parameter\n$request = new UpdateLanguageRequest();\n$rules = $request->rules(); // Automatically uses language ID from route\n"})}),"\n",(0,s.jsx)(a.h3,{id:"rules-for-static",children:"Rules For (Static)"}),"\n",(0,s.jsx)(a.p,{children:"Build rules with explicit context (used outside Laravel pipeline):"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"public static function rulesFor(array $data, array $ctx = []): array\n"})}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.code,{children:"$data"})," (",(0,s.jsx)(a.code,{children:"array"}),"): Input data"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.code,{children:"$ctx"})," (",(0,s.jsx)(a.code,{children:"array"}),"): Context array containing ",(0,s.jsx)(a.code,{children:"language_id"})]}),"\n"]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Returns:"})," ",(0,s.jsx)(a.code,{children:"array"})," - Validation rules array"]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"$data = ['name' => 'Updated Name', 'locale' => 'fa'];\n$context = ['language_id' => 5];\n\n$rules = UpdateLanguageRequest::rulesFor($data, $context);\n// Rules include CheckLocaleRule(5) to exclude language ID 5 from uniqueness check\n"})}),"\n",(0,s.jsx)(a.h3,{id:"normalize-static",children:"Normalize (Static)"}),"\n",(0,s.jsx)(a.p,{children:"Normalize raw input data outside Laravel's FormRequest pipeline:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"public static function normalize(array $data, array $ctx = []): array\n"})}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.code,{children:"$data"})," (",(0,s.jsx)(a.code,{children:"array"}),"): Raw input data"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.code,{children:"$ctx"})," (",(0,s.jsx)(a.code,{children:"array"}),"): Context array (optional, not used in normalization)"]}),"\n"]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Returns:"})," ",(0,s.jsx)(a.code,{children:"array"})," - Normalized data"]}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"What it does:"})}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:["Converts empty ",(0,s.jsx)(a.code,{children:"flag"})," string to ",(0,s.jsx)(a.code,{children:"null"})]}),"\n"]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"$rawData = [\n    'name' => 'Updated Persian',\n    'flag' => '', // Empty string\n];\n\n$normalized = UpdateLanguageRequest::normalize($rawData);\n// Result: ['name' => 'Updated Persian', 'flag' => null]\n"})}),"\n",(0,s.jsx)(a.h3,{id:"attributes",children:"Attributes"}),"\n",(0,s.jsx)(a.p,{children:"Get custom attribute names for validation error messages:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"public function attributes(): array\n"})}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Returns:"})," ",(0,s.jsx)(a.code,{children:"array"})," - Attribute names mapped to translated labels"]}),"\n",(0,s.jsx)(a.h2,{id:"validation-rules",children:"Validation Rules"}),"\n",(0,s.jsx)(a.h3,{id:"complete-rules-array",children:"Complete Rules Array"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"[\n    'name' => 'string',\n    'flag' => 'string|nullable',\n    'locale' => ['string', new CheckLocaleRule($languageId)],\n    'direction' => 'string|in:ltr,rtl',\n    'calendar' => 'string|in:gregorian,jalali,hijri,hebrew,buddhist,coptic,ethiopian,chinese',\n    'status' => 'boolean',\n]\n"})}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Note:"})," All fields are optional, allowing partial updates."]}),"\n",(0,s.jsx)(a.h3,{id:"field-details",children:"Field Details"}),"\n",(0,s.jsxs)(a.table,{children:[(0,s.jsx)(a.thead,{children:(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.th,{children:"Field"}),(0,s.jsx)(a.th,{children:"Type"}),(0,s.jsx)(a.th,{children:"Rules"}),(0,s.jsx)(a.th,{children:"Description"})]})}),(0,s.jsxs)(a.tbody,{children:[(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"name"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"string|null"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"string"})}),(0,s.jsx)(a.td,{children:"Language display name (optional)"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"flag"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"string|null"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"string|nullable"})}),(0,s.jsx)(a.td,{children:"Country flag code (optional)"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"locale"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"string|null"})}),(0,s.jsxs)(a.td,{children:[(0,s.jsx)(a.code,{children:"string"}),", ",(0,s.jsx)(a.code,{children:"CheckLocaleRule($id)"})]}),(0,s.jsx)(a.td,{children:"Two-letter locale code (optional, excludes current language)"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"direction"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"string|null"})}),(0,s.jsxs)(a.td,{children:[(0,s.jsx)(a.code,{children:"string"}),", ",(0,s.jsx)(a.code,{children:"in:ltr,rtl"})]}),(0,s.jsx)(a.td,{children:"Text direction (optional)"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"calendar"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"string|null"})}),(0,s.jsxs)(a.td,{children:[(0,s.jsx)(a.code,{children:"string"}),", ",(0,s.jsx)(a.code,{children:"in:..."})]}),(0,s.jsx)(a.td,{children:"Calendar system type (optional)"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"status"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"bool|null"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"boolean"})}),(0,s.jsx)(a.td,{children:"Active/inactive status (optional)"})]})]})]}),"\n",(0,s.jsx)(a.h3,{id:"locale-uniqueness-handling",children:"Locale Uniqueness Handling"}),"\n",(0,s.jsxs)(a.p,{children:["The ",(0,s.jsx)(a.code,{children:"locale"})," field uses ",(0,s.jsx)(a.code,{children:"CheckLocaleRule"})," with the current language ID:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// When updating language ID 5\n'locale' => ['string', new CheckLocaleRule(5)]\n\n// This ensures:\n// - Locale format is valid\n// - Locale is unique (excluding language ID 5)\n// - Can update other fields without changing locale\n"})}),"\n",(0,s.jsx)(a.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,s.jsx)(a.h3,{id:"example-1-basic-controller-usage",children:"Example 1: Basic Controller Usage"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// app/Http/Controllers/LanguageController.php\nuse JobMetric\\Language\\Http\\Requests\\UpdateLanguageRequest;\nuse JobMetric\\Language\\Facades\\Language;\n\npublic function update(UpdateLanguageRequest $request, Language $language)\n{\n    $data = $request->validated();\n    \n    $updated = Language::update($language->id, $data);\n    \n    return response()->json([\n        'message' => 'Language updated successfully',\n        'language' => $updated,\n    ]);\n}\n"})}),"\n",(0,s.jsx)(a.h3,{id:"example-2-partial-update",children:"Example 2: Partial Update"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// Only update name\n$request->validate([\n    'name' => 'required|string',\n]);\n\n// Only update status\n$request->validate([\n    'status' => 'required|boolean',\n]);\n\n// Update multiple fields\n$request->validate([\n    'name' => 'required|string',\n    'status' => 'required|boolean',\n    'direction' => 'required|string|in:ltr,rtl',\n]);\n"})}),"\n",(0,s.jsx)(a.h3,{id:"example-3-using-static-methods-outside-pipeline",children:"Example 3: Using Static Methods Outside Pipeline"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// app/Services/LanguageSyncService.php\nuse JobMetric\\Language\\Http\\Requests\\UpdateLanguageRequest;\nuse JobMetric\\Language\\Facades\\Language;\n\nclass LanguageSyncService\n{\n    public function syncLanguage(int $languageId, array $externalData): Language\n    {\n        // Normalize data\n        $normalized = UpdateLanguageRequest::normalize($externalData);\n        \n        // Build rules with context\n        $rules = UpdateLanguageRequest::rulesFor($normalized, [\n            'language_id' => $languageId\n        ]);\n        \n        // Validate manually\n        $validator = Validator::make($normalized, $rules);\n        \n        if ($validator->fails()) {\n            throw new ValidationException($validator);\n        }\n        \n        // Update language\n        return Language::update($languageId, $normalized);\n    }\n}\n"})}),"\n",(0,s.jsx)(a.h3,{id:"example-4-api-endpoint",children:"Example 4: API Endpoint"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// routes/api.php\nRoute::put('/languages/{language}', function (UpdateLanguageRequest $request, Language $language) {\n    $updated = Language::update($language->id, $request->validated());\n    \n    return new LanguageResource($updated);\n});\n"})}),"\n",(0,s.jsx)(a.h3,{id:"example-5-form-submission",children:"Example 5: Form Submission"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// app/Http/Controllers/Admin/LanguageController.php\npublic function update(UpdateLanguageRequest $request, Language $language)\n{\n    $updated = Language::update($language->id, $request->validated());\n    \n    return redirect()\n        ->route('admin.languages.index')\n        ->with('success', 'Language updated successfully');\n}\n"})}),"\n",(0,s.jsx)(a.h3,{id:"example-6-bulk-language-update",children:"Example 6: Bulk Language Update"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// app/Http/Controllers/Admin/LanguageController.php\npublic function bulkUpdate(Request $request)\n{\n    $request->validate([\n        'languages' => 'required|array',\n        'languages.*.id' => 'required|exists:languages,id',\n        'languages.*.data' => 'required|array',\n    ]);\n    \n    $updated = [];\n    \n    foreach ($request->input('languages') as $item) {\n        $languageId = $item['id'];\n        $languageData = $item['data'];\n        \n        // Normalize data\n        $normalized = UpdateLanguageRequest::normalize($languageData);\n        \n        // Build rules with context\n        $rules = UpdateLanguageRequest::rulesFor($normalized, [\n            'language_id' => $languageId\n        ]);\n        \n        // Validate\n        $validator = Validator::make($normalized, $rules);\n        \n        if ($validator->fails()) {\n            continue; // Skip invalid entries\n        }\n        \n        $updated[] = Language::update($languageId, $normalized);\n    }\n    \n    return response()->json([\n        'message' => count($updated) . ' languages updated',\n        'languages' => $updated,\n    ]);\n}\n"})}),"\n",(0,s.jsx)(a.h3,{id:"example-7-changing-locale",children:"Example 7: Changing Locale"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// Update language locale from 'fa-IR' to 'fa'\npublic function update(UpdateLanguageRequest $request, Language $language)\n{\n    // Request includes: ['locale' => 'fa']\n    // CheckLocaleRule(5) ensures 'fa' doesn't exist (excluding language ID 5)\n    \n    $updated = Language::update($language->id, $request->validated());\n    \n    return response()->json($updated);\n}\n"})}),"\n",(0,s.jsx)(a.h3,{id:"example-8-with-authorization",children:"Example 8: With Authorization"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// app/Http/Requests/UpdateLanguageRequest.php\nuse Illuminate\\Foundation\\Http\\FormRequest;\n\nclass UpdateLanguageRequest extends FormRequest\n{\n    public function authorize(): bool\n    {\n        $language = $this->route('language');\n        \n        // Only allow updating if user owns the language or is admin\n        return auth()->id() === $language->created_by \n            || auth()->user()->isAdmin();\n    }\n    \n    // ... rest of the class\n}\n"})}),"\n",(0,s.jsx)(a.h2,{id:"route-parameter-extraction",children:"Route Parameter Extraction"}),"\n",(0,s.jsx)(a.p,{children:"The request automatically extracts the language ID from the route:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// Route definition\nRoute::put('/languages/{language}', [LanguageController::class, 'update']);\n\n// In UpdateLanguageRequest\n$language_id = $this->route()?->parameter('language')?->id;\n// or\n$language_id = $this->route('language')->id;\n"})}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Note:"})," The route parameter name must be ",(0,s.jsx)(a.code,{children:"language"})," for automatic extraction."]}),"\n",(0,s.jsx)(a.h2,{id:"data-normalization",children:"Data Normalization"}),"\n",(0,s.jsxs)(a.p,{children:["The ",(0,s.jsx)(a.code,{children:"normalize()"})," method automatically handles:"]}),"\n",(0,s.jsx)(a.h3,{id:"empty-flag-string",children:"Empty Flag String"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// Input\n['flag' => '']\n\n// Output\n['flag' => null]\n"})}),"\n",(0,s.jsx)(a.h3,{id:"partial-updates",children:"Partial Updates"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// Input - only updating name\n['name' => 'Updated Name']\n\n// Output - same, no other fields affected\n['name' => 'Updated Name']\n"})}),"\n",(0,s.jsx)(a.h2,{id:"when-to-use-updatelanguagerequest",children:"When to Use UpdateLanguageRequest"}),"\n",(0,s.jsx)(a.h3,{id:"primary-use-cases",children:"Primary Use Cases"}),"\n",(0,s.jsx)(a.h4,{id:"1-language-update-forms",children:"1. Language Update Forms"}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"When"}),": Creating admin forms for editing existing languages."]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Why"}),": Provides flexible validation for partial updates."]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"public function update(UpdateLanguageRequest $request, Language $language)\n{\n    $updated = Language::update($language->id, $request->validated());\n    return redirect()->back()->with('success', 'Language updated');\n}\n"})}),"\n",(0,s.jsx)(a.h4,{id:"2-api-endpoints",children:"2. API Endpoints"}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"When"}),": Building REST APIs for language management."]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Why"}),": Ensures data integrity while allowing partial updates."]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"Route::put('/api/languages/{language}', function (UpdateLanguageRequest $request, Language $language) {\n    return new LanguageResource(Language::update($language->id, $request->validated()));\n});\n"})}),"\n",(0,s.jsx)(a.h4,{id:"3-language-sync",children:"3. Language Sync"}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"When"}),": Syncing languages from external sources."]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Why"}),": Normalizes and validates data with proper context."]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"$normalized = UpdateLanguageRequest::normalize($externalData);\n$rules = UpdateLanguageRequest::rulesFor($normalized, ['language_id' => $id]);\n"})}),"\n",(0,s.jsx)(a.h4,{id:"4-bulk-updates",children:"4. Bulk Updates"}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"When"}),": Updating multiple languages at once."]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Why"}),": Consistent validation with proper context for each language."]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"foreach ($languages as $id => $data) {\n    $rules = UpdateLanguageRequest::rulesFor($data, ['language_id' => $id]);\n    // Validate and update\n}\n"})}),"\n",(0,s.jsx)(a.h3,{id:"when-not-to-use",children:"When NOT to Use"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Creating Languages"}),": Use ",(0,s.jsx)(a.code,{children:"StoreLanguageRequest"})," instead"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Reading Languages"}),": Don't use for reading/displaying language data"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Deleting Languages"}),": Use appropriate delete request"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Internal Logic"}),": Don't use for internal language operations"]}),"\n"]}),"\n",(0,s.jsx)(a.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(a.h3,{id:"1-always-use-in-controllers",children:"1. Always Use in Controllers"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// \u2705 Good\npublic function update(UpdateLanguageRequest $request, Language $language)\n{\n    $updated = Language::update($language->id, $request->validated());\n}\n\n// \u274c Bad\npublic function update(Request $request, Language $language)\n{\n    $request->validate([...]); // Duplicate validation\n    $updated = Language::update($language->id, $request->all());\n}\n"})}),"\n",(0,s.jsx)(a.h3,{id:"2-use-validated-data",children:"2. Use Validated Data"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// \u2705 Good - Only validated data\n$updated = Language::update($language->id, $request->validated());\n\n// \u274c Bad - All input data\n$updated = Language::update($language->id, $request->all());\n"})}),"\n",(0,s.jsx)(a.h3,{id:"3-use-static-methods-with-context",children:"3. Use Static Methods with Context"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// \u2705 Good - Explicit context\n$rules = UpdateLanguageRequest::rulesFor($data, ['language_id' => $id]);\n\n// \u274c Bad - Missing context\n$rules = (new UpdateLanguageRequest())->rules(); // May not work outside pipeline\n"})}),"\n",(0,s.jsx)(a.h3,{id:"4-handle-partial-updates",children:"4. Handle Partial Updates"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// \u2705 Good - Only update provided fields\n$data = $request->validated(); // Only contains provided fields\n$updated = Language::update($language->id, $data);\n\n// \u274c Bad - Merge with existing data unnecessarily\n$data = array_merge($language->toArray(), $request->validated());\n"})}),"\n",(0,s.jsx)(a.h2,{id:"common-mistakes-to-avoid",children:"Common Mistakes to Avoid"}),"\n",(0,s.jsxs)(a.ol,{children:["\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Not using validated data"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// \u274c Wrong\n$updated = Language::update($language->id, $request->all());\n\n// \u2705 Correct\n$updated = Language::update($language->id, $request->validated());\n"})}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Wrong route parameter name"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// \u274c Wrong - route parameter must be 'language'\nRoute::put('/languages/{lang}', ...);\n\n// \u2705 Correct\nRoute::put('/languages/{language}', ...);\n"})}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Not providing context in static methods"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// \u274c Wrong - missing language_id context\n$rules = UpdateLanguageRequest::rulesFor($data);\n\n// \u2705 Correct\n$rules = UpdateLanguageRequest::rulesFor($data, ['language_id' => $id]);\n"})}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Duplicating validation rules"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-php",children:"// \u274c Wrong\n$request->validate(['locale' => 'required|string|unique:languages,locale,' . $id]);\n\n// \u2705 Correct - Use the request class\n// Validation is already in UpdateLanguageRequest\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(a.h2,{id:"comparison-with-storelanguagerequest",children:"Comparison with StoreLanguageRequest"}),"\n",(0,s.jsxs)(a.table,{children:[(0,s.jsx)(a.thead,{children:(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.th,{children:"Feature"}),(0,s.jsx)(a.th,{children:"StoreLanguageRequest"}),(0,s.jsx)(a.th,{children:"UpdateLanguageRequest"})]})}),(0,s.jsxs)(a.tbody,{children:[(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Purpose"})}),(0,s.jsx)(a.td,{children:"Create new languages"}),(0,s.jsx)(a.td,{children:"Update existing languages"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Fields"})}),(0,s.jsx)(a.td,{children:"All required"}),(0,s.jsx)(a.td,{children:"All optional"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Locale Check"})}),(0,s.jsx)(a.td,{children:"Checks all languages"}),(0,s.jsx)(a.td,{children:"Excludes current language"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Language ID"})}),(0,s.jsx)(a.td,{children:"Not needed"}),(0,s.jsx)(a.td,{children:"Extracted from route"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Static Methods"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"normalize($data)"})}),(0,s.jsxs)(a.td,{children:[(0,s.jsx)(a.code,{children:"normalize($data, $ctx)"}),", ",(0,s.jsx)(a.code,{children:"rulesFor($data, $ctx)"})]})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Use Case"})}),(0,s.jsx)(a.td,{children:"New language creation"}),(0,s.jsx)(a.td,{children:"Language updates"})]})]})]}),"\n",(0,s.jsx)(a.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(d.A,{to:"/packages/laravel-language/deep-diving/requests/store-language-request",children:"StoreLanguageRequest"}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(d.A,{to:"/packages/laravel-language/deep-diving/language-service",children:"Language Service"}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(d.A,{to:"/packages/laravel-language/deep-diving/rules/check-locale-rule",children:"CheckLocaleRule"}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(d.A,{to:"/packages/laravel-language/deep-diving/models/language",children:"Language Model"}),"\n"]}),"\n"]})]})}function o(e={}){const{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(g,{...e})}):g(e)}}}]);