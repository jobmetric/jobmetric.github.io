"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[5819],{6609(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"laravel-url/deep-diving/exceptions/url-conflict-exception","title":"UrlConflictException","description":"Thrown when attempting to create a URL that already exists for another active model.","source":"@site/packages/laravel-url/deep-diving/exceptions/url-conflict-exception.md","sourceDirName":"laravel-url/deep-diving/exceptions","slug":"/laravel-url/deep-diving/exceptions/url-conflict-exception","permalink":"/packages/laravel-url/deep-diving/exceptions/url-conflict-exception","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-url/deep-diving/exceptions/url-conflict-exception.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"UrlConflictException"},"sidebar":"packagesSidebar","previous":{"title":"SlugNotFoundException","permalink":"/packages/laravel-url/deep-diving/exceptions/slug-not-found-exception"},"next":{"title":"UrlNotFoundException","permalink":"/packages/laravel-url/deep-diving/exceptions/url-not-found-exception"}}');var r=i(74848),l=i(28453),c=i(28774);const o={sidebar_position:4,sidebar_label:"UrlConflictException"},s="UrlConflictException",a={},d=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"When It&#39;s Thrown",id:"when-its-thrown",level:2},{value:"Example",id:"example",level:2},{value:"Handling",id:"handling",level:2},{value:"Error Message",id:"error-message",level:2},{value:"Prevention",id:"prevention",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"urlconflictexception",children:"UrlConflictException"})}),"\n",(0,r.jsx)(n.p,{children:"Thrown when attempting to create a URL that already exists for another active model."}),"\n",(0,r.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"JobMetric\\Url\\Exceptions\\UrlConflictException\n"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"This exception is thrown when:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Another active model uses the same full URL"}),"\n",(0,r.jsx)(n.li,{children:"The conflicting URL is active (not soft-deleted)"}),"\n",(0,r.jsx)(n.li,{children:"Different model (type or ID)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"when-its-thrown",children:"When It's Thrown"}),"\n",(0,r.jsx)(n.p,{children:"The exception is thrown by:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dispatchSlug()"})," - When creating a URL that conflicts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"syncVersionedUrl()"})," - During URL synchronization"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"restore()"})," - When restoring a model with a conflicting URL"]}),"\n",(0,r.jsx)(n.li,{children:"Cascading updates - When child URLs conflict"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// First product\n$product1 = Product::create(['name' => 'Product 1']);\n$product1->dispatchSlug('my-product', 'products');\n// URL: /shop/category/my-product\n\n// Second product that would create same URL\n$product2 = Product::create(['name' => 'Product 2']);\ntry {\n    $product2->dispatchSlug('my-product', 'products');  // May throw UrlConflictException\n} catch (UrlConflictException $e) {\n    // Handle conflict\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"handling",children:"Handling"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"try {\n    $product->dispatchSlug($slug, 'products');\n} catch (UrlConflictException $e) {\n    return back()->withErrors(['slug' => 'This URL is already in use.']);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"error-message",children:"Error Message"}),"\n",(0,r.jsxs)(n.p,{children:["The exception message is translated using ",(0,r.jsx)(n.code,{children:"url::base.exceptions.url_conflict"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"trans('url::base.exceptions.url_conflict')\n"})}),"\n",(0,r.jsx)(n.h2,{id:"prevention",children:"Prevention"}),"\n",(0,r.jsxs)(n.p,{children:["Ensure ",(0,r.jsx)(n.code,{children:"getFullUrl()"})," returns unique URLs for different models:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public function getFullUrl(): string\n{\n    // Include unique identifier\n    return '/shop/' . ($this->category->slug ?? 'uncategorized') . '/' . ($this->slug ?? 'product-' . $this->id);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(c.A,{to:"/packages/laravel-url/deep-diving/has-url",children:"HasUrl Trait"})," - Trait that throws this exception"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453(e,n,i){i.d(n,{R:()=>c,x:()=>o});var t=i(96540);const r={},l=t.createContext(r);function c(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);