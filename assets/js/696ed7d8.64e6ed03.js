"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[2960],{28453(e,n,r){r.d(n,{R:()=>a,x:()=>d});var i=r(96540);const l={},o=i.createContext(l);function a(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),i.createElement(o.Provider,{value:n},e.children)}},60051(e,n,r){r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>s,default:()=>u,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"laravel-form/deep-diving/support/io-form","title":"IOForm","description":"The IOForm class is a lightweight helper that normalizes payloads according to form definitions. It ensures that only form-defined keys are kept in data arrays, making it perfect for sanitizing input data and preparing it for storage or rendering.","source":"@site/packages/laravel-form/deep-diving/support/io-form.md","sourceDirName":"laravel-form/deep-diving/support","slug":"/laravel-form/deep-diving/support/io-form","permalink":"/packages/laravel-form/deep-diving/support/io-form","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-form/deep-diving/support/io-form.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"IOForm"},"sidebar":"packagesSidebar","previous":{"title":"FormTypeObjectRequest","permalink":"/packages/laravel-form/deep-diving/requests/form-type-object-request"},"next":{"title":"HasFormType","permalink":"/packages/laravel-form/deep-diving/support/has-form-type"}}');var l=r(74848),o=r(28453),a=r(28774);const d={sidebar_position:1,sidebar_label:"IOForm"},s="IOForm",t={},c=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Available Methods",id:"available-methods",level:2},{value:"Normalize",id:"normalize",level:3},{value:"For Store",id:"for-store",level:3},{value:"To HTML",id:"to-html",level:3},{value:"To Array",id:"to-array",level:3},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Normalize Input Data",id:"normalize-input-data",level:3},{value:"Store Normalized Data",id:"store-normalized-data",level:3},{value:"Render Form with Normalized Values",id:"render-form-with-normalized-values",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Sanitizing Request Data",id:"sanitizing-request-data",level:3},{value:"Storing in JSON Column",id:"storing-in-json-column",level:3},{value:"Excluding Hidden Fields",id:"excluding-hidden-fields",level:3},{value:"When to Use IOForm",id:"when-to-use-ioform",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function m(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"ioform",children:"IOForm"})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"IOForm"})," class is a lightweight helper that normalizes payloads according to form definitions. It ensures that only form-defined keys are kept in data arrays, making it perfect for sanitizing input data and preparing it for storage or rendering."]}),"\n",(0,l.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"JobMetric\\Form\\Support\\IOForm\n"})}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"IOForm"})," provides static methods to normalize data based on form definitions. It filters out any keys that are not defined in the form, ensuring data integrity and preventing unwanted data from being processed."]}),"\n",(0,l.jsx)(n.h2,{id:"available-methods",children:"Available Methods"}),"\n",(0,l.jsx)(n.h3,{id:"normalize",children:"Normalize"}),"\n",(0,l.jsx)(n.p,{children:"Core normalization method that keeps only form-defined keys:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"IOForm::normalize(FormBuilder|Form $form, array $data, bool $includeHidden = true): array\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$form"})," (",(0,l.jsx)(n.code,{children:"FormBuilder|Form"}),"): The form builder or form instance"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$data"})," (",(0,l.jsx)(n.code,{children:"array"}),"): The data array to normalize"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$includeHidden"})," (",(0,l.jsx)(n.code,{children:"bool"}),"): Whether to include hidden fields (default: ",(0,l.jsx)(n.code,{children:"true"}),")"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Returns:"})," ",(0,l.jsx)(n.code,{children:"array"})," - Normalized data array containing only form-defined keys"]}),"\n",(0,l.jsx)(n.h3,{id:"for-store",children:"For Store"}),"\n",(0,l.jsx)(n.p,{children:"Normalize data for storing (e.g., in JSON columns):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"IOForm::forStore(FormBuilder|Form $form, array $data, bool $includeHidden = true): array\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$form"})," (",(0,l.jsx)(n.code,{children:"FormBuilder|Form"}),"): The form builder or form instance"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$data"})," (",(0,l.jsx)(n.code,{children:"array"}),"): The data array to normalize"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$includeHidden"})," (",(0,l.jsx)(n.code,{children:"bool"}),"): Whether to include hidden fields (default: ",(0,l.jsx)(n.code,{children:"true"}),")"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Returns:"})," ",(0,l.jsx)(n.code,{children:"array"})," - Normalized data array ready for storage"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Note:"})," This is an alias for ",(0,l.jsx)(n.code,{children:"normalize()"})," method."]}),"\n",(0,l.jsx)(n.h3,{id:"to-html",children:"To HTML"}),"\n",(0,l.jsx)(n.p,{children:"Render HTML form using normalized values:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"IOForm::toHtml(FormBuilder|Form $form, array $values = [], bool $includeHidden = true): string\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$form"})," (",(0,l.jsx)(n.code,{children:"FormBuilder|Form"}),"): The form builder or form instance"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$values"})," (",(0,l.jsx)(n.code,{children:"array"}),"): Optional array of values to pre-fill"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$includeHidden"})," (",(0,l.jsx)(n.code,{children:"bool"}),"): Whether to include hidden fields (default: ",(0,l.jsx)(n.code,{children:"true"}),")"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Returns:"})," ",(0,l.jsx)(n.code,{children:"string"})," - HTML string"]}),"\n",(0,l.jsx)(n.h3,{id:"to-array",children:"To Array"}),"\n",(0,l.jsx)(n.p,{children:"Get normalized values as plain array:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"IOForm::toArray(FormBuilder|Form $form, array $values = [], bool $includeHidden = true): array\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$form"})," (",(0,l.jsx)(n.code,{children:"FormBuilder|Form"}),"): The form builder or form instance"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$values"})," (",(0,l.jsx)(n.code,{children:"array"}),"): Optional array of values to normalize"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$includeHidden"})," (",(0,l.jsx)(n.code,{children:"bool"}),"): Whether to include hidden fields (default: ",(0,l.jsx)(n.code,{children:"true"}),")"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Returns:"})," ",(0,l.jsx)(n.code,{children:"array"})," - Normalized data array"]}),"\n",(0,l.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,l.jsx)(n.h3,{id:"normalize-input-data",children:"Normalize Input Data"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"use JobMetric\\Form\\FormBuilder;\nuse JobMetric\\Form\\Support\\IOForm;\n\n$form = FormBuilder::make()\n    ->action('/users')\n    ->method('POST')\n    ->tab(function ($tab) {\n        $tab->id('personal')\n            ->label('Personal Information')\n            ->group(function ($group) {\n                $group->label('Basic Info')\n                    ->customField(function ($field) {\n                        $field->text()\n                            ->name('name')\n                            ->label('Name')\n                            ->build();\n                    })\n                    ->customField(function ($field) {\n                        $field->email()\n                            ->name('email')\n                            ->label('Email')\n                            ->build();\n                    })\n                    ->build();\n            })\n            ->build();\n    })\n    ->build();\n\n// Raw input data (may contain extra keys)\n$input = [\n    'name' => 'John Doe',\n    'email' => 'john@example.com',\n    'malicious_field' => 'hack attempt', // This will be filtered out\n    'another_field' => 'unwanted data',   // This will be filtered out\n];\n\n// Normalize data (only keeps form-defined keys)\n$normalized = IOForm::normalize($form, $input);\n// Returns: ['name' => 'John Doe', 'email' => 'john@example.com']\n"})}),"\n",(0,l.jsx)(n.h3,{id:"store-normalized-data",children:"Store Normalized Data"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"$form = FormBuilder::make()\n    // ... form definition\n    ->build();\n\n$input = request()->all();\n\n// Normalize for storage\n$normalized = IOForm::forStore($form, $input);\n\n// Store in database\n$user = User::create($normalized);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"render-form-with-normalized-values",children:"Render Form with Normalized Values"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"$form = FormBuilder::make()\n    // ... form definition\n    ->build();\n\n$values = [\n    'name' => 'John Doe',\n    'email' => 'john@example.com',\n    'extra_field' => 'will be filtered',\n];\n\n// Render with normalized values\n$html = IOForm::toHtml($form, $values);\n"})}),"\n",(0,l.jsx)(n.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,l.jsx)(n.h3,{id:"sanitizing-request-data",children:"Sanitizing Request Data"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"use JobMetric\\Form\\FormBuilder;\nuse JobMetric\\Form\\Support\\IOForm;\n\nclass UserController extends Controller\n{\n    public function store(Request $request)\n    {\n        $form = $this->getUserForm();\n        \n        // Normalize input data (remove unwanted keys)\n        $normalized = IOForm::normalize($form, $request->all());\n        \n        // Create user with only form-defined fields\n        $user = User::create($normalized);\n        \n        return redirect()->route('users.show', $user);\n    }\n\n    protected function getUserForm(): Form\n    {\n        return FormBuilder::make()\n            ->action('/users')\n            ->method('POST')\n            ->tab(function ($tab) {\n                $tab->id('personal')\n                    ->label('Personal Information')\n                    ->group(function ($group) {\n                        $group->label('Basic Info')\n                            ->customField(function ($field) {\n                                $field->text()\n                                    ->name('name')\n                                    ->label('Name')\n                                    ->build();\n                            })\n                            ->customField(function ($field) {\n                                $field->email()\n                                    ->name('email')\n                                    ->label('Email')\n                                    ->build();\n                            })\n                            ->build();\n                    })\n                    ->build();\n            })\n            ->build();\n    }\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"storing-in-json-column",children:"Storing in JSON Column"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"$form = FormBuilder::make()\n    // ... form definition\n    ->build();\n\n$input = request()->all();\n\n// Normalize for JSON storage\n$normalized = IOForm::forStore($form, $input);\n\n// Store in JSON column\n$model->form_data = $normalized;\n$model->save();\n"})}),"\n",(0,l.jsx)(n.h3,{id:"excluding-hidden-fields",children:"Excluding Hidden Fields"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"$form = FormBuilder::make()\n    ->hiddenCustomField(function ($field) {\n        $field->hidden()\n            ->name('user_id')\n            ->value(auth()->id())\n            ->build();\n    })\n    // ... other fields\n    ->build();\n\n$input = request()->all();\n\n// Normalize excluding hidden fields\n$normalized = IOForm::normalize($form, $input, false);\n"})}),"\n",(0,l.jsx)(n.h2,{id:"when-to-use-ioform",children:"When to Use IOForm"}),"\n",(0,l.jsxs)(n.p,{children:["Use ",(0,l.jsx)(n.code,{children:"IOForm"})," when you need to:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Data Sanitization"}),": Filter out unwanted keys from input data"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Data Integrity"}),": Ensure only form-defined fields are processed"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Security"}),": Prevent malicious or unwanted data from being stored"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Consistency"}),": Maintain consistent data structure based on form definitions"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Storage"}),": Prepare data for storage in JSON columns or other formats"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(a.A,{to:"/packages/laravel-form/deep-diving/form",children:"Form"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(a.A,{to:"/packages/laravel-form/deep-diving/form-builder",children:"FormBuilder"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(a.A,{to:"/packages/laravel-form/deep-diving/requests/form-builder-request",children:"FormBuilderRequest"}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(m,{...e})}):m(e)}}}]);