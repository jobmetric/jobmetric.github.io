"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[5020],{4618(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"laravel-event-system/deep-diving/resources/event-system-resource","title":"EventSystemResource","description":"The EventSystemResource transforms an Event model into a JSON-serializable array suitable for API responses. It ensures that all relevant fields from the model are exposed in a consistent format, including formatted timestamps and key configuration values.","source":"@site/packages/laravel-event-system/deep-diving/resources/event-system-resource.md","sourceDirName":"laravel-event-system/deep-diving/resources","slug":"/laravel-event-system/deep-diving/resources/event-system-resource","permalink":"/packages/laravel-event-system/deep-diving/resources/event-system-resource","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-event-system/deep-diving/resources/event-system-resource.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"sidebar_label":"EventSystemResource"},"sidebar":"packagesSidebar","previous":{"title":"StoreEventSystemRequest","permalink":"/packages/laravel-event-system/deep-diving/requests/store-event-system-request"},"next":{"title":"ClassExistRule","permalink":"/packages/laravel-event-system/deep-diving/rules/class-exist-rule"}}');var r=s(4848),i=s(8453);const l={sidebar_position:3,sidebar_label:"EventSystemResource"},o="EventSystemResource",c={},a=[{value:"When to Use EventSystemResource",id:"when-to-use-eventsystemresource",level:2},{value:"Overview",id:"overview",level:2},{value:"Namespace",id:"namespace",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Resource Structure",id:"resource-structure",level:2},{value:"Fields",id:"fields",level:2},{value:"<code>id</code> (integer)",id:"id-integer",level:3},{value:"<code>name</code> (string)",id:"name-string",level:3},{value:"<code>description</code> (string|null)",id:"description-stringnull",level:3},{value:"<code>event</code> (string)",id:"event-string",level:3},{value:"<code>listener</code> (string)",id:"listener-string",level:3},{value:"<code>priority</code> (integer)",id:"priority-integer",level:3},{value:"<code>status</code> (boolean)",id:"status-boolean",level:3},{value:"<code>created_at</code> (string)",id:"created_at-string",level:3},{value:"<code>updated_at</code> (string)",id:"updated_at-string",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"In Controller",id:"in-controller",level:3},{value:"With Pagination",id:"with-pagination",level:3},{value:"In Service Response",id:"in-service-response",level:3},{value:"Resource Collection",id:"resource-collection",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"eventsystemresource",children:"EventSystemResource"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"EventSystemResource"})," transforms an ",(0,r.jsx)(n.code,{children:"Event"})," model into a JSON-serializable array suitable for API responses. It ensures that all relevant fields from the model are exposed in a consistent format, including formatted timestamps and key configuration values."]}),"\n",(0,r.jsx)(n.h2,{id:"when-to-use-eventsystemresource",children:"When to Use EventSystemResource"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Use ",(0,r.jsx)(n.code,{children:"EventSystemResource"})," when you need:"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API responses"}),": Transform event models for JSON API responses"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consistent formatting"}),": Ensure all event data follows the same structure"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timestamp formatting"}),": Format timestamps in a consistent format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data transformation"}),": Expose only necessary fields in API responses"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Resource collections"}),": Use with resource collections for paginated responses"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example scenarios:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"REST API endpoints returning event data"}),"\n",(0,r.jsx)(n.li,{children:"Admin panel APIs for event management"}),"\n",(0,r.jsx)(n.li,{children:"Event listing and detail endpoints"}),"\n",(0,r.jsx)(n.li,{children:"Export functionality for event configurations"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"EventSystemResource"})," provides:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Field mapping"}),": Maps all model fields to JSON structure"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timestamp formatting"}),": Formats dates in ",(0,r.jsx)(n.code,{children:"Y-m-d H:i:s"})," format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consistent structure"}),": Ensures all responses follow the same format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type safety"}),": Properly casts all field types"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource\n"})}),"\n",(0,r.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(n.p,{children:"Use the resource in controllers or service classes:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\nuse JobMetric\\EventSystem\\Models\\Event;\n\n// Single resource\n$event = Event::find(1);\nreturn EventSystemResource::make($event);\n\n// Resource collection\n$events = Event::all();\nreturn EventSystemResource::collection($events);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"resource-structure",children:"Resource Structure"}),"\n",(0,r.jsx)(n.p,{children:"The resource transforms the model into the following JSON structure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "id": 1,\n    "name": "user.created",\n    "description": "Send welcome email when user registers",\n    "event": "App\\\\Events\\\\UserCreated",\n    "listener": "App\\\\Listeners\\\\SendWelcomeEmail",\n    "priority": 10,\n    "status": true,\n    "created_at": "2024-01-01 12:00:00",\n    "updated_at": "2024-01-01 12:00:00"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"fields",children:"Fields"}),"\n",(0,r.jsxs)(n.h3,{id:"id-integer",children:[(0,r.jsx)(n.code,{children:"id"})," (integer)"]}),"\n",(0,r.jsx)(n.p,{children:"Unique identifier of the event-listener entry."}),"\n",(0,r.jsxs)(n.h3,{id:"name-string",children:[(0,r.jsx)(n.code,{children:"name"})," (string)"]}),"\n",(0,r.jsx)(n.p,{children:"Human-readable unique name for the event binding."}),"\n",(0,r.jsxs)(n.h3,{id:"description-stringnull",children:[(0,r.jsx)(n.code,{children:"description"})," (string|null)"]}),"\n",(0,r.jsx)(n.p,{children:"Optional description for the entry."}),"\n",(0,r.jsxs)(n.h3,{id:"event-string",children:[(0,r.jsx)(n.code,{children:"event"})," (string)"]}),"\n",(0,r.jsx)(n.p,{children:"Fully qualified class name of the event."}),"\n",(0,r.jsxs)(n.h3,{id:"listener-string",children:[(0,r.jsx)(n.code,{children:"listener"})," (string)"]}),"\n",(0,r.jsx)(n.p,{children:"Fully qualified class name of the listener."}),"\n",(0,r.jsxs)(n.h3,{id:"priority-integer",children:[(0,r.jsx)(n.code,{children:"priority"})," (integer)"]}),"\n",(0,r.jsx)(n.p,{children:"Listener execution priority. Lower values execute earlier."}),"\n",(0,r.jsxs)(n.h3,{id:"status-boolean",children:[(0,r.jsx)(n.code,{children:"status"})," (boolean)"]}),"\n",(0,r.jsxs)(n.p,{children:["Whether the listener is active (",(0,r.jsx)(n.code,{children:"true"}),") or disabled (",(0,r.jsx)(n.code,{children:"false"}),")."]}),"\n",(0,r.jsxs)(n.h3,{id:"created_at-string",children:[(0,r.jsx)(n.code,{children:"created_at"})," (string)"]}),"\n",(0,r.jsxs)(n.p,{children:["Timestamp when the record was created, formatted as ",(0,r.jsx)(n.code,{children:"Y-m-d H:i:s"}),"."]}),"\n",(0,r.jsxs)(n.h3,{id:"updated_at-string",children:[(0,r.jsx)(n.code,{children:"updated_at"})," (string)"]}),"\n",(0,r.jsxs)(n.p,{children:["Timestamp when the record was last updated, formatted as ",(0,r.jsx)(n.code,{children:"Y-m-d H:i:s"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,r.jsx)(n.h3,{id:"in-controller",children:"In Controller"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"namespace App\\Http\\Controllers\\Admin;\n\nuse App\\Http\\Controllers\\Controller;\nuse JobMetric\\EventSystem\\Facades\\EventSystem;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\n\nclass EventSystemController extends Controller\n{\n    public function index()\n    {\n        $events = EventSystem::paginate();\n\n        return EventSystemResource::collection($events);\n    }\n\n    public function show(int $id)\n    {\n        $event = EventSystem::query()->findOrFail($id);\n\n        return EventSystemResource::make($event);\n    }\n\n    public function store(Request $request)\n    {\n        $response = EventSystem::store($request->all());\n\n        if ($response->isSuccess()) {\n            return EventSystemResource::make($response->getData())\n                ->response()\n                ->setStatusCode(201);\n        }\n\n        return response()->json($response->toArray(), 422);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"with-pagination",children:"With Pagination"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Facades\\EventSystem;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\n\n$paginatedEvents = EventSystem::paginate(['status' => true], 15);\n\nreturn EventSystemResource::collection($paginatedEvents)\n    ->response()\n    ->getData();\n"})}),"\n",(0,r.jsx)(n.h3,{id:"in-service-response",children:"In Service Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Facades\\EventSystem;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\n\n$response = EventSystem::store([\n    'name' => 'user.created',\n    'event' => App\\Events\\UserCreated::class,\n    'listener' => App\\Listeners\\SendWelcomeEmail::class,\n]);\n\nif ($response->isSuccess()) {\n    $resource = EventSystemResource::make($response->getData());\n    return response()->json($resource->toArray(request()));\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"resource-collection",children:"Resource Collection"}),"\n",(0,r.jsx)(n.p,{children:"Use with collections for multiple events:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Models\\Event;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\n\n$events = Event::where('status', true)->get();\n\nreturn EventSystemResource::collection($events);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "data": [\n        {\n            "id": 1,\n            "name": "user.created",\n            "description": "Send welcome email",\n            "event": "App\\\\Events\\\\UserCreated",\n            "listener": "App\\\\Listeners\\\\SendWelcomeEmail",\n            "priority": 10,\n            "status": true,\n            "created_at": "2024-01-01 12:00:00",\n            "updated_at": "2024-01-01 12:00:00"\n        },\n        {\n            "id": 2,\n            "name": "order.completed",\n            "description": "Send order confirmation",\n            "event": "App\\\\Events\\\\OrderCompleted",\n            "listener": "App\\\\Listeners\\\\SendOrderConfirmation",\n            "priority": 5,\n            "status": true,\n            "created_at": "2024-01-01 12:00:00",\n            "updated_at": "2024-01-01 12:00:00"\n        }\n    ]\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/packages/laravel-event-system/deep-diving/event-system",children:"EventSystem"})," - Service for managing event bindings"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>o});var t=s(6540);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);