"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[7856],{28453(e,n,a){a.d(n,{R:()=>r,x:()=>t});var l=a(96540);const s={},i=l.createContext(s);function r(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(i.Provider,{value:n},e.children)}},70279(e,n,a){a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>g,frontMatter:()=>t,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"laravel-language/deep-diving/rules/language-exist-rule","title":"LanguageExistRule","description":"The LanguageExistRule validates that a given language ID exists and matches the expected locale.","source":"@site/packages/laravel-language/deep-diving/rules/language-exist-rule.md","sourceDirName":"laravel-language/deep-diving/rules","slug":"/laravel-language/deep-diving/rules/language-exist-rule","permalink":"/packages/laravel-language/deep-diving/rules/language-exist-rule","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-language/deep-diving/rules/language-exist-rule.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"LanguageExistRule"},"sidebar":"packagesSidebar","previous":{"title":"CheckLocaleRule","permalink":"/packages/laravel-language/deep-diving/rules/check-locale-rule"},"next":{"title":"CheckFutureDateRule","permalink":"/packages/laravel-language/deep-diving/rules/check-future-date-rule"}}');var s=a(74848),i=a(28453),r=a(28774);const t={sidebar_position:2,sidebar_label:"LanguageExistRule"},c="LanguageExistRule",o={},d=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Behavior",id:"behavior",level:2},{value:"When to Use LanguageExistRule",id:"when-to-use-languageexistrule",level:2},{value:"Primary Use Cases",id:"primary-use-cases",level:3},{value:"1. Foreign Key Validation in Related Models",id:"1-foreign-key-validation-in-related-models",level:4},{value:"2. User Language Preference",id:"2-user-language-preference",level:4},{value:"3. Content Localization",id:"3-content-localization",level:4},{value:"4. Multi-Language Content Management",id:"4-multi-language-content-management",level:4},{value:"5. Optional Language Selection",id:"5-optional-language-selection",level:4},{value:"When NOT to Use",id:"when-not-to-use",level:3},{value:"Decision Tree",id:"decision-tree",level:3},{value:"Common Mistakes to Avoid",id:"common-mistakes-to-avoid",level:3},{value:"Comparison with CheckLocaleRule",id:"comparison-with-checklocalerule",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"languageexistrule",children:"LanguageExistRule"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"LanguageExistRule"})," validates that a given language ID exists and matches the expected locale."]}),"\n",(0,s.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"JobMetric\\Language\\Rules\\LanguageExistRule\n"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"This rule ensures that:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Language ID exists in the languages table"}),"\n",(0,s.jsx)(n.li,{children:"Language matches the expected locale"}),"\n",(0,s.jsx)(n.li,{children:"Can optionally allow zero (0) to bypass validation"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"use JobMetric\\Language\\Rules\\LanguageExistRule;\n\n$request->validate([\n    'language_id' => ['required', new LanguageExistRule('fa')],\n]);\n\n// Disallow zero\n$request->validate([\n    'language_id' => ['required', new LanguageExistRule('en', false)],\n]);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$locale"})," (",(0,s.jsx)(n.code,{children:"string"}),"): Two-letter lowercase locale (e.g., 'fa', 'en')"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$allowZero"})," (",(0,s.jsx)(n.code,{children:"bool"}),"): Whether to allow 0 to bypass validation (default: true)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"behavior",children:"Behavior"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Skips null/empty values (let 'required' handle them)"}),"\n",(0,s.jsxs)(n.li,{children:["Allows 0 if ",(0,s.jsx)(n.code,{children:"$allowZero"})," is true"]}),"\n",(0,s.jsx)(n.li,{children:"Validates that ID exists with the given locale"}),"\n",(0,s.jsx)(n.li,{children:"Works with both string and integer values"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use-languageexistrule",children:"When to Use LanguageExistRule"}),"\n",(0,s.jsx)(n.h3,{id:"primary-use-cases",children:"Primary Use Cases"}),"\n",(0,s.jsx)(n.h4,{id:"1-foreign-key-validation-in-related-models",children:"1. Foreign Key Validation in Related Models"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When"}),": You have models that reference languages via ",(0,s.jsx)(n.code,{children:"language_id"})," foreign key."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ensures the language actually exists"}),"\n",(0,s.jsx)(n.li,{children:"Validates the language matches expected locale"}),"\n",(0,s.jsx)(n.li,{children:"Prevents orphaned records"}),"\n",(0,s.jsx)(n.li,{children:"Maintains referential integrity"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// app/Models/Post.php - Post has a language_id\n// app/Http/Requests/StorePostRequest.php\nuse JobMetric\\Language\\Rules\\LanguageExistRule;\n\npublic function rules(): array\n{\n    return [\n        'title' => 'required|string',\n        'content' => 'required|string',\n        'language_id' => ['required', 'integer', new LanguageExistRule('fa')],\n    ];\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Real-World Scenario"}),": Blog post creation form. User selects language - rule ensures the selected language exists and is Persian (fa)."]}),"\n",(0,s.jsx)(n.h4,{id:"2-user-language-preference",children:"2. User Language Preference"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When"}),": Users can set their preferred language in their profile."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why"}),": Ensures the selected language exists in the system."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// app/Http/Requests/UpdateUserProfileRequest.php\nuse JobMetric\\Language\\Rules\\LanguageExistRule;\n\npublic function rules(): array\n{\n    return [\n        'name' => 'required|string',\n        'preferred_language_id' => [\n            'nullable',\n            'integer',\n            new LanguageExistRule(app()->getLocale(), false) // Don't allow 0\n        ],\n    ];\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Real-World Scenario"}),": User settings page where user can change their preferred language. Rule validates the selection."]}),"\n",(0,s.jsx)(n.h4,{id:"3-content-localization",children:"3. Content Localization"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When"}),": Creating/updating content that must be associated with a specific language."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why"}),": Ensures content is linked to a valid, active language."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// app/Http/Requests/StoreProductRequest.php\nuse JobMetric\\Language\\Rules\\LanguageExistRule;\n\npublic function rules(): array\n{\n    return [\n        'name' => 'required|string',\n        'description' => 'required|string',\n        'language_id' => [\n            'required',\n            'integer',\n            new LanguageExistRule('en') // Must be English\n        ],\n    ];\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Real-World Scenario"}),": E-commerce product creation. Products must be in English - rule enforces this."]}),"\n",(0,s.jsx)(n.h4,{id:"4-multi-language-content-management",children:"4. Multi-Language Content Management"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When"}),": Managing translations where each translation must reference a valid language."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why"}),": Prevents creating translations for non-existent languages."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// app/Http/Requests/StoreTranslationRequest.php\nuse JobMetric\\Language\\Rules\\LanguageExistRule;\n\npublic function rules(): array\n{\n    $locale = $this->input('locale', app()->getLocale());\n    \n    return [\n        'key' => 'required|string',\n        'value' => 'required|string',\n        'language_id' => [\n            'required',\n            'integer',\n            new LanguageExistRule($locale)\n        ],\n    ];\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Real-World Scenario"}),": Translation management system. Each translation must reference a valid language matching the locale."]}),"\n",(0,s.jsx)(n.h4,{id:"5-optional-language-selection",children:"5. Optional Language Selection"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When"}),": Language selection is optional (can be null or 0)."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why"}),": The ",(0,s.jsx)(n.code,{children:"allowZero"})," parameter allows 0 to bypass validation for optional fields."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// app/Http/Requests/StoreCategoryRequest.php\nuse JobMetric\\Language\\Rules\\LanguageExistRule;\n\npublic function rules(): array\n{\n    return [\n        'name' => 'required|string',\n        'language_id' => [\n            'nullable',\n            'integer',\n            new LanguageExistRule('en', true) // Allow 0 for \"no language\"\n        ],\n    ];\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Real-World Scenario"}),": Category creation where language is optional. Rule allows 0 (no language) or validates existing language."]}),"\n",(0,s.jsx)(n.h3,{id:"when-not-to-use",children:"When NOT to Use"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Direct Model Queries"}),": Don't use for checking existence in code - use ",(0,s.jsx)(n.code,{children:"Language::find()"})," instead"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"API Responses"}),": Not needed when returning language data"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Display Logic"}),": Don't use for showing language information"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Locale Validation"}),": Use ",(0,s.jsx)(n.code,{children:"CheckLocaleRule"})," for locale format validation, not this rule"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"decision-tree",children:"Decision Tree"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Do you need to validate a language_id input?\n\u251c\u2500 Yes \u2192 Is the language_id required?\n\u2502  \u251c\u2500 Yes \u2192 Use LanguageExistRule($locale, false) // Don't allow 0\n\u2502  \u2514\u2500 No \u2192 Use LanguageExistRule($locale, true) // Allow 0\n\u2514\u2500 No \u2192 Don't use this rule\n"})}),"\n",(0,s.jsx)(n.h3,{id:"common-mistakes-to-avoid",children:"Common Mistakes to Avoid"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Wrong locale parameter"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// \u274c Wrong - locale doesn't match expected language\nnew LanguageExistRule('en') // When expecting 'fa'\n\n// \u2705 Correct - locale matches expected language\nnew LanguageExistRule('fa')\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Not allowing zero when needed"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// \u274c Wrong - will fail if user selects \"no language\"\n'language_id' => [new LanguageExistRule('en', false)]\n\n// \u2705 Correct - allows 0 for optional language\n'language_id' => ['nullable', new LanguageExistRule('en', true)]\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Using for locale validation"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// \u274c Wrong - this rule validates language_id, not locale\n'locale' => [new LanguageExistRule('en')]\n\n// \u2705 Correct - use CheckLocaleRule for locale\n'locale' => [new CheckLocaleRule]\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Missing 'required' or 'nullable'"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// \u274c Wrong - unclear if field is required\n'language_id' => [new LanguageExistRule('en')]\n\n// \u2705 Correct - explicit requirement\n'language_id' => ['required', 'integer', new LanguageExistRule('en')]\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"comparison-with-checklocalerule",children:"Comparison with CheckLocaleRule"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Rule"}),(0,s.jsx)(n.th,{children:"Validates"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"CheckLocaleRule"})}),(0,s.jsx)(n.td,{children:"Locale format and uniqueness"}),(0,s.jsx)(n.td,{children:"Creating/updating language records"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"LanguageExistRule"})}),(0,s.jsx)(n.td,{children:"Language ID existence and locale match"}),(0,s.jsx)(n.td,{children:"Foreign key validation in related models"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(r.A,{to:"/packages/laravel-language/deep-diving/rules/check-locale-rule",children:"CheckLocaleRule"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(r.A,{to:"/packages/laravel-language/deep-diving/models/language",children:"Language Model"}),"\n"]}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);