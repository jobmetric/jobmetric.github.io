"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[2121],{3421(e,n,l){l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"laravel-url/deep-diving/slug-exist-rule","title":"SlugExistRule","description":"The SlugExistRule is a validation rule that ensures a slug is unique per model type and optional collection, excluding soft-deleted rows and optionally excluding the current record (useful for update forms).","source":"@site/packages/laravel-url/deep-diving/slug-exist-rule.md","sourceDirName":"laravel-url/deep-diving","slug":"/laravel-url/deep-diving/slug-exist-rule","permalink":"/packages/laravel-url/deep-diving/slug-exist-rule","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-url/deep-diving/slug-exist-rule.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"sidebar_label":"SlugExistRule"},"sidebar":"packagesSidebar","previous":{"title":"Events","permalink":"/packages/laravel-url/deep-diving/events"},"next":{"title":"UrlTypeObjectRequest","permalink":"/packages/laravel-url/deep-diving/url-type-object-request"}}');var i=l(74848),r=l(28453),t=l(28774);const a={sidebar_position:5,sidebar_label:"SlugExistRule"},d="SlugExistRule",c={},u=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"When to Use SlugExistRule",id:"when-to-use-slugexistrule",level:2},{value:"Constructor",id:"constructor",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Parameter Details",id:"parameter-details",level:3},{value:"<code>$className</code> (string, required)",id:"classname-string-required",level:4},{value:"<code>$collection</code> (string|null, default: <code>null</code>)",id:"collection-stringnull-default-null",level:4},{value:"<code>$objectId</code> (int|null, default: <code>null</code>)",id:"objectid-intnull-default-null",level:4},{value:"How It Works",id:"how-it-works",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"In Form Request (Create)",id:"in-form-request-create",level:3},{value:"In Form Request (Update)",id:"in-form-request-update",level:3},{value:"Direct Validation",id:"direct-validation",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Example 1: Simple Uniqueness",id:"example-1-simple-uniqueness",level:3},{value:"Example 2: With Collection",id:"example-2-with-collection",level:3},{value:"Example 3: Update with Exclusion",id:"example-3-update-with-exclusion",level:3},{value:"Example 4: Dynamic Collection",id:"example-4-dynamic-collection",level:3},{value:"Example 5: Multiple Models",id:"example-5-multiple-models",level:3},{value:"Example 6: Conditional Validation",id:"example-6-conditional-validation",level:3},{value:"Example 7: Nested Payloads",id:"example-7-nested-payloads",level:3},{value:"Example 8: Programmatic Validation",id:"example-8-programmatic-validation",level:3},{value:"Error Messages",id:"error-messages",level:2},{value:"Custom Error Messages",id:"custom-error-messages",level:3},{value:"Custom Translation Key",id:"custom-translation-key",level:3},{value:"When to Use",id:"when-to-use",level:2},{value:"When NOT to Use",id:"when-not-to-use",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Always Use Class Constants",id:"1-always-use-class-constants",level:3},{value:"2. Exclude Current Record on Updates",id:"2-exclude-current-record-on-updates",level:3},{value:"3. Combine with Type Validation",id:"3-combine-with-type-validation",level:3},{value:"4. Match the 100-Char Limit",id:"4-match-the-100-char-limit",level:3},{value:"Common Mistakes",id:"common-mistakes",level:2},{value:"Mistake 1: Not Excluding Current Record on Updates",id:"mistake-1-not-excluding-current-record-on-updates",level:3},{value:"Mistake 2: Missing Type Validation",id:"mistake-2-missing-type-validation",level:3},{value:"Mistake 3: Not Matching Char Limit",id:"mistake-3-not-matching-char-limit",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Database Queries",id:"database-queries",level:3},{value:"Optimization Tips",id:"optimization-tips",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"slugexistrule",children:"SlugExistRule"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"SlugExistRule"})," is a validation rule that ensures a slug is unique per model type and optional collection, excluding soft-deleted rows and optionally excluding the current record (useful for update forms)."]}),"\n",(0,i.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"JobMetric\\Url\\Rules\\SlugExistRule\n"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"SlugExistRule"})," validates that:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A slug is ",(0,i.jsx)(n.strong,{children:"unique"})," for a given model class and optional collection"]}),"\n",(0,i.jsxs)(n.li,{children:["Only ",(0,i.jsx)(n.strong,{children:"active"})," (non-deleted) slugs are considered"]}),"\n",(0,i.jsxs)(n.li,{children:["The current record can be ",(0,i.jsx)(n.strong,{children:"excluded"})," (for updates)"]}),"\n",(0,i.jsxs)(n.li,{children:["Slug is ",(0,i.jsx)(n.strong,{children:"normalized"})," exactly like ",(0,i.jsx)(n.code,{children:"HasUrl"})," (slugify + trim + limit to 100 chars)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This rule is essential for:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data Integrity"}),": Ensuring slug uniqueness per model type and collection"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Form Validation"}),": Validating slug uniqueness in form requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update Safety"}),": Excluding current record during updates"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Pre-flight Checks"}),": Catching conflicts before calling ",(0,i.jsx)(n.code,{children:"dispatchSlug()"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"when-to-use-slugexistrule",children:"When to Use SlugExistRule"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Use ",(0,i.jsx)(n.code,{children:"SlugExistRule"})," when you need:"]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Form validation"}),": Validate slug uniqueness in form requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Pre-flight checks"}),": Catch conflicts before calling ",(0,i.jsx)(n.code,{children:"dispatchSlug()"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update safety"}),": Exclude current record when updating slugs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Collection scoping"}),": Enforce uniqueness within specific collections"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example scenarios:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Product slug validation in create/update forms"}),"\n",(0,i.jsx)(n.li,{children:"Category slug uniqueness checks"}),"\n",(0,i.jsx)(n.li,{children:"Blog post slug validation"}),"\n",(0,i.jsx)(n.li,{children:"CMS page slug management"}),"\n",(0,i.jsxs)(n.li,{children:["Any model using ",(0,i.jsx)(n.code,{children:"HasUrl"})," that needs slug validation"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"constructor",children:"Constructor"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"public function __construct(\n    string   $className,\n    ?string  $collection = null,\n    ?int     $objectId   = null\n)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$className"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsxs)(n.td,{children:["Model class that uses ",(0,i.jsx)(n.code,{children:"HasUrl"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$collection"})}),(0,i.jsx)(n.td,{children:"string|null"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"null"})}),(0,i.jsx)(n.td,{children:"Optional collection scope"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$objectId"})}),(0,i.jsx)(n.td,{children:"int|null"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"null"})}),(0,i.jsx)(n.td,{children:"Current model ID to exclude (for updates)"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"parameter-details",children:"Parameter Details"}),"\n",(0,i.jsxs)(n.h4,{id:"classname-string-required",children:[(0,i.jsx)(n.code,{children:"$className"})," (string, required)"]}),"\n",(0,i.jsxs)(n.p,{children:["Fully-qualified class name of the model that uses ",(0,i.jsx)(n.code,{children:"HasUrl"})," trait."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Using class constant\nnew SlugExistRule(Product::class, 'products')\n\n// Using string\nnew SlugExistRule('App\\Models\\Product', 'products')\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Requirements:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Class must exist"}),"\n",(0,i.jsxs)(n.li,{children:["Class must use ",(0,i.jsx)(n.code,{children:"HasUrl"})," trait"]}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"collection-stringnull-default-null",children:[(0,i.jsx)(n.code,{children:"$collection"})," (string|null, default: ",(0,i.jsx)(n.code,{children:"null"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Optional collection name to scope uniqueness check."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"'products'           // Check within 'products' collection\n'featured-products'   // Check within 'featured-products' collection\nnull                 // Check within null collection (default)\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"objectid-intnull-default-null",children:[(0,i.jsx)(n.code,{children:"$objectId"})," (int|null, default: ",(0,i.jsx)(n.code,{children:"null"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Current model ID to exclude from uniqueness check. Used when updating existing records."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"null       // No exclusion (for create operations)\n$product->id  // Exclude current product (for update operations)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsx)(n.p,{children:"The rule performs the following steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Normalization"}),": Slug is normalized (slugify + trim + limit to 100 chars)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Query"}),": Checks for active slugs matching:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Same model type"}),"\n",(0,i.jsx)(n.li,{children:"Same slug"}),"\n",(0,i.jsx)(n.li,{children:"Same collection (or both null)"}),"\n",(0,i.jsxs)(n.li,{children:["Excludes current record (if ",(0,i.jsx)(n.code,{children:"objectId"})," provided)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validation"}),": Fails if matching slug exists"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(n.h3,{id:"in-form-request-create",children:"In Form Request (Create)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"namespace App\\Http\\Requests;\n\nuse App\\Models\\Product;\nuse Illuminate\\Foundation\\Http\\FormRequest;\nuse JobMetric\\Url\\Rules\\SlugExistRule;\n\nclass StoreProductRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        return [\n            'name' => ['required', 'string', 'max:255'],\n            'slug' => [\n                'required',\n                'string',\n                'max:100',\n                new SlugExistRule(Product::class, 'products'),\n            ],\n        ];\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"in-form-request-update",children:"In Form Request (Update)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"namespace App\\Http\\Requests;\n\nuse App\\Models\\Product;\nuse Illuminate\\Foundation\\Http\\FormRequest;\nuse JobMetric\\Url\\Rules\\SlugExistRule;\n\nclass UpdateProductRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        $productId = $this->route('product')?->id ?? null;\n\n        return [\n            'name' => ['sometimes', 'string', 'max:255'],\n            'slug' => [\n                'sometimes',\n                'string',\n                'max:100',\n                new SlugExistRule(Product::class, 'products', $productId),\n            ],\n        ];\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"direct-validation",children:"Direct Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"use Illuminate\\Support\\Facades\\Validator;\nuse JobMetric\\Url\\Rules\\SlugExistRule;\n\n$validator = Validator::make($data, [\n    'slug' => [\n        'required',\n        'string',\n        'max:100',\n        new SlugExistRule(Product::class, 'products'),\n    ],\n]);\n\nif ($validator->fails()) {\n    return response()->json($validator->errors(), 422);\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,i.jsx)(n.h3,{id:"example-1-simple-uniqueness",children:"Example 1: Simple Uniqueness"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"$rules = [\n    'slug' => [\n        'required',\n        'string',\n        'max:100',\n        new SlugExistRule(Product::class),\n    ],\n];\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-2-with-collection",children:"Example 2: With Collection"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"$rules = [\n    'slug' => [\n        'required',\n        'string',\n        'max:100',\n        new SlugExistRule(Product::class, 'products'),\n    ],\n];\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-3-update-with-exclusion",children:"Example 3: Update with Exclusion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"$product = $this->route('product');\n\n$rules = [\n    'slug' => [\n        'sometimes',\n        'string',\n        'max:100',\n        new SlugExistRule(Product::class, 'products', $product->id),\n    ],\n];\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-4-dynamic-collection",children:"Example 4: Dynamic Collection"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"$collection = $this->input('slug_collection');\n\n$rules = [\n    'slug' => [\n        'required',\n        'string',\n        'max:100',\n        new SlugExistRule(Product::class, $collection),\n    ],\n];\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-5-multiple-models",children:"Example 5: Multiple Models"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"class StoreProductRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        return [\n            'name' => ['required', 'string'],\n            'slug' => [\n                'required',\n                'string',\n                'max:100',\n                new SlugExistRule(Product::class, 'products'),\n            ],\n        ];\n    }\n}\n\nclass StoreCategoryRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        return [\n            'name' => ['required', 'string'],\n            'slug' => [\n                'required',\n                'string',\n                'max:100',\n                new SlugExistRule(Category::class, 'categories'),\n            ],\n        ];\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-6-conditional-validation",children:"Example 6: Conditional Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"public function rules(): array\n{\n    $rules = [\n        'name' => ['required', 'string'],\n    ];\n\n    // Only validate uniqueness for published products\n    if ($this->input('status') === 'published') {\n        $rules['slug'] = [\n            'required',\n            'string',\n            'max:100',\n            new SlugExistRule(Product::class, 'products'),\n        ];\n    }\n\n    return $rules;\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-7-nested-payloads",children:"Example 7: Nested Payloads"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"return [\n    'product' => ['required', 'array'],\n    'product.slug' => [\n        'required',\n        'string',\n        'max:100',\n        new SlugExistRule(Product::class, $this->input('product.slug_collection')),\n    ],\n];\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-8-programmatic-validation",children:"Example 8: Programmatic Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"use Illuminate\\Support\\Facades\\Validator;\nuse JobMetric\\Url\\Rules\\SlugExistRule;\n\n$data = ['slug' => 'MacBook Pro 14'];\n$rule = new SlugExistRule(Product::class, 'products');\n\n$validator = Validator::make($data, [\n    'slug' => ['required', 'string', 'max:100', $rule],\n]);\n\n$validator->validate(); // throws if collision exists\n"})}),"\n",(0,i.jsx)(n.h2,{id:"error-messages",children:"Error Messages"}),"\n",(0,i.jsxs)(n.p,{children:["The rule uses the translation key ",(0,i.jsx)(n.code,{children:"url::base.rule.exist"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"trans('url::base.rule.exist')\n"})}),"\n",(0,i.jsx)(n.h3,{id:"custom-error-messages",children:"Custom Error Messages"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"public function messages(): array\n{\n    return [\n        'slug.*' => 'This slug is already in use.',\n    ];\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"custom-translation-key",children:"Custom Translation Key"}),"\n",(0,i.jsxs)(n.p,{children:["Override the translation key in ",(0,i.jsx)(n.code,{children:"resources/lang/{locale}/url/base.php"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"return [\n    'rule' => [\n        'exist' => 'This slug is already taken.',\n    ],\n];\n"})}),"\n",(0,i.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"SlugExistRule"})," when:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Form validation"}),": Validating slug uniqueness in form requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Pre-flight checks"}),": Catching conflicts before calling ",(0,i.jsx)(n.code,{children:"dispatchSlug()"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update safety"}),": Excluding current record when updating"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"when-not-to-use",children:"When NOT to Use"}),"\n",(0,i.jsx)(n.p,{children:"Avoid using this rule when:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Global uniqueness"}),": If you need global uniqueness (not per model type), use Laravel's ",(0,i.jsx)(n.code,{children:"unique"})," rule"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Non-slug fields"}),": For regular database columns, use standard validation rules"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance critical"}),": For high-frequency validations, consider caching or database indexes"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"1-always-use-class-constants",children:"1. Always Use Class Constants"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Good: Use class constants\nnew SlugExistRule(Product::class, 'products')\n\n// Avoid: String literals\nnew SlugExistRule('App\\Models\\Product', 'products')\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-exclude-current-record-on-updates",children:"2. Exclude Current Record on Updates"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Good: Exclude current record\nnew SlugExistRule(Product::class, 'products', $product->id)\n\n// Avoid: Not excluding on updates\nnew SlugExistRule(Product::class, 'products')  // May fail on update\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-combine-with-type-validation",children:"3. Combine with Type Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Good: Combined with type validation\n'slug' => [\n    'required',\n    'string',\n    'max:100',\n    new SlugExistRule(Product::class, 'products'),\n]\n\n// Avoid: Missing type validation\n'slug' => [\n    new SlugExistRule(Product::class, 'products'),\n]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-match-the-100-char-limit",children:"4. Match the 100-Char Limit"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Good: Match internal normalization\n'slug' => [\n    'required',\n    'string',\n    'max:100',\n    new SlugExistRule(Product::class, 'products'),\n]\n"})}),"\n",(0,i.jsx)(n.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,i.jsx)(n.h3,{id:"mistake-1-not-excluding-current-record-on-updates",children:"Mistake 1: Not Excluding Current Record on Updates"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Bad: May fail when updating with same value\nnew SlugExistRule(Product::class, 'products')\n\n// Good: Exclude current record\nnew SlugExistRule(Product::class, 'products', $product->id)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"mistake-2-missing-type-validation",children:"Mistake 2: Missing Type Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Bad: Missing type validation\n'slug' => [\n    new SlugExistRule(Product::class, 'products'),\n]\n\n// Good: Combined with type validation\n'slug' => [\n    'required',\n    'string',\n    'max:100',\n    new SlugExistRule(Product::class, 'products'),\n]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"mistake-3-not-matching-char-limit",children:"Mistake 3: Not Matching Char Limit"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Bad: Different limit\n'slug' => [\n    'required',\n    'string',\n    'max:255',  // Doesn't match internal 100-char limit\n    new SlugExistRule(Product::class, 'products'),\n]\n\n// Good: Match internal limit\n'slug' => [\n    'required',\n    'string',\n    'max:100',\n    new SlugExistRule(Product::class, 'products'),\n]\n"})}),"\n",(0,i.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,i.jsx)(n.h3,{id:"database-queries",children:"Database Queries"}),"\n",(0,i.jsx)(n.p,{children:"The rule performs a database query for each validation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Each rule instance = 1 database query\n$rules = [\n    'slug' => new SlugExistRule(Product::class, 'products'),\n];\n// = 1 database query\n"})}),"\n",(0,i.jsx)(n.h3,{id:"optimization-tips",children:"Optimization Tips"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add Database Indexes"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Migration\nSchema::table('slugs', function (Blueprint $table) {\n    $table->index(['slugable_type', 'slug', 'collection', 'deleted_at']);\n});\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cache Validation Results"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Cache unique slugs to reduce database queries\n"})}),"\n",(0,i.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(t.A,{to:"/packages/laravel-url/deep-diving/has-url",children:"HasUrl Trait"})," - Trait that manages slugs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(t.A,{to:"/packages/laravel-url/deep-diving/url-type-object-request",children:"UrlTypeObjectRequest"})," - Request trait that uses this rule"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453(e,n,l){l.d(n,{R:()=>t,x:()=>a});var s=l(96540);const i={},r=s.createContext(i);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);