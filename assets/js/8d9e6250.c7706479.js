"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[4954],{23303(e,s,d){d.r(s),d.d(s,{assets:()=>r,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"laravel-location/deep-diving/has-address","title":"HasAddress Trait","description":"The HasAddress trait allows you to attach multiple addresses to any Eloquent model using a polymorphic pivot table (address_relations).","source":"@site/packages/laravel-location/deep-diving/has-address.md","sourceDirName":"laravel-location/deep-diving","slug":"/laravel-location/deep-diving/has-address","permalink":"/packages/laravel-location/deep-diving/has-address","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-location/deep-diving/has-address.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"HasAddress"},"sidebar":"packagesSidebar","previous":{"title":"HasLocation","permalink":"/packages/laravel-location/deep-diving/has-location"},"next":{"title":"HasGeoArea","permalink":"/packages/laravel-location/deep-diving/has-geo-area"}}');var n=d(74848),i=d(28453);const a={sidebar_position:2,sidebar_label:"HasAddress"},t="HasAddress Trait",r={},o=[{value:"Namespace",id:"namespace",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Relationships",id:"relationships",level:2},{value:"addressRelations()",id:"addressrelations",level:3},{value:"Read APIs",id:"read-apis",level:2},{value:"addresses(?string $collection = null, bool $withTrashed = false)",id:"addressesstring-collection--null-bool-withtrashed--false",level:3},{value:"hasAddress(int $address_id, ?string $collection = null)",id:"hasaddressint-address_id-string-collection--null",level:3},{value:"getAddresses(?string $collection = null, bool $withTrashed = false)",id:"getaddressesstring-collection--null-bool-withtrashed--false",level:3},{value:"getAddressById(int $address_id, ?string $collection = null, bool $withTrashed = false)",id:"getaddressbyidint-address_id-string-collection--null-bool-withtrashed--false",level:3},{value:"getAddressByCollection(string $collection, bool $withTrashed = false)",id:"getaddressbycollectionstring-collection-bool-withtrashed--false",level:3},{value:"Mutation APIs",id:"mutation-apis",level:2},{value:"storeAddress(array $data, ?string $collection = null)",id:"storeaddressarray-data-string-collection--null",level:3},{value:"attachAddress(int $address_id, ?string $collection = null)",id:"attachaddressint-address_id-string-collection--null",level:3},{value:"detachAddress(int $address_id, ?string $collection = null)",id:"detachaddressint-address_id-string-collection--null",level:3},{value:"detachAllAddresses(?string $collection = null)",id:"detachalladdressesstring-collection--null",level:3},{value:"syncAddresses(array $address_ids, ?string $collection = null)",id:"syncaddressesarray-address_ids-string-collection--null",level:3},{value:"updateAddress(int $address_id, array $data)",id:"updateaddressint-address_id-array-data",level:3},{value:"deleteAddress(int $address_id)",id:"deleteaddressint-address_id",level:3},{value:"Backward compatibility aliases",id:"backward-compatibility-aliases",level:2}];function c(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"hasaddress-trait",children:"HasAddress Trait"})}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"HasAddress"})," trait allows you to attach ",(0,n.jsx)(s.strong,{children:"multiple addresses"})," to any Eloquent model using a polymorphic pivot table (",(0,n.jsx)(s.code,{children:"address_relations"}),")."]}),"\n",(0,n.jsxs)(s.p,{children:["It supports optional ",(0,n.jsx)(s.strong,{children:"collections"})," (e.g. ",(0,n.jsx)(s.code,{children:"billing"}),", ",(0,n.jsx)(s.code,{children:"shipping"}),") and can include soft-deleted addresses in read operations."]}),"\n",(0,n.jsx)(s.h2,{id:"namespace",children:"Namespace"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-php",children:"JobMetric\\Location\\HasAddress\n"})}),"\n",(0,n.jsx)(s.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-php",children:"use Illuminate\\Database\\Eloquent\\Model;\nuse JobMetric\\Location\\HasAddress;\n\nclass User extends Model\n{\n    use HasAddress;\n}\n\n$user = User::find(1);\n\n// Store and attach a new address to the \"shipping\" collection\n$user->storeAddress([\n    'country_id' => 1,\n    'province_id' => 10,\n    'city_id' => 120,\n    'district_id' => 900,\n\n    'address' => [\n        'street' => 'Valiasr St',\n        'number' => '12',\n    ],\n\n    'postcode' => '1234567890',\n    'info' => [\n        'name' => 'Warehouse',\n        'mobile_prefix' => '+98',\n        'mobile' => '9120000000',\n    ],\n], 'shipping');\n\n// Read addresses\n$user->addresses();              // all\n$user->addresses('shipping');    // only \"shipping\"\n"})}),"\n",(0,n.jsx)(s.h2,{id:"relationships",children:"Relationships"}),"\n",(0,n.jsx)(s.h3,{id:"addressrelations",children:"addressRelations()"}),"\n",(0,n.jsxs)(s.p,{children:["Returns a ",(0,n.jsx)(s.code,{children:"MorphMany"})," of ",(0,n.jsx)(s.code,{children:"AddressRelation"})," items."]}),"\n",(0,n.jsx)(s.h2,{id:"read-apis",children:"Read APIs"}),"\n",(0,n.jsx)(s.h3,{id:"addressesstring-collection--null-bool-withtrashed--false",children:"addresses(?string $collection = null, bool $withTrashed = false)"}),"\n",(0,n.jsxs)(s.p,{children:["Returns a ",(0,n.jsx)(s.code,{children:"Collection"})," of ",(0,n.jsx)(s.code,{children:"Address"})," models attached to the entity."]}),"\n",(0,n.jsx)(s.h3,{id:"hasaddressint-address_id-string-collection--null",children:"hasAddress(int $address_id, ?string $collection = null)"}),"\n",(0,n.jsx)(s.p,{children:"Checks if an address is attached."}),"\n",(0,n.jsx)(s.h3,{id:"getaddressesstring-collection--null-bool-withtrashed--false",children:"getAddresses(?string $collection = null, bool $withTrashed = false)"}),"\n",(0,n.jsxs)(s.p,{children:["Returns an ",(0,n.jsx)(s.code,{children:"AnonymousResourceCollection"})," of ",(0,n.jsx)(s.code,{children:"AddressResource"}),"."]}),"\n",(0,n.jsx)(s.h3,{id:"getaddressbyidint-address_id-string-collection--null-bool-withtrashed--false",children:"getAddressById(int $address_id, ?string $collection = null, bool $withTrashed = false)"}),"\n",(0,n.jsxs)(s.p,{children:["Returns a single ",(0,n.jsx)(s.code,{children:"AddressResource"})," if the address is attached."]}),"\n",(0,n.jsx)(s.h3,{id:"getaddressbycollectionstring-collection-bool-withtrashed--false",children:"getAddressByCollection(string $collection, bool $withTrashed = false)"}),"\n",(0,n.jsxs)(s.p,{children:["Returns the first ",(0,n.jsx)(s.code,{children:"Address"})," record in a collection."]}),"\n",(0,n.jsx)(s.h2,{id:"mutation-apis",children:"Mutation APIs"}),"\n",(0,n.jsx)(s.h3,{id:"storeaddressarray-data-string-collection--null",children:"storeAddress(array $data, ?string $collection = null)"}),"\n",(0,n.jsxs)(s.p,{children:["Stores an address through the ",(0,n.jsx)(s.code,{children:"Address"})," service (facade) and attaches it."]}),"\n",(0,n.jsx)(s.h3,{id:"attachaddressint-address_id-string-collection--null",children:"attachAddress(int $address_id, ?string $collection = null)"}),"\n",(0,n.jsx)(s.p,{children:"Attaches an existing address to the model."}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsx)(s.p,{children:"Note: only non-deleted addresses can be attached."}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"detachaddressint-address_id-string-collection--null",children:"detachAddress(int $address_id, ?string $collection = null)"}),"\n",(0,n.jsx)(s.p,{children:"Removes the relation (does not delete the address)."}),"\n",(0,n.jsx)(s.h3,{id:"detachalladdressesstring-collection--null",children:"detachAllAddresses(?string $collection = null)"}),"\n",(0,n.jsx)(s.p,{children:"Removes all relations (optionally filtered by collection)."}),"\n",(0,n.jsx)(s.h3,{id:"syncaddressesarray-address_ids-string-collection--null",children:"syncAddresses(array $address_ids, ?string $collection = null)"}),"\n",(0,n.jsx)(s.p,{children:"Detaches all addresses in the collection and attaches the provided ids."}),"\n",(0,n.jsx)(s.h3,{id:"updateaddressint-address_id-array-data",children:"updateAddress(int $address_id, array $data)"}),"\n",(0,n.jsxs)(s.p,{children:["Updates an attached address via the ",(0,n.jsx)(s.code,{children:"Address"})," service."]}),"\n",(0,n.jsx)(s.h3,{id:"deleteaddressint-address_id",children:"deleteAddress(int $address_id)"}),"\n",(0,n.jsx)(s.p,{children:"Soft-deletes an attached address and removes the relation."}),"\n",(0,n.jsx)(s.h2,{id:"backward-compatibility-aliases",children:"Backward compatibility aliases"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"getAddress()"})," \u2192 alias for ",(0,n.jsx)(s.code,{children:"getAddresses()"})]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"forgetAddress(int $address_id)"})," \u2192 alias for ",(0,n.jsx)(s.code,{children:"deleteAddress()"})]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453(e,s,d){d.d(s,{R:()=>a,x:()=>t});var l=d(96540);const n={},i=l.createContext(n);function a(e){const s=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),l.createElement(i.Provider,{value:s},e.children)}}}]);