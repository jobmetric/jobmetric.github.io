"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[5982],{28453(e,n,t){t.d(n,{R:()=>c,x:()=>r});var l=t(96540);const i={},s=l.createContext(i);function c(e){const n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),l.createElement(s.Provider,{value:n},e.children)}},32444(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"laravel-url/deep-diving/exceptions/slug-conflict-exception","title":"SlugConflictException","description":"Thrown when attempting to assign a slug that already exists for another model of the same type in the same collection.","source":"@site/packages/laravel-url/deep-diving/exceptions/slug-conflict-exception.md","sourceDirName":"laravel-url/deep-diving/exceptions","slug":"/laravel-url/deep-diving/exceptions/slug-conflict-exception","permalink":"/packages/laravel-url/deep-diving/exceptions/slug-conflict-exception","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-url/deep-diving/exceptions/slug-conflict-exception.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"SlugConflictException"},"sidebar":"packagesSidebar","previous":{"title":"ModelUrlContractNotFoundException","permalink":"/packages/laravel-url/deep-diving/exceptions/model-url-contract-not-found-exception"},"next":{"title":"SlugNotFoundException","permalink":"/packages/laravel-url/deep-diving/exceptions/slug-not-found-exception"}}');var i=t(74848),s=t(28453),c=t(28774);const r={sidebar_position:2,sidebar_label:"SlugConflictException"},o="SlugConflictException",a={},d=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"When It&#39;s Thrown",id:"when-its-thrown",level:2},{value:"Example",id:"example",level:2},{value:"Handling",id:"handling",level:2},{value:"Error Message",id:"error-message",level:2},{value:"Prevention",id:"prevention",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"slugconflictexception",children:"SlugConflictException"})}),"\n",(0,i.jsx)(n.p,{children:"Thrown when attempting to assign a slug that already exists for another model of the same type in the same collection."}),"\n",(0,i.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"JobMetric\\Url\\Exceptions\\SlugConflictException\n"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"This exception is thrown when:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Another model of the same type uses the same slug"}),"\n",(0,i.jsx)(n.li,{children:"In the same collection (or both null)"}),"\n",(0,i.jsx)(n.li,{children:"The conflicting slug is active (not soft-deleted)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"when-its-thrown",children:"When It's Thrown"}),"\n",(0,i.jsx)(n.p,{children:"The exception is thrown by:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"dispatchSlug()"})," - When assigning a slug that conflicts"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"restore()"})," - When restoring a model with a conflicting slug"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// First product\n$product1 = Product::create(['name' => 'Product 1']);\n$product1->dispatchSlug('my-product', 'products');\n\n// Second product with same slug\n$product2 = Product::create(['name' => 'Product 2']);\ntry {\n    $product2->dispatchSlug('my-product', 'products');  // Throws SlugConflictException\n} catch (SlugConflictException $e) {\n    // Handle conflict\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"handling",children:"Handling"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"try {\n    $product->dispatchSlug($slug, 'products');\n} catch (SlugConflictException $e) {\n    return back()->withErrors(['slug' => 'This slug is already taken.']);\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"error-message",children:"Error Message"}),"\n",(0,i.jsxs)(n.p,{children:["The exception message is translated using ",(0,i.jsx)(n.code,{children:"url::base.exceptions.slug_conflict"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"trans('url::base.exceptions.slug_conflict')\n"})}),"\n",(0,i.jsx)(n.h2,{id:"prevention",children:"Prevention"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"SlugExistRule"})," in form requests to catch conflicts before ",(0,i.jsx)(n.code,{children:"dispatchSlug()"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"use JobMetric\\Url\\Rules\\SlugExistRule;\n\npublic function rules(): array\n{\n    return [\n        'slug' => [\n            'required',\n            'string',\n            'max:100',\n            new SlugExistRule(Product::class, 'products'),\n        ],\n    ];\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(c.A,{to:"/packages/laravel-url/deep-diving/has-url",children:"HasUrl Trait"})," - Trait that throws this exception"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(c.A,{to:"/packages/laravel-url/deep-diving/slug-exist-rule",children:"SlugExistRule"})," - Validation rule to prevent conflicts"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}}}]);