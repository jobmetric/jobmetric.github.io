"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[3627],{22783(e,l,r){r.r(l),r.d(l,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"laravel-url/deep-diving/models/url","title":"Url Model","description":"The Url model represents a versioned full URL entry associated with any Eloquent model via a polymorphic relation. It tracks the complete history of URLs for SEO-friendly redirects.","source":"@site/packages/laravel-url/deep-diving/models/url.md","sourceDirName":"laravel-url/deep-diving/models","slug":"/laravel-url/deep-diving/models/url","permalink":"/packages/laravel-url/deep-diving/models/url","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-url/deep-diving/models/url.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Url"},"sidebar":"packagesSidebar","previous":{"title":"Slug","permalink":"/packages/laravel-url/deep-diving/models/slug"},"next":{"title":"Events","permalink":"/packages/laravel-url/deep-diving/events"}}');var i=r(74848),s=r(28453),d=r(28774);const t={sidebar_position:2,sidebar_label:"Url"},c="Url Model",o={},a=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Properties",id:"properties",level:2},{value:"Urlable Type",id:"urlable-type",level:3},{value:"Urlable ID",id:"urlable-id",level:3},{value:"Full URL",id:"full-url",level:3},{value:"Collection",id:"collection",level:3},{value:"Version",id:"version",level:3},{value:"Table Structure",id:"table-structure",level:2},{value:"Relationships",id:"relationships",level:2},{value:"urlable (MorphTo)",id:"urlable-morphto",level:3},{value:"Query Scopes",id:"query-scopes",level:2},{value:"active()",id:"active",level:3},{value:"ofUrlable(string $type, int $id)",id:"ofurlablestring-type-int-id",level:3},{value:"whereCollection(?string $collection)",id:"wherecollectionstring-collection",level:3},{value:"Accessors",id:"accessors",level:2},{value:"urlable_resource",id:"urlable_resource",level:3},{value:"Static Methods",id:"static-methods",level:2},{value:"resolveActiveByFullUrl(string $fullUrl)",id:"resolveactivebyfullurlstring-fullurl",level:3},{value:"resolveRedirectTarget(string $fullUrl)",id:"resolveredirecttargetstring-fullurl",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Finding URLs",id:"finding-urls",level:3},{value:"Accessing Related Model",id:"accessing-related-model",level:3},{value:"Resolving Active Model",id:"resolving-active-model",level:3},{value:"Resolving Redirects",id:"resolving-redirects",level:3},{value:"URL History",id:"url-history",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function h(e){const l={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.header,{children:(0,i.jsx)(l.h1,{id:"url-model",children:"Url Model"})}),"\n",(0,i.jsxs)(l.p,{children:["The ",(0,i.jsx)(l.code,{children:"Url"})," model represents a versioned full URL entry associated with any Eloquent model via a polymorphic relation. It tracks the complete history of URLs for SEO-friendly redirects."]}),"\n",(0,i.jsx)(l.h2,{id:"namespace",children:"Namespace"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"JobMetric\\Url\\Models\\Url\n"})}),"\n",(0,i.jsx)(l.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(l.p,{children:["The ",(0,i.jsx)(l.code,{children:"Url"})," model stores:"]}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.strong,{children:"Full URL"}),": The complete canonical URL path"]}),"\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.strong,{children:"Version"}),": Version number for tracking history"]}),"\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.strong,{children:"Collection"}),": Optional grouping (inherited from slug)"]}),"\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.strong,{children:"Polymorphic relation"}),": Links to any model using ",(0,i.jsx)(l.code,{children:"HasUrl"})]}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"properties",children:"Properties"}),"\n",(0,i.jsx)(l.h3,{id:"urlable-type",children:"Urlable Type"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"public string $urlable_type;\n"})}),"\n",(0,i.jsx)(l.p,{children:"Model class name (polymorphic)."}),"\n",(0,i.jsx)(l.h3,{id:"urlable-id",children:"Urlable ID"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"public int $urlable_id;\n"})}),"\n",(0,i.jsx)(l.p,{children:"Model ID (polymorphic)."}),"\n",(0,i.jsx)(l.h3,{id:"full-url",children:"Full URL"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"public string $full_url;\n"})}),"\n",(0,i.jsx)(l.p,{children:"Complete canonical URL (max 2000 chars)."}),"\n",(0,i.jsx)(l.h3,{id:"collection",children:"Collection"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"public string|null $collection;\n"})}),"\n",(0,i.jsx)(l.p,{children:"Optional collection name (inherited from slug)."}),"\n",(0,i.jsx)(l.h3,{id:"version",children:"Version"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"public int $version;\n"})}),"\n",(0,i.jsx)(l.p,{children:"Version number (starts at 1, increments on URL changes)."}),"\n",(0,i.jsx)(l.h2,{id:"table-structure",children:"Table Structure"}),"\n",(0,i.jsxs)(l.table,{children:[(0,i.jsx)(l.thead,{children:(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.th,{children:"Column"}),(0,i.jsx)(l.th,{children:"Type"}),(0,i.jsx)(l.th,{children:"Description"})]})}),(0,i.jsxs)(l.tbody,{children:[(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:(0,i.jsx)(l.code,{children:"id"})}),(0,i.jsx)(l.td,{children:"int"}),(0,i.jsx)(l.td,{children:"Primary key"})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:(0,i.jsx)(l.code,{children:"urlable_type"})}),(0,i.jsx)(l.td,{children:"string"}),(0,i.jsx)(l.td,{children:"Model class name (polymorphic)"})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:(0,i.jsx)(l.code,{children:"urlable_id"})}),(0,i.jsx)(l.td,{children:"int"}),(0,i.jsx)(l.td,{children:"Model ID (polymorphic)"})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:(0,i.jsx)(l.code,{children:"full_url"})}),(0,i.jsx)(l.td,{children:"string"}),(0,i.jsx)(l.td,{children:"Complete canonical URL (max 2000 chars)"})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:(0,i.jsx)(l.code,{children:"collection"})}),(0,i.jsx)(l.td,{children:"string|null"}),(0,i.jsx)(l.td,{children:"Optional collection name"})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:(0,i.jsx)(l.code,{children:"version"})}),(0,i.jsx)(l.td,{children:"int"}),(0,i.jsx)(l.td,{children:"Version number (starts at 1)"})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:(0,i.jsx)(l.code,{children:"deleted_at"})}),(0,i.jsx)(l.td,{children:"timestamp|null"}),(0,i.jsx)(l.td,{children:"Soft delete timestamp"})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:(0,i.jsx)(l.code,{children:"created_at"})}),(0,i.jsx)(l.td,{children:"timestamp"}),(0,i.jsx)(l.td,{children:"Creation timestamp"})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:(0,i.jsx)(l.code,{children:"updated_at"})}),(0,i.jsx)(l.td,{children:"timestamp"}),(0,i.jsx)(l.td,{children:"Update timestamp"})]})]})]}),"\n",(0,i.jsx)(l.h2,{id:"relationships",children:"Relationships"}),"\n",(0,i.jsx)(l.h3,{id:"urlable-morphto",children:"urlable (MorphTo)"}),"\n",(0,i.jsx)(l.p,{children:"Polymorphic relation to the model that owns this URL:"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"$url = Url::find(1);\n$model = $url->urlable;  // Product, Category, etc.\n"})}),"\n",(0,i.jsx)(l.h2,{id:"query-scopes",children:"Query Scopes"}),"\n",(0,i.jsx)(l.h3,{id:"active",children:"active()"}),"\n",(0,i.jsx)(l.p,{children:"Returns only active (non-deleted) URLs:"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"Url::active()->get();\n"})}),"\n",(0,i.jsx)(l.h3,{id:"ofurlablestring-type-int-id",children:"ofUrlable(string $type, int $id)"}),"\n",(0,i.jsx)(l.p,{children:"Filter by urlable type and ID:"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"Url::ofUrlable(Product::class, 1)->get();\n"})}),"\n",(0,i.jsx)(l.h3,{id:"wherecollectionstring-collection",children:"whereCollection(?string $collection)"}),"\n",(0,i.jsx)(l.p,{children:"Filter by collection (NULL-safe):"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"Url::whereCollection('products')->get();\n"})}),"\n",(0,i.jsx)(l.h2,{id:"accessors",children:"Accessors"}),"\n",(0,i.jsx)(l.h3,{id:"urlable_resource",children:"urlable_resource"}),"\n",(0,i.jsxs)(l.p,{children:["Returns the resource representation of the urlable model (via ",(0,i.jsx)(l.code,{children:"UrlableResourceEvent"}),"):"]}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"$url = Url::find(1);\n$resource = $url->urlable_resource;  // Resource from event listeners\n"})}),"\n",(0,i.jsx)(l.h2,{id:"static-methods",children:"Static Methods"}),"\n",(0,i.jsx)(l.h3,{id:"resolveactivebyfullurlstring-fullurl",children:"resolveActiveByFullUrl(string $fullUrl)"}),"\n",(0,i.jsx)(l.p,{children:"Resolve the active model that currently owns a given full URL:"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"$model = Url::resolveActiveByFullUrl('/shop/laptops/macbook-pro-14');\n// Returns Product instance or null\n"})}),"\n",(0,i.jsx)(l.p,{children:(0,i.jsx)(l.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.code,{children:"$fullUrl"})," (string): The full URL to resolve"]}),"\n"]}),"\n",(0,i.jsxs)(l.p,{children:[(0,i.jsx)(l.strong,{children:"Returns:"})," ",(0,i.jsx)(l.code,{children:"Model|null"})," - The model instance or null if not found"]}),"\n",(0,i.jsx)(l.h3,{id:"resolveredirecttargetstring-fullurl",children:"resolveRedirectTarget(string $fullUrl)"}),"\n",(0,i.jsx)(l.p,{children:"Resolve redirect target for a legacy URL:"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"$target = Url::resolveRedirectTarget('/shop/old-path');\n// Returns current active URL or null\n"})}),"\n",(0,i.jsx)(l.p,{children:(0,i.jsx)(l.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.code,{children:"$fullUrl"})," (string): The legacy URL to resolve"]}),"\n"]}),"\n",(0,i.jsxs)(l.p,{children:[(0,i.jsx)(l.strong,{children:"Returns:"})," ",(0,i.jsx)(l.code,{children:"string|null"})," - The current active URL or null if not found"]}),"\n",(0,i.jsx)(l.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,i.jsx)(l.h3,{id:"finding-urls",children:"Finding URLs"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"// Find by urlable\n$urls = Url::ofUrlable(Product::class, 1)->get();\n\n// Find active URLs\n$active = Url::active()->get();\n\n// Find by collection\n$urls = Url::whereCollection('products')->get();\n"})}),"\n",(0,i.jsx)(l.h3,{id:"accessing-related-model",children:"Accessing Related Model"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"$url = Url::find(1);\n$product = $url->urlable;  // Product instance\n"})}),"\n",(0,i.jsx)(l.h3,{id:"resolving-active-model",children:"Resolving Active Model"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"$model = Url::resolveActiveByFullUrl('/shop/laptops/macbook-pro-14');\nif ($model instanceof Product) {\n    // Handle product\n}\n"})}),"\n",(0,i.jsx)(l.h3,{id:"resolving-redirects",children:"Resolving Redirects"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"$target = Url::resolveRedirectTarget('/shop/old-path');\nif ($target) {\n    return redirect($target, 301);\n}\n"})}),"\n",(0,i.jsx)(l.h3,{id:"url-history",children:"URL History"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-php",children:"$product = Product::find(1);\n$history = $product->urlHistory();\n\nforeach ($history as $url) {\n    echo $url->full_url . ' (version ' . $url->version . ')' . PHP_EOL;\n}\n"})}),"\n",(0,i.jsx)(l.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(d.A,{to:"/packages/laravel-url/deep-diving/has-url",children:"HasUrl Trait"})," - Trait that manages URLs"]}),"\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(d.A,{to:"/packages/laravel-url/deep-diving/models/slug",children:"Slug Model"})," - Model that stores slugs"]}),"\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(d.A,{to:"/packages/laravel-url/deep-diving/events",children:"Events"})," - URL-related events"]}),"\n"]})]})}function u(e={}){const{wrapper:l}={...(0,s.R)(),...e.components};return l?(0,i.jsx)(l,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453(e,l,r){r.d(l,{R:()=>d,x:()=>t});var n=r(96540);const i={},s=n.createContext(i);function d(e){const l=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function t(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),n.createElement(s.Provider,{value:l},e.children)}}}]);