"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[6705],{28453(e,n,a){a.d(n,{R:()=>l,x:()=>g});var t=a(96540);const s={},i=t.createContext(s);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function g(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(i.Provider,{value:n},e.children)}},84754(e,n,a){a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>o,frontMatter:()=>g,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"laravel-language/deep-diving/events","title":"Events","description":"Laravel Language provides a comprehensive event system that fires domain events for all CRUD operations on Language entities. These events allow you to hook into the language lifecycle and perform additional actions when languages are created, updated, or deleted.","source":"@site/packages/laravel-language/deep-diving/events.md","sourceDirName":"laravel-language/deep-diving","slug":"/laravel-language/deep-diving/events","permalink":"/packages/laravel-language/deep-diving/events","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-language/deep-diving/events.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"sidebar_label":"Events"},"sidebar":"packagesSidebar","previous":{"title":"CheckFutureDateRule","permalink":"/packages/laravel-language/deep-diving/rules/check-future-date-rule"},"next":{"title":"SetLanguageMiddleware","permalink":"/packages/laravel-language/deep-diving/middleware/set-language-middleware"}}');var s=a(74848),i=a(28453),l=a(28774);const g={sidebar_position:5,sidebar_label:"Events"},d="Events",r={},c=[{value:"Overview",id:"overview",level:2},{value:"Event Structure",id:"event-structure",level:2},{value:"Base Event Structure",id:"base-event-structure",level:3},{value:"Available Events",id:"available-events",level:2},{value:"Language Events",id:"language-events",level:3},{value:"SetLocaleEvent",id:"setlocaleevent",level:3},{value:"Listening to Events",id:"listening-to-events",level:2},{value:"Method 1: Event Listeners in Service Provider",id:"method-1-event-listeners-in-service-provider",level:3},{value:"Method 2: Using Event Facade",id:"method-2-using-event-facade",level:3},{value:"Method 3: Using Event Subscribers",id:"method-3-using-event-subscribers",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Example 1: Cache Invalidation on Language Changes",id:"example-1-cache-invalidation-on-language-changes",level:3},{value:"Example 2: Audit Logging",id:"example-2-audit-logging",level:3},{value:"Example 3: Notification System",id:"example-3-notification-system",level:3},{value:"Example 4: Search Index Update",id:"example-4-search-index-update",level:3},{value:"Example 5: Locale Change Tracking",id:"example-5-locale-change-tracking",level:3},{value:"Example 6: Complete Event Listener Setup",id:"example-6-complete-event-listener-setup",level:3},{value:"Event Timing",id:"event-timing",level:2},{value:"Queued Events",id:"queued-events",level:2},{value:"When to Use Events",id:"when-to-use-events",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"events",children:"Events"})}),"\n",(0,s.jsx)(n.p,{children:"Laravel Language provides a comprehensive event system that fires domain events for all CRUD operations on Language entities. These events allow you to hook into the language lifecycle and perform additional actions when languages are created, updated, or deleted."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The event system in Laravel Language:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fires automatically"})," during CRUD operations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Provides model instances"})," in event payloads"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Uses DomainEvent interface"})," for consistency"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Supports event listeners"})," for custom logic"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Enables event-driven architecture"})," for language management"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"event-structure",children:"Event Structure"}),"\n",(0,s.jsx)(n.p,{children:"All events in Laravel Language:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Implement ",(0,s.jsx)(n.code,{children:"JobMetric\\EventSystem\\Contracts\\DomainEvent"})]}),"\n",(0,s.jsxs)(n.li,{children:["Are ",(0,s.jsx)(n.code,{children:"readonly"})," classes for immutability"]}),"\n",(0,s.jsx)(n.li,{children:"Contain the affected model instance"}),"\n",(0,s.jsxs)(n.li,{children:["Provide a stable ",(0,s.jsx)(n.code,{children:"key()"})," method"]}),"\n",(0,s.jsxs)(n.li,{children:["Include metadata via ",(0,s.jsx)(n.code,{children:"definition()"})," method"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"base-event-structure",children:"Base Event Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"readonly class LanguageStoredEvent implements DomainEvent\n{\n    public function __construct(\n        public Language $language,\n        public array $data\n    ) {}\n\n    public static function key(): string\n    {\n        return 'language.stored';\n    }\n\n    public static function definition(): DomainEventDefinition\n    {\n        return new DomainEventDefinition(\n            self::key(),\n            'language::base.entity_names.language',\n            'language::base.events.language_stored.title',\n            'language::base.events.language_stored.description',\n            'fas fa-save',\n            ['language', 'storage', 'management']\n        );\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"available-events",children:"Available Events"}),"\n",(0,s.jsx)(n.h3,{id:"language-events",children:"Language Events"}),"\n",(0,s.jsx)(n.p,{children:"Events fired for Language entity CRUD operations."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event Class"}),(0,s.jsx)(n.th,{children:"Event Key"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Payload"}),(0,s.jsx)(n.th,{children:"Triggered When"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"LanguageStoredEvent"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"language.stored"})}),(0,s.jsx)(n.td,{children:"Fired when a new Language is created"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Language $language, array $data"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Language::store()"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"LanguageUpdatedEvent"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"language.updated"})}),(0,s.jsx)(n.td,{children:"Fired when an existing Language is updated"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Language $language, array $data"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Language::update()"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"LanguageDeletingEvent"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"language.deleting"})}),(0,s.jsx)(n.td,{children:"Fired before a Language is deleted"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Language $language"})}),(0,s.jsxs)(n.td,{children:["Before ",(0,s.jsx)(n.code,{children:"Language::delete()"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"LanguageDeletedEvent"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"language.deleted"})}),(0,s.jsx)(n.td,{children:"Fired after a Language is deleted"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Language $language"})}),(0,s.jsxs)(n.td,{children:["After ",(0,s.jsx)(n.code,{children:"Language::delete()"})]})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Namespace:"})," ",(0,s.jsx)(n.code,{children:"JobMetric\\Language\\Events\\Language\\*"})]}),"\n",(0,s.jsx)(n.h3,{id:"setlocaleevent",children:"SetLocaleEvent"}),"\n",(0,s.jsx)(n.p,{children:"Event fired when the application locale is set by middleware."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event Class"}),(0,s.jsx)(n.th,{children:"Event Key"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Payload"}),(0,s.jsx)(n.th,{children:"Triggered When"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"SetLocaleEvent"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"language.locale_set"})}),(0,s.jsx)(n.td,{children:"Fired when locale is set"}),(0,s.jsx)(n.td,{children:"None"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"SetLanguageMiddleware"})," execution"]})]})})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Namespace:"})," ",(0,s.jsx)(n.code,{children:"JobMetric\\Language\\Events\\SetLocaleEvent"})]}),"\n",(0,s.jsx)(n.h2,{id:"listening-to-events",children:"Listening to Events"}),"\n",(0,s.jsx)(n.h3,{id:"method-1-event-listeners-in-service-provider",children:"Method 1: Event Listeners in Service Provider"}),"\n",(0,s.jsx)(n.p,{children:"Register event listeners in a service provider:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"namespace App\\Providers;\n\nuse Illuminate\\Foundation\\Support\\Providers\\EventServiceProvider as ServiceProvider;\nuse JobMetric\\Language\\Events\\Language\\LanguageStoredEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageUpdatedEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageDeletedEvent;\n\nclass EventServiceProvider extends ServiceProvider\n{\n    protected $listen = [\n        LanguageStoredEvent::class => [\n            \\App\\Listeners\\Language\\LogLanguageCreation::class,\n            \\App\\Listeners\\Language\\InvalidateLanguageCache::class,\n        ],\n        LanguageUpdatedEvent::class => [\n            \\App\\Listeners\\Language\\LogLanguageUpdate::class,\n            \\App\\Listeners\\Language\\InvalidateLanguageCache::class,\n        ],\n        LanguageDeletedEvent::class => [\n            \\App\\Listeners\\Language\\LogLanguageDeletion::class,\n            \\App\\Listeners\\Language\\InvalidateLanguageCache::class,\n        ],\n    ];\n\n    public function boot(): void\n    {\n        parent::boot();\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"method-2-using-event-facade",children:"Method 2: Using Event Facade"}),"\n",(0,s.jsx)(n.p,{children:"Listen to events using the Event facade:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"use Illuminate\\Support\\Facades\\Event;\nuse JobMetric\\Language\\Events\\Language\\LanguageStoredEvent;\n\nEvent::listen(LanguageStoredEvent::class, function (LanguageStoredEvent $event) {\n    $language = $event->language;\n    \n    // Perform actions\n    Log::info('Language created', ['language_id' => $language->id, 'locale' => $language->locale]);\n    Cache::forget(\"languages.active\");\n    Cache::forget(\"language.{$language->locale}\");\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"method-3-using-event-subscribers",children:"Method 3: Using Event Subscribers"}),"\n",(0,s.jsx)(n.p,{children:"Create event subscribers for multiple events:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"namespace App\\Listeners;\n\nuse Illuminate\\Events\\Dispatcher;\nuse JobMetric\\Language\\Events\\Language\\LanguageStoredEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageUpdatedEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageDeletedEvent;\n\nclass LanguageEventSubscriber\n{\n    public function handleLanguageStored(LanguageStoredEvent $event): void\n    {\n        $language = $event->language;\n        Log::info('Language stored', [\n            'language_id' => $language->id,\n            'locale' => $language->locale,\n            'name' => $language->name,\n        ]);\n    }\n\n    public function handleLanguageUpdated(LanguageUpdatedEvent $event): void\n    {\n        $language = $event->language;\n        Log::info('Language updated', [\n            'language_id' => $language->id,\n            'locale' => $language->locale,\n            'changes' => $language->getChanges(),\n        ]);\n    }\n\n    public function handleLanguageDeleted(LanguageDeletedEvent $event): void\n    {\n        $language = $event->language;\n        Log::warning('Language deleted', [\n            'language_id' => $language->id,\n            'locale' => $language->locale,\n        ]);\n    }\n\n    public function subscribe(Dispatcher $events): void\n    {\n        $events->listen(\n            LanguageStoredEvent::class,\n            [LanguageEventSubscriber::class, 'handleLanguageStored']\n        );\n\n        $events->listen(\n            LanguageUpdatedEvent::class,\n            [LanguageEventSubscriber::class, 'handleLanguageUpdated']\n        );\n\n        $events->listen(\n            LanguageDeletedEvent::class,\n            [LanguageEventSubscriber::class, 'handleLanguageDeleted']\n        );\n    }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Register the subscriber:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"namespace App\\Providers;\n\nuse App\\Listeners\\LanguageEventSubscriber;\nuse Illuminate\\Foundation\\Support\\Providers\\EventServiceProvider as ServiceProvider;\n\nclass EventServiceProvider extends ServiceProvider\n{\n    protected $subscribe = [\n        LanguageEventSubscriber::class,\n    ];\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,s.jsx)(n.h3,{id:"example-1-cache-invalidation-on-language-changes",children:"Example 1: Cache Invalidation on Language Changes"}),"\n",(0,s.jsx)(n.p,{children:"Invalidate cache when languages are modified:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:'namespace App\\Listeners\\Language;\n\nuse Illuminate\\Support\\Facades\\Cache;\nuse JobMetric\\Language\\Events\\Language\\LanguageStoredEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageUpdatedEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageDeletedEvent;\n\nclass InvalidateLanguageCache\n{\n    public function handle(LanguageStoredEvent|LanguageUpdatedEvent|LanguageDeletedEvent $event): void\n    {\n        $language = $event->language;\n\n        // Invalidate specific language cache\n        Cache::forget("language.{$language->locale}");\n        Cache::forget("language.{$language->id}");\n\n        // Invalidate active languages cache\n        Cache::forget(\'languages.active\');\n        Cache::forget(\'languages.all\');\n\n        // Invalidate current language cache\n        Cache::forget("language.current.{$language->locale}");\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"example-2-audit-logging",children:"Example 2: Audit Logging"}),"\n",(0,s.jsx)(n.p,{children:"Log all language operations for audit trail:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"namespace App\\Listeners\\Language;\n\nuse App\\Models\\AuditLog;\nuse Illuminate\\Support\\Facades\\Auth;\nuse JobMetric\\Language\\Events\\Language\\LanguageStoredEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageUpdatedEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageDeletedEvent;\n\nclass AuditLanguageOperations\n{\n    public function handleLanguageStored(LanguageStoredEvent $event): void\n    {\n        $this->logAudit('created', $event->language, $event->data);\n    }\n\n    public function handleLanguageUpdated(LanguageUpdatedEvent $event): void\n    {\n        $this->logAudit('updated', $event->language, $event->data);\n    }\n\n    public function handleLanguageDeleted(LanguageDeletedEvent $event): void\n    {\n        $this->logAudit('deleted', $event->language);\n    }\n\n    protected function logAudit(string $action, $language, ?array $data = null): void\n    {\n        AuditLog::create([\n            'user_id' => Auth::id(),\n            'action' => \"language.{$action}\",\n            'model_type' => get_class($language),\n            'model_id' => $language->id,\n            'data' => $data,\n            'changes' => $language->getChanges(),\n            'ip_address' => request()->ip(),\n        ]);\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"example-3-notification-system",children:"Example 3: Notification System"}),"\n",(0,s.jsx)(n.p,{children:"Send notifications when languages are created or updated:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"namespace App\\Listeners\\Language;\n\nuse App\\Notifications\\LanguageCreated;\nuse App\\Notifications\\LanguageUpdated;\nuse Illuminate\\Support\\Facades\\Notification;\nuse JobMetric\\Language\\Events\\Language\\LanguageStoredEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageUpdatedEvent;\n\nclass NotifyLanguageChanges\n{\n    public function handleLanguageStored(LanguageStoredEvent $event): void\n    {\n        $language = $event->language;\n\n        // Notify administrators\n        $admins = User::whereHas('roles', function ($query) {\n            $query->where('name', 'admin');\n        })->get();\n\n        Notification::send($admins, new LanguageCreated($language));\n    }\n\n    public function handleLanguageUpdated(LanguageUpdatedEvent $event): void\n    {\n        $language = $event->language;\n\n        // Notify if status changed\n        if ($language->wasChanged('status')) {\n            $admins = User::whereHas('roles', function ($query) {\n                $query->where('name', 'admin');\n            })->get();\n\n            Notification::send($admins, new LanguageUpdated($language));\n        }\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"example-4-search-index-update",children:"Example 4: Search Index Update"}),"\n",(0,s.jsx)(n.p,{children:"Update search index when languages change:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"namespace App\\Listeners\\Language;\n\nuse App\\Services\\SearchService;\nuse JobMetric\\Language\\Events\\Language\\LanguageStoredEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageUpdatedEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageDeletedEvent;\n\nclass UpdateSearchIndex\n{\n    public function __construct(\n        protected SearchService $searchService\n    ) {}\n\n    public function handleLanguageStored(LanguageStoredEvent $event): void\n    {\n        $this->searchService->indexLanguage($event->language);\n    }\n\n    public function handleLanguageUpdated(LanguageUpdatedEvent $event): void\n    {\n        $this->searchService->updateLanguage($event->language);\n    }\n\n    public function handleLanguageDeleted(LanguageDeletedEvent $event): void\n    {\n        $this->searchService->removeLanguage($event->language->id);\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"example-5-locale-change-tracking",children:"Example 5: Locale Change Tracking"}),"\n",(0,s.jsx)(n.p,{children:"Track locale changes when SetLocaleEvent fires:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"namespace App\\Listeners\\Language;\n\nuse App\\Models\\LocaleChangeHistory;\nuse Illuminate\\Support\\Facades\\Auth;\nuse JobMetric\\Language\\Events\\SetLocaleEvent;\n\nclass TrackLocaleChanges\n{\n    public function handle(SetLocaleEvent $event): void\n    {\n        $locale = app()->getLocale();\n        \n        LocaleChangeHistory::create([\n            'user_id' => Auth::id(),\n            'locale' => $locale,\n            'ip_address' => request()->ip(),\n            'user_agent' => request()->userAgent(),\n            'changed_at' => now(),\n        ]);\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"example-6-complete-event-listener-setup",children:"Example 6: Complete Event Listener Setup"}),"\n",(0,s.jsx)(n.p,{children:"Complete setup for all language events:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"namespace App\\Providers;\n\nuse App\\Listeners\\Language\\AuditLanguageOperations;\nuse App\\Listeners\\Language\\InvalidateLanguageCache;\nuse App\\Listeners\\Language\\NotifyLanguageChanges;\nuse App\\Listeners\\Language\\TrackLocaleChanges;\nuse App\\Listeners\\Language\\UpdateSearchIndex;\nuse Illuminate\\Foundation\\Support\\Providers\\EventServiceProvider as ServiceProvider;\nuse JobMetric\\Language\\Events\\Language\\LanguageDeletedEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageStoredEvent;\nuse JobMetric\\Language\\Events\\Language\\LanguageUpdatedEvent;\nuse JobMetric\\Language\\Events\\SetLocaleEvent;\n\nclass EventServiceProvider extends ServiceProvider\n{\n    protected $listen = [\n        // Language events\n        LanguageStoredEvent::class => [\n            AuditLanguageOperations::class,\n            InvalidateLanguageCache::class,\n            NotifyLanguageChanges::class,\n            UpdateSearchIndex::class,\n        ],\n        LanguageUpdatedEvent::class => [\n            AuditLanguageOperations::class,\n            InvalidateLanguageCache::class,\n            NotifyLanguageChanges::class,\n            UpdateSearchIndex::class,\n        ],\n        LanguageDeletedEvent::class => [\n            AuditLanguageOperations::class,\n            InvalidateLanguageCache::class,\n            UpdateSearchIndex::class,\n        ],\n\n        // Locale events\n        SetLocaleEvent::class => [\n            TrackLocaleChanges::class,\n        ],\n    ];\n\n    public function boot(): void\n    {\n        parent::boot();\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"event-timing",children:"Event Timing"}),"\n",(0,s.jsxs)(n.p,{children:["Events are fired ",(0,s.jsx)(n.strong,{children:"after"})," the database operation completes:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// Execution order:\n// 1. Validate input\n// 2. Perform database operation (create/update/delete)\n// 3. Fire event \u2190 Event fired here\n// 4. Return response\n"})}),"\n",(0,s.jsx)(n.p,{children:"This means:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The model is ",(0,s.jsx)(n.strong,{children:"saved"})," to database before event fires"]}),"\n",(0,s.jsxs)(n.li,{children:["You can access ",(0,s.jsx)(n.strong,{children:"fresh model data"})," in listeners"]}),"\n",(0,s.jsxs)(n.li,{children:["Database transaction is ",(0,s.jsx)(n.strong,{children:"committed"})," before event fires"]}),"\n",(0,s.jsxs)(n.li,{children:["Events are ",(0,s.jsx)(n.strong,{children:"synchronous"})," by default (can be queued)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"queued-events",children:"Queued Events"}),"\n",(0,s.jsx)(n.p,{children:"You can queue events for asynchronous processing:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"namespace App\\Listeners\\Language;\n\nuse Illuminate\\Contracts\\Queue\\ShouldQueue;\nuse JobMetric\\Language\\Events\\Language\\LanguageStoredEvent;\n\nclass ProcessLanguageAsync implements ShouldQueue\n{\n    public function handle(LanguageStoredEvent $event): void\n    {\n        $language = $event->language;\n        \n        // Heavy processing that doesn't block the request\n        $this->generateLanguageAssets($language);\n        $this->updateSearchIndex($language);\n        $this->sendWelcomeNotifications($language);\n    }\n\n    protected function generateLanguageAssets($language): void\n    {\n        // Generate language-specific assets\n    }\n\n    protected function updateSearchIndex($language): void\n    {\n        // Update search index\n    }\n\n    protected function sendWelcomeNotifications($language): void\n    {\n        // Send notifications\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use-events",children:"When to Use Events"}),"\n",(0,s.jsx)(n.p,{children:"Use events when you need to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cache Management"}),": Invalidate or update cached language data"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Notifications"}),": Send notifications when languages change"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Analytics"}),": Track language operations for analytics"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Audit Logging"}),": Log language changes for compliance"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Search Indexing"}),": Update search indexes when languages change"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Integration"}),": Integrate with external services"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Side Effects"}),": Perform side effects without coupling"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(l.A,{to:"/packages/laravel-language/deep-diving/language-service",children:"Language Service"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(l.A,{to:"/packages/laravel-language/deep-diving/models/language",children:"Language Model"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(l.A,{to:"/packages/laravel-language/deep-diving/middleware/set-language-middleware",children:"SetLanguageMiddleware"}),"\n"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);