"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[4984],{28453(e,n,s){s.d(n,{R:()=>l,x:()=>i});var a=s(96540);const r={},t=a.createContext(r);function l(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),a.createElement(t.Provider,{value:n},e.children)}},54988(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"laravel-translation/deep-diving/has-service-translation","title":"HasServiceTranslation Trait","description":"The HasServiceTranslation trait provides reusable translation management methods for CRUD services. It automatically reads translatable fields from your model\'s $translatables property and provides methods to sync and normalize translation payloads.","source":"@site/packages/laravel-translation/deep-diving/has-service-translation.md","sourceDirName":"laravel-translation/deep-diving","slug":"/laravel-translation/deep-diving/has-service-translation","permalink":"/packages/laravel-translation/deep-diving/has-service-translation","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-translation/deep-diving/has-service-translation.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"HasServiceTranslation"},"sidebar":"packagesSidebar","previous":{"title":"HasTranslation","permalink":"/packages/laravel-translation/deep-diving/has-translation"},"next":{"title":"Events","permalink":"/packages/laravel-translation/deep-diving/events"}}');var r=s(74848),t=s(28453),l=s(28774);const i={sidebar_position:2,sidebar_label:"HasServiceTranslation"},o="HasServiceTranslation Trait",d={},c=[{value:"When to Use HasServiceTranslation",id:"when-to-use-hasservicetranslation",level:2},{value:"Overview",id:"overview",level:2},{value:"Namespace",id:"namespace",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Configuration Properties",id:"configuration-properties",level:2},{value:"<code>$translationDefaults</code>",id:"translationdefaults",level:3},{value:"Available Methods",id:"available-methods",level:2},{value:"<code>getTranslatableFields()</code>",id:"gettranslatablefields",level:3},{value:"<code>ensureTranslationsRelation()</code>",id:"ensuretranslationsrelation",level:3},{value:"<code>syncTranslations()</code>",id:"synctranslations",level:3},{value:"<code>normalizeTranslationPayload()</code>",id:"normalizetranslationpayload",level:3},{value:"<code>setTranslationDefaults()</code>",id:"settranslationdefaults",level:3},{value:"<code>getTranslationDefault()</code>",id:"gettranslationdefault",level:3},{value:"<code>clearTranslatableFieldsCache()</code>",id:"cleartranslatablefieldscache",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Format Detection",id:"format-detection",level:2},{value:"Caching",id:"caching",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"See Also",id:"see-also",level:2}];function h(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"hasservicetranslation-trait",children:"HasServiceTranslation Trait"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"HasServiceTranslation"})," trait provides ",(0,r.jsx)(n.strong,{children:"reusable translation management methods for CRUD services"}),". It automatically reads translatable fields from your model's ",(0,r.jsx)(n.code,{children:"$translatables"})," property and provides methods to sync and normalize translation payloads."]}),"\n",(0,r.jsx)(n.h2,{id:"when-to-use-hasservicetranslation",children:"When to Use HasServiceTranslation"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Use ",(0,r.jsx)(n.code,{children:"HasServiceTranslation"})," when you need:"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Service-layer translation management"}),": Manage translations in your service classes instead of directly in models"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Automatic field detection"}),": Automatically read translatable fields from your model class"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Payload normalization"}),": Normalize translation payloads for store and update operations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multiple format support"}),": Handle both locale-keyed and single-locale translation formats"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Default values"}),": Set default values for translatable fields on store operations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Eager loading support"}),": Easily ensure translations relation is loaded"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example scenarios:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Building CRUD services for translatable entities"}),"\n",(0,r.jsx)(n.li,{children:"Creating API endpoints that handle multilingual content"}),"\n",(0,r.jsx)(n.li,{children:"Building admin panels with translation support"}),"\n",(0,r.jsx)(n.li,{children:"Implementing bulk translation operations"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"HasServiceTranslation"})," is designed to work alongside the ",(0,r.jsx)(n.code,{children:"HasTranslation"})," trait on models. While ",(0,r.jsx)(n.code,{children:"HasTranslation"})," provides the model-level translation capabilities, ",(0,r.jsx)(n.code,{children:"HasServiceTranslation"})," provides the service-level utilities for managing those translations."]}),"\n",(0,r.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"JobMetric\\Translation\\HasServiceTranslation\n"})}),"\n",(0,r.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Service must define ",(0,r.jsx)(n.code,{children:"protected static string $modelClass"})," pointing to a model"]}),"\n",(0,r.jsxs)(n.li,{children:["The model must use the ",(0,r.jsx)(n.code,{children:"HasTranslation"})," trait"]}),"\n",(0,r.jsxs)(n.li,{children:["The model must define ",(0,r.jsx)(n.code,{children:"protected array $translatables"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(n.p,{children:"Add the trait to your service class:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"<?php\n\nnamespace App\\Services;\n\nuse App\\Models\\Product;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse JobMetric\\PackageCore\\Services\\AbstractCrudService;\nuse JobMetric\\Translation\\HasServiceTranslation;\n\nclass ProductService extends AbstractCrudService\n{\n    use HasServiceTranslation;\n\n    protected static string $modelClass = Product::class;\n\n    /**\n     * Hook called after storing a model.\n     */\n    protected function afterStore(Model $model, array &$data): void\n    {\n        $this->syncTranslations($model, $data['translation'] ?? null, false);\n    }\n\n    /**\n     * Hook called after updating a model.\n     */\n    protected function afterUpdate(Model $model, array &$data): void\n    {\n        if (array_key_exists('translation', $data)) {\n            $this->syncTranslations($model, $data['translation'], true);\n        }\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configuration-properties",children:"Configuration Properties"}),"\n",(0,r.jsx)(n.h3,{id:"translationdefaults",children:(0,r.jsx)(n.code,{children:"$translationDefaults"})}),"\n",(0,r.jsx)(n.p,{children:"Set default values for translatable fields during store operations. This is useful when you want certain fields to have default values if not provided."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"class ProductService extends AbstractCrudService\n{\n    use HasServiceTranslation;\n\n    protected static string $modelClass = Product::class;\n\n    public function __construct()\n    {\n        parent::__construct();\n\n        // Set default values for translatable fields\n        $this->translationDefaults = [\n            'status' => 'draft',\n            'position' => 'left',\n        ];\n    }\n}\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,r.jsxs)(n.p,{children:["Do not override ",(0,r.jsx)(n.code,{children:"$translationDefaults"})," as a class property directly, as it will conflict with the trait's property. Instead, set it in the constructor."]})}),"\n",(0,r.jsx)(n.h2,{id:"available-methods",children:"Available Methods"}),"\n",(0,r.jsx)(n.h3,{id:"gettranslatablefields",children:(0,r.jsx)(n.code,{children:"getTranslatableFields()"})}),"\n",(0,r.jsx)(n.p,{children:"Returns the translatable fields defined in the model. Results are cached statically per model class for performance."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"protected function getTranslatableFields(): array\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," Array of translatable field names, or empty array if wildcard ",(0,r.jsx)(n.code,{children:"['*']"})," is defined."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$fields = $this->getTranslatableFields();\n// Returns: ['name', 'description', 'summary']\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"ensuretranslationsrelation",children:(0,r.jsx)(n.code,{children:"ensureTranslationsRelation()"})}),"\n",(0,r.jsxs)(n.p,{children:["Ensures the ",(0,r.jsx)(n.code,{children:"translations"})," relation is present in an eager-load array. This is useful when building queries."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"protected function ensureTranslationsRelation(array $with): array\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$with"})," - Array of relations to eager-load"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," The array with ",(0,r.jsx)(n.code,{children:"translations"})," added if not already present."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$with = $this->ensureTranslationsRelation(['category', 'tags']);\n// Returns: ['category', 'tags', 'translations']\n\n$with = $this->ensureTranslationsRelation(['translations', 'category']);\n// Returns: ['translations', 'category'] (no duplicate)\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"synctranslations",children:(0,r.jsx)(n.code,{children:"syncTranslations()"})}),"\n",(0,r.jsx)(n.p,{children:"Upserts translations for a model. Supports both locale-keyed and single-locale formats."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"protected function syncTranslations(Model $model, mixed $translation, bool $isUpdate): void\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$model"})," - The Eloquent model instance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$translation"})," - Translation data (array or null)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$isUpdate"})," - True for update operations, false for store operations"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Supported Formats:"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Locale-keyed format:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$this->syncTranslations($product, [\n    'en' => ['name' => 'Product Name', 'description' => 'Description'],\n    'fa' => ['name' => '\u0646\u0627\u0645 \u0645\u062d\u0635\u0648\u0644', 'description' => '\u062a\u0648\u0636\u06cc\u062d\u0627\u062a'],\n], false);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Single-locale (legacy) format:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Uses current application locale\n$this->syncTranslations($product, [\n    'name' => 'Product Name',\n    'description' => 'Description',\n], false);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"normalizetranslationpayload",children:(0,r.jsx)(n.code,{children:"normalizeTranslationPayload()"})}),"\n",(0,r.jsxs)(n.p,{children:["Normalizes translation input into a payload suitable for the model's ",(0,r.jsx)(n.code,{children:"translate()"})," method."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"protected function normalizeTranslationPayload(array $fields, bool $isUpdate): array\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$fields"})," - Input fields from the request"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$isUpdate"})," - True for update, false for store"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["On store (",(0,r.jsx)(n.code,{children:"$isUpdate = false"}),")"]}),": Includes all translatable fields with defaults"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["On update (",(0,r.jsx)(n.code,{children:"$isUpdate = true"}),")"]}),": Only includes fields that are present in input"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Model has translatables: ['name', 'description', 'status']\n// Defaults: ['status' => 'draft']\n\n// On store\n$payload = $this->normalizeTranslationPayload(['name' => 'Test'], false);\n// Returns: ['name' => 'Test', 'description' => null, 'status' => 'draft']\n\n// On update\n$payload = $this->normalizeTranslationPayload(['name' => 'Updated'], true);\n// Returns: ['name' => 'Updated']\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"settranslationdefaults",children:(0,r.jsx)(n.code,{children:"setTranslationDefaults()"})}),"\n",(0,r.jsx)(n.p,{children:"Dynamically set default values for translatable fields."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public function setTranslationDefaults(array $defaults): static\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$defaults"})," - Associative array of field => default value"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," The service instance (fluent interface)"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$service->setTranslationDefaults([\n    'status' => 'active',\n    'position' => 'right',\n])->store($data);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"gettranslationdefault",children:(0,r.jsx)(n.code,{children:"getTranslationDefault()"})}),"\n",(0,r.jsx)(n.p,{children:"Get the default value for a specific translatable field."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"protected function getTranslationDefault(string $field): mixed\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$field"})," - Field name"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," The default value or null if not set."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"cleartranslatablefieldscache",children:(0,r.jsx)(n.code,{children:"clearTranslatableFieldsCache()"})}),"\n",(0,r.jsx)(n.p,{children:"Clears the static cache for translatable fields. Useful for testing or when model configuration changes at runtime."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public static function clearTranslatableFieldsCache(): void\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"ProductService::clearTranslatableFieldsCache();\n"})}),"\n",(0,r.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,r.jsxs)(n.p,{children:["Here's a complete example of a service using ",(0,r.jsx)(n.code,{children:"HasServiceTranslation"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"<?php\n\nnamespace JobMetric\\UnitConverter;\n\nuse Illuminate\\Database\\Eloquent\\Model;\nuse JobMetric\\PackageCore\\Services\\AbstractCrudService;\nuse JobMetric\\Translation\\HasServiceTranslation;\nuse JobMetric\\UnitConverter\\Models\\Unit;\nuse JobMetric\\UnitConverter\\Http\\Resources\\UnitResource;\n\nclass UnitConverter extends AbstractCrudService\n{\n    use HasServiceTranslation;\n\n    protected string $entityName = 'unit::base.entity_names.unit';\n\n    protected static string $modelClass = Unit::class;\n    protected static string $resourceClass = UnitResource::class;\n\n    public function __construct()\n    {\n        parent::__construct();\n\n        // Set default for 'position' field\n        $this->translationDefaults = [\n            'position' => 'left',\n        ];\n    }\n\n    /**\n     * Store hook: sync translations after creating the model.\n     */\n    protected function afterStore(Model $model, array &$data): void\n    {\n        $this->syncTranslations($model, $data['translation'] ?? null, false);\n    }\n\n    /**\n     * Update hook: sync translations if provided.\n     */\n    protected function afterUpdate(Model $model, array &$data): void\n    {\n        if (array_key_exists('translation', $data)) {\n            $this->syncTranslations($model, $data['translation'], true);\n        }\n    }\n\n    /**\n     * Query hook: ensure translations are always eager-loaded.\n     */\n    protected function afterQuery($qb, array $filters, array &$with, ?string $mode): void\n    {\n        $with = $this->ensureTranslationsRelation($with);\n    }\n\n    /**\n     * Show hook: ensure translations are loaded for single item.\n     */\n    protected function afterShow(Model $model, array &$with): void\n    {\n        $with = $this->ensureTranslationsRelation($with);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"format-detection",children:"Format Detection"}),"\n",(0,r.jsx)(n.p,{children:"The trait automatically detects whether the translation input is in locale-keyed format or single-locale format:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Locale-keyed format"})," is detected when:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The first key is a string with 2-5 characters (like locale codes: ",(0,r.jsx)(n.code,{children:"en"}),", ",(0,r.jsx)(n.code,{children:"fa"}),", ",(0,r.jsx)(n.code,{children:"ar"}),", ",(0,r.jsx)(n.code,{children:"zh-CN"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"The first value is an array"}),"\n",(0,r.jsx)(n.li,{children:"The first key is not a translatable field name"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Single-locale format"})," is assumed otherwise, and the current application locale is used."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Locale-keyed (detected automatically)\n[\n    'en' => ['name' => 'English Name'],\n    'fa' => ['name' => '\u0646\u0627\u0645 \u0641\u0627\u0631\u0633\u06cc'],\n]\n\n// Single-locale (uses app()->getLocale())\n[\n    'name' => 'Product Name',\n    'description' => 'Description',\n]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"caching",children:"Caching"}),"\n",(0,r.jsx)(n.p,{children:"Translatable fields are cached statically per model class. This means:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fields are only resolved once per request, regardless of how many service instances are created"}),"\n",(0,r.jsx)(n.li,{children:"Cache is shared across all instances of the same service"}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"clearTranslatableFieldsCache()"})," to clear the cache if needed"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Always call parent constructor"})," when overriding the constructor"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Set defaults in constructor"}),", not as class property"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Use ",(0,r.jsx)(n.code,{children:"array_key_exists"})]})," when checking for translation in update operations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ensure translations relation"})," in query hooks for consistent eager loading"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(l.A,{to:"./has-translation",children:"HasTranslation Trait"})," - Model-level translation trait"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(l.A,{to:"./events",children:"Translation Events"})," - Events fired during translation operations"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);