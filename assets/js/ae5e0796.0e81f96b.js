"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[7525],{6856(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"laravel-event-system/deep-diving/requests/store-event-system-request","title":"StoreEventSystemRequest","description":"The StoreEventSystemRequest is a form request class that validates input data when creating or storing event-listener bindings in the Event System. It ensures data integrity by validating event and listener class names, priority values, and other required fields.","source":"@site/packages/laravel-event-system/deep-diving/requests/store-event-system-request.md","sourceDirName":"laravel-event-system/deep-diving/requests","slug":"/laravel-event-system/deep-diving/requests/store-event-system-request","permalink":"/packages/laravel-event-system/deep-diving/requests/store-event-system-request","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-event-system/deep-diving/requests/store-event-system-request.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"StoreEventSystemRequest"},"sidebar":"packagesSidebar","previous":{"title":"EventSystem","permalink":"/packages/laravel-event-system/deep-diving/event-system"},"next":{"title":"EventSystemResource","permalink":"/packages/laravel-event-system/deep-diving/resources/event-system-resource"}}');var r=s(4848),i=s(8453);const l={sidebar_position:4,sidebar_label:"StoreEventSystemRequest"},a="StoreEventSystemRequest",d={},c=[{value:"When to Use StoreEventSystemRequest",id:"when-to-use-storeeventsystemrequest",level:2},{value:"Overview",id:"overview",level:2},{value:"Namespace",id:"namespace",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Validation Rules",id:"validation-rules",level:2},{value:"<code>name</code> (string, required)",id:"name-string-required",level:3},{value:"<code>description</code> (string, nullable)",id:"description-string-nullable",level:3},{value:"<code>event</code> (string, required)",id:"event-string-required",level:3},{value:"<code>listener</code> (string, required)",id:"listener-string-required",level:3},{value:"<code>priority</code> (integer, nullable)",id:"priority-integer-nullable",level:3},{value:"<code>status</code> (boolean)",id:"status-boolean",level:3},{value:"Data Normalization",id:"data-normalization",level:2},{value:"Custom Attributes",id:"custom-attributes",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"In Controller",id:"in-controller",level:3},{value:"Programmatic Usage",id:"programmatic-usage",level:3},{value:"Validation Errors",id:"validation-errors",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"storeeventsystemrequest",children:"StoreEventSystemRequest"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"StoreEventSystemRequest"})," is a form request class that validates input data when creating or storing event-listener bindings in the Event System. It ensures data integrity by validating event and listener class names, priority values, and other required fields."]}),"\n",(0,r.jsx)(n.h2,{id:"when-to-use-storeeventsystemrequest",children:"When to Use StoreEventSystemRequest"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Use ",(0,r.jsx)(n.code,{children:"StoreEventSystemRequest"})," when you need:"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Input validation"}),": Validate event system data before storing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Class existence checks"}),": Ensure event and listener classes exist"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data normalization"}),": Normalize input data (e.g., default values)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Form request handling"}),": Use in controllers for HTTP requests"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"DTO creation"}),": Convert arrays to validated DTOs"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example scenarios:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"API endpoints for creating event bindings"}),"\n",(0,r.jsx)(n.li,{children:"Admin forms for registering events"}),"\n",(0,r.jsx)(n.li,{children:"Programmatic event registration with validation"}),"\n",(0,r.jsx)(n.li,{children:"Import/export functionality with validation"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"StoreEventSystemRequest"})," provides:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Field validation"}),": Validates all required and optional fields"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Class validation"}),": Ensures event and listener classes exist"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data normalization"}),": Sets default values and normalizes data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom attributes"}),": Provides translated field names for error messages"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"JobMetric\\EventSystem\\Http\\Requests\\StoreEventSystemRequest\n"})}),"\n",(0,r.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(n.p,{children:"Use in controllers or convert arrays to DTOs:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Http\\Requests\\StoreEventSystemRequest;\n\n// In controller\npublic function store(StoreEventSystemRequest $request)\n{\n    $validated = $request->validated();\n    // Use validated data\n}\n\n// Convert array to DTO\n$dto = dto($input, StoreEventSystemRequest::class);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"validation-rules",children:"Validation Rules"}),"\n",(0,r.jsxs)(n.h3,{id:"name-string-required",children:[(0,r.jsx)(n.code,{children:"name"})," (string, required)"]}),"\n",(0,r.jsx)(n.p,{children:"Unique name identifier for the event-listener binding."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"required"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"max:255"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"unique:events,name"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"'name' => 'user.created'\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"description-string-nullable",children:[(0,r.jsx)(n.code,{children:"description"})," (string, nullable)"]}),"\n",(0,r.jsx)(n.p,{children:"Optional description for the event binding."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"nullable"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"'description' => 'Send welcome email when user registers'\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"event-string-required",children:[(0,r.jsx)(n.code,{children:"event"})," (string, required)"]}),"\n",(0,r.jsx)(n.p,{children:"Fully qualified class name of the event."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"required"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ClassExistRule"})," - Validates that the class exists"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"'event' => 'App\\Events\\UserCreated'\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"listener-string-required",children:[(0,r.jsx)(n.code,{children:"listener"})," (string, required)"]}),"\n",(0,r.jsx)(n.p,{children:"Fully qualified class name of the listener."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"required"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ClassExistRule"})," - Validates that the class exists"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"'listener' => 'App\\Listeners\\SendWelcomeEmail'\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"priority-integer-nullable",children:[(0,r.jsx)(n.code,{children:"priority"})," (integer, nullable)"]}),"\n",(0,r.jsx)(n.p,{children:"Execution priority of the listener. Lower values execute earlier."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"integer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"nullable"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Default:"})," ",(0,r.jsx)(n.code,{children:"0"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"'priority' => 10\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"status-boolean",children:[(0,r.jsx)(n.code,{children:"status"})," (boolean)"]}),"\n",(0,r.jsx)(n.p,{children:"Active status of the event binding."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"boolean"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Default:"})," ",(0,r.jsx)(n.code,{children:"true"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"'status' => true\n"})}),"\n",(0,r.jsx)(n.h2,{id:"data-normalization",children:"Data Normalization"}),"\n",(0,r.jsx)(n.p,{children:"The request automatically normalizes data:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public static function normalize(array $data): array\n{\n    // Set default priority if not provided\n    $data['priority'] = $data['priority'] ?? 0;\n\n    // Convert empty string to null for description\n    if (($data['description'] ?? null) === '') {\n        $data['description'] = null;\n    }\n\n    return $data;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"custom-attributes",children:"Custom Attributes"}),"\n",(0,r.jsx)(n.p,{children:"The request provides translated field names for error messages:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public function attributes(): array\n{\n    return [\n        'name' => trans('event-system::base.fields.name'),\n        'description' => trans('event-system::base.fields.description'),\n        'event' => trans('event-system::base.fields.event'),\n        'listener' => trans('event-system::base.fields.listener'),\n        'priority' => trans('event-system::base.fields.priority'),\n        'status' => trans('event-system::base.fields.status'),\n    ];\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,r.jsx)(n.h3,{id:"in-controller",children:"In Controller"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"namespace App\\Http\\Controllers\\Admin;\n\nuse App\\Http\\Controllers\\Controller;\nuse JobMetric\\EventSystem\\Http\\Requests\\StoreEventSystemRequest;\nuse JobMetric\\EventSystem\\Facades\\EventSystem;\n\nclass EventSystemController extends Controller\n{\n    public function store(StoreEventSystemRequest $request)\n    {\n        $response = EventSystem::store($request->validated());\n\n        if ($response->isSuccess()) {\n            return redirect()->route('admin.events.index')\n                ->with('success', $response->getMessage());\n        }\n\n        return back()->withErrors($response->getErrors());\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"programmatic-usage",children:"Programmatic Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Http\\Requests\\StoreEventSystemRequest;\nuse JobMetric\\EventSystem\\Facades\\EventSystem;\n\n// Convert array to validated DTO\n$input = [\n    'name' => 'user.created',\n    'description' => 'Send welcome email',\n    'event' => App\\Events\\UserCreated::class,\n    'listener' => App\\Listeners\\SendWelcomeEmail::class,\n    'priority' => 10,\n    'status' => true,\n];\n\n$dto = dto($input, StoreEventSystemRequest::class);\n\n// Use validated data\n$response = EventSystem::store($dto);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"validation-errors",children:"Validation Errors"}),"\n",(0,r.jsx)(n.p,{children:"When validation fails, the request returns errors with translated field names:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "errors": {\n        "name": ["The name field is required."],\n        "event": ["The event class does not exist."],\n        "listener": ["The listener class does not exist."]\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/packages/laravel-event-system/deep-diving/rules/class-exist-rule",children:"ClassExistRule"})," - Validation rule for class existence"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/packages/laravel-event-system/deep-diving/event-system",children:"EventSystem"})," - Service for managing event bindings"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>a});var t=s(6540);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);