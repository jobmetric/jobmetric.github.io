"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[7906],{8093(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"laravel-event-system/deep-diving/domain-event","title":"DomainEvent Contract","description":"The DomainEvent contract is the foundation for implementing domain events in Laravel Event System. It provides a standardized interface for events with stable keys and rich metadata, enabling event-driven architecture with consistent structure across your application.","source":"@site/packages/laravel-event-system/deep-diving/domain-event.md","sourceDirName":"laravel-event-system/deep-diving","slug":"/laravel-event-system/deep-diving/domain-event","permalink":"/packages/laravel-event-system/deep-diving/domain-event","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-event-system/deep-diving/domain-event.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"DomainEvent"},"sidebar":"packagesSidebar","previous":{"title":"DomainEventDefinition","permalink":"/packages/laravel-event-system/deep-diving/support/domain-event-definition"},"next":{"title":"Events","permalink":"/packages/laravel-event-system/deep-diving/events"}}');var s=i(4848),r=i(8453);const a={sidebar_position:2,sidebar_label:"DomainEvent"},o="DomainEvent Contract",c={},l=[{value:"When to Use DomainEvent",id:"when-to-use-domainevent",level:2},{value:"Overview",id:"overview",level:2},{value:"Namespace",id:"namespace",level:2},{value:"Interface Definition",id:"interface-definition",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Required Methods",id:"required-methods",level:2},{value:"<code>key(): string</code>",id:"key-string",level:3},{value:"<code>definition(): DomainEventDefinition</code>",id:"definition-domaineventdefinition",level:3},{value:"DomainEventDefinition Parameters",id:"domaineventdefinition-parameters",level:2},{value:"<code>key</code> (string)",id:"key-string-1",level:3},{value:"<code>group</code> (string)",id:"group-string",level:3},{value:"<code>title</code> (string)",id:"title-string",level:3},{value:"<code>description</code> (string, nullable)",id:"description-string-nullable",level:3},{value:"<code>icon</code> (string, nullable)",id:"icon-string-nullable",level:3},{value:"<code>tags</code> (array, nullable)",id:"tags-array-nullable",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Registering Domain Events",id:"registering-domain-events",level:2},{value:"Dispatching Domain Events",id:"dispatching-domain-events",level:2},{value:"By Key",id:"by-key",level:3},{value:"By Instance",id:"by-instance",level:3},{value:"Use Cases",id:"use-cases",level:2},{value:"Workflow Automation",id:"workflow-automation",level:3},{value:"Event Logging",id:"event-logging",level:3},{value:"UI Event Selector",id:"ui-event-selector",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"domainevent-contract",children:"DomainEvent Contract"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"DomainEvent"})," contract is the foundation for implementing domain events in Laravel Event System. It provides a standardized interface for events with stable keys and rich metadata, enabling event-driven architecture with consistent structure across your application."]}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use-domainevent",children:"When to Use DomainEvent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["Use ",(0,s.jsx)(n.code,{children:"DomainEvent"})," when you need:"]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Stable event keys"}),": Use string keys instead of hard-coded class names"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rich metadata"}),": Include title, description, icon, and tags for UI/automation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Event registry"}),": Register events for lookup by key"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Domain-driven design"}),": Implement DDD patterns with domain events"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Decoupled architecture"}),": Dispatch events without knowing concrete classes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"UI integration"}),": Build event selection interfaces with metadata"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example scenarios:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Domain events in a domain-driven design architecture"}),"\n",(0,s.jsx)(n.li,{children:"Event-driven microservices communication"}),"\n",(0,s.jsx)(n.li,{children:"Workflow automation systems"}),"\n",(0,s.jsx)(n.li,{children:"Rule engines that trigger on events"}),"\n",(0,s.jsx)(n.li,{children:"Admin panels for event configuration"}),"\n",(0,s.jsx)(n.li,{children:"Event logging and audit systems"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"DomainEvent"})," is a contract that defines the structure for domain events:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Stable Key"}),": Each event has a unique, stable string key (e.g., ",(0,s.jsx)(n.code,{children:"'user.registered'"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Metadata Definition"}),": Rich metadata including title, description, icon, and tags"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Consistent Structure"}),": All domain events follow the same pattern"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Registry Support"}),": Events can be registered in the ",(0,s.jsx)(n.code,{children:"EventRegistry"})," for key-based lookup"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"JobMetric\\EventSystem\\Contracts\\DomainEvent\n"})}),"\n",(0,s.jsx)(n.h2,{id:"interface-definition",children:"Interface Definition"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"interface DomainEvent\n{\n    public static function key(): string;\n    public static function definition(): DomainEventDefinition;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsx)(n.p,{children:"Implement the contract in your event class:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Contracts\\DomainEvent;\nuse JobMetric\\EventSystem\\Support\\DomainEventDefinition;\n\nclass UserRegistered implements DomainEvent\n{\n    public function __construct(\n        public int $userId,\n        public string $email,\n        public string $name\n    ) {}\n\n    public static function key(): string\n    {\n        return 'user.registered';\n    }\n\n    public static function definition(): DomainEventDefinition\n    {\n        return new DomainEventDefinition(\n            self::key(),\n            'user::events.group',\n            'user::events.registered.title',\n            'user::events.registered.description',\n            'fas fa-user-plus',\n            ['user', 'registration', 'authentication']\n        );\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"required-methods",children:"Required Methods"}),"\n",(0,s.jsx)(n.h3,{id:"key-string",children:(0,s.jsx)(n.code,{children:"key(): string"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the stable technical key for the domain event."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"string"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public static function key(): string\n{\n    return 'product.created';\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Best Practices:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use dot notation: ",(0,s.jsx)(n.code,{children:"'entity.action'"})," (e.g., ",(0,s.jsx)(n.code,{children:"'user.registered'"}),", ",(0,s.jsx)(n.code,{children:"'order.completed'"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Keep keys stable - don't change them after initial release"}),"\n",(0,s.jsx)(n.li,{children:"Use lowercase with dots as separators"}),"\n",(0,s.jsx)(n.li,{children:"Make keys descriptive and unique"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"definition-domaineventdefinition",children:(0,s.jsx)(n.code,{children:"definition(): DomainEventDefinition"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the full metadata definition for this domain event."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"DomainEventDefinition"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public static function definition(): DomainEventDefinition\n{\n    return new DomainEventDefinition(\n        self::key(),                                    // key\n        'product::events.group',                       // group (translation key)\n        'product::events.created.title',               // title (translation key)\n        'product::events.created.description',         // description (translation key)\n        'fas fa-box',                                   // icon (Font Awesome class)\n        ['product', 'inventory', 'catalog']            // tags\n    );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"domaineventdefinition-parameters",children:"DomainEventDefinition Parameters"}),"\n",(0,s.jsxs)(n.h3,{id:"key-string-1",children:[(0,s.jsx)(n.code,{children:"key"})," (string)"]}),"\n",(0,s.jsxs)(n.p,{children:["The stable event key (should match ",(0,s.jsx)(n.code,{children:"key()"})," return value)."]}),"\n",(0,s.jsxs)(n.h3,{id:"group-string",children:[(0,s.jsx)(n.code,{children:"group"})," (string)"]}),"\n",(0,s.jsx)(n.p,{children:"Translation key for the event group/category. Used for grouping events in UI."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example:"})," ",(0,s.jsx)(n.code,{children:"'product::events.group'"})]}),"\n",(0,s.jsxs)(n.h3,{id:"title-string",children:[(0,s.jsx)(n.code,{children:"title"})," (string)"]}),"\n",(0,s.jsx)(n.p,{children:"Translation key for the event title. Human-readable name for the event."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example:"})," ",(0,s.jsx)(n.code,{children:"'product::events.created.title'"})]}),"\n",(0,s.jsxs)(n.h3,{id:"description-string-nullable",children:[(0,s.jsx)(n.code,{children:"description"})," (string, nullable)"]}),"\n",(0,s.jsx)(n.p,{children:"Translation key for the event description. Detailed explanation of what the event represents."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example:"})," ",(0,s.jsx)(n.code,{children:"'product::events.created.description'"})]}),"\n",(0,s.jsxs)(n.h3,{id:"icon-string-nullable",children:[(0,s.jsx)(n.code,{children:"icon"})," (string, nullable)"]}),"\n",(0,s.jsx)(n.p,{children:"Icon class (e.g., Font Awesome). Used for visual representation in UI."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example:"})," ",(0,s.jsx)(n.code,{children:"'fas fa-box'"}),", ",(0,s.jsx)(n.code,{children:"'fas fa-user-plus'"})]}),"\n",(0,s.jsxs)(n.h3,{id:"tags-array-nullable",children:[(0,s.jsx)(n.code,{children:"tags"})," (array, nullable)"]}),"\n",(0,s.jsx)(n.p,{children:"Array of tags for categorization and filtering."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example:"})," ",(0,s.jsx)(n.code,{children:"['product', 'inventory', 'catalog']"})]}),"\n",(0,s.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"namespace App\\Events;\n\nuse JobMetric\\EventSystem\\Contracts\\DomainEvent;\nuse JobMetric\\EventSystem\\Support\\DomainEventDefinition;\n\nclass ProductCreated implements DomainEvent\n{\n    public function __construct(\n        public int $productId,\n        public string $name,\n        public float $price,\n        public int $categoryId\n    ) {}\n\n    public static function key(): string\n    {\n        return 'product.created';\n    }\n\n    public static function definition(): DomainEventDefinition\n    {\n        return new DomainEventDefinition(\n            self::key(),\n            'product::events.group',\n            'product::events.created.title',\n            'product::events.created.description',\n            'fas fa-box',\n            ['product', 'inventory', 'catalog']\n        );\n    }\n}\n\nclass ProductUpdated implements DomainEvent\n{\n    public function __construct(\n        public int $productId,\n        public array $changes\n    ) {}\n\n    public static function key(): string\n    {\n        return 'product.updated';\n    }\n\n    public static function definition(): DomainEventDefinition\n    {\n        return new DomainEventDefinition(\n            self::key(),\n            'product::events.group',\n            'product::events.updated.title',\n            'product::events.updated.description',\n            'fas fa-edit',\n            ['product', 'inventory']\n        );\n    }\n}\n\nclass OrderCompleted implements DomainEvent\n{\n    public function __construct(\n        public int $orderId,\n        public float $total,\n        public int $userId\n    ) {}\n\n    public static function key(): string\n    {\n        return 'order.completed';\n    }\n\n    public static function definition(): DomainEventDefinition\n    {\n        return new DomainEventDefinition(\n            self::key(),\n            'order::events.group',\n            'order::events.completed.title',\n            'order::events.completed.description',\n            'fas fa-check-circle',\n            ['order', 'payment', 'fulfillment']\n        );\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"registering-domain-events",children:"Registering Domain Events"}),"\n",(0,s.jsx)(n.p,{children:"Register domain events in a service provider:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"namespace App\\Providers;\n\nuse Illuminate\\Support\\ServiceProvider;\nuse JobMetric\\EventSystem\\Support\\EventRegistry;\nuse App\\Events\\ProductCreated;\nuse App\\Events\\ProductUpdated;\nuse App\\Events\\OrderCompleted;\n\nclass EventSystemServiceProvider extends ServiceProvider\n{\n    public function boot(EventRegistry $registry): void\n    {\n        $registry->register(ProductCreated::class);\n        $registry->register(ProductUpdated::class);\n        $registry->register(OrderCompleted::class);\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"dispatching-domain-events",children:"Dispatching Domain Events"}),"\n",(0,s.jsx)(n.h3,{id:"by-key",children:"By Key"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Facades\\EventBus;\n\n// Dispatch by stable key\nEventBus::dispatchByKey('product.created', $productId, $name, $price, $categoryId);\n\n// Or use helper function\neventKey('product.created', $productId, $name, $price, $categoryId);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"by-instance",children:"By Instance"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"use App\\Events\\ProductCreated;\n\n// Dispatch concrete event instance\n$event = new ProductCreated($productId, $name, $price, $categoryId);\nEventBus::dispatch($event);\n\n// Or use Laravel's event helper\nevent(new ProductCreated($productId, $name, $price, $categoryId));\n"})}),"\n",(0,s.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,s.jsx)(n.h3,{id:"workflow-automation",children:"Workflow Automation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"class WorkflowRule\n{\n    public function whenProductCreated(): void\n    {\n        // Listen for product.created event\n        Event::listen(function (ProductCreated $event) {\n            // Trigger workflow\n            $this->triggerWorkflow('product-approval', $event->productId);\n        });\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"event-logging",children:"Event Logging"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"class EventLogger\n{\n    public function logDomainEvent(DomainEvent $event): void\n    {\n        $registry = app(EventRegistry::class);\n        $key = $registry->keyFor($event);\n        $definition = $registry->definitionForKey($key);\n\n        Log::info('Domain event fired', [\n            'key' => $key,\n            'title' => trans($definition->title),\n            'tags' => $definition->tags,\n        ]);\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ui-event-selector",children:"UI Event Selector"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"class EventSelectorComponent\n{\n    public function getAvailableEvents(): array\n    {\n        $registry = app(EventRegistry::class);\n        $definitions = $registry->allDefinitions();\n\n        return collect($definitions)->map(function ($definition, $key) {\n            return [\n                'key' => $key,\n                'title' => trans($definition->title),\n                'description' => trans($definition->description),\n                'icon' => $definition->icon,\n                'tags' => $definition->tags,\n                'group' => trans($definition->group),\n            ];\n        })->toArray();\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Stable Keys"}),": Never change event keys after initial release"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Descriptive Names"}),": Use clear, descriptive key names"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Consistent Structure"}),": Follow the same pattern for all domain events"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rich Metadata"}),": Provide complete metadata for UI/automation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Translation Keys"}),": Use translation keys for all user-facing text"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tagging"}),": Use tags for categorization and filtering"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Icon Consistency"}),": Use consistent icon sets (e.g., Font Awesome)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/packages/laravel-event-system/deep-diving/support/domain-event-definition",children:"DomainEventDefinition"})," - Metadata definition class"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/packages/laravel-event-system/deep-diving/support/event-bus",children:"EventBus"})," - Event bus for dispatching events"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/packages/laravel-event-system/deep-diving/support/event-registry",children:"EventRegistry"})," - Registry for managing domain events"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/packages/laravel-event-system/deep-diving/event-system",children:"EventSystem"})," - Service for managing event-listener bindings"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>a,x:()=>o});var t=i(6540);const s={},r=t.createContext(s);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);