"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[8521],{28453(e,n,t){t.d(n,{R:()=>l,x:()=>s});var i=t(96540);const r={},a=i.createContext(r);function l(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(a.Provider,{value:n},e.children)}},29955(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"laravel-unit-converter/deep-diving/exceptions/unit-value-zero","title":"UnitValueZeroException","description":"Thrown when attempting to change the default value to a unit with value = 0.","source":"@site/packages/laravel-unit-converter/deep-diving/exceptions/unit-value-zero.md","sourceDirName":"laravel-unit-converter/deep-diving/exceptions","slug":"/laravel-unit-converter/deep-diving/exceptions/unit-value-zero","permalink":"/packages/laravel-unit-converter/deep-diving/exceptions/unit-value-zero","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-unit-converter/deep-diving/exceptions/unit-value-zero.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9,"sidebar_label":"UnitValueZeroException"},"sidebar":"packagesSidebar","previous":{"title":"UnitTypeUsedInException","permalink":"/packages/laravel-unit-converter/deep-diving/exceptions/unit-type-used-in"},"next":{"title":"unit:list","permalink":"/packages/laravel-unit-converter/deep-diving/commands/unit-list"}}');var r=t(74848),a=t(28453);const l={sidebar_position:9,sidebar_label:"UnitValueZeroException"},s="UnitValueZeroException",o={},d=[{value:"Namespace",id:"namespace",level:2},{value:"HTTP Status Code",id:"http-status-code",level:2},{value:"Constructor",id:"constructor",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Understanding the Problem",id:"understanding-the-problem",level:2},{value:"Example: Why Zero Fails",id:"example-why-zero-fails",level:3},{value:"When Is It Thrown?",id:"when-is-it-thrown",level:2},{value:"Example",id:"example",level:3},{value:"Handling the Exception",id:"handling-the-exception",level:2},{value:"In Controllers",id:"in-controllers",level:3},{value:"Prevention",id:"prevention",level:2},{value:"1. Validate Before Changing Base",id:"1-validate-before-changing-base",level:3},{value:"2. Filter Zero-Value Units in UI",id:"2-filter-zero-value-units-in-ui",level:3},{value:"3. Prevent Creating Zero-Value Units",id:"3-prevent-creating-zero-value-units",level:3},{value:"When Are Zero-Value Units Valid?",id:"when-are-zero-value-units-valid",level:2},{value:"Related Exceptions",id:"related-exceptions",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"unitvaluezeroexception",children:"UnitValueZeroException"})}),"\n",(0,r.jsxs)(n.p,{children:["Thrown when attempting to change the default value to a unit with ",(0,r.jsx)(n.code,{children:"value = 0"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"JobMetric\\UnitConverter\\Exceptions\\UnitValueZeroException\n"})}),"\n",(0,r.jsx)(n.h2,{id:"http-status-code",children:"HTTP Status Code"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"400 Bad Request"})}),"\n",(0,r.jsx)(n.h2,{id:"constructor",children:"Constructor"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public function __construct(\n    int $code = 400,\n    ?Throwable $previous = null\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$code"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"int"})}),(0,r.jsx)(n.td,{children:"HTTP status code (default: 400)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$previous"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Throwable|null"})}),(0,r.jsx)(n.td,{children:"Previous exception for chaining"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"understanding-the-problem",children:"Understanding the Problem"}),"\n",(0,r.jsx)(n.p,{children:"When changing the default (base) unit, all other units are recalculated using the formula:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"new_value = old_value / pivot_value\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Where ",(0,r.jsx)(n.code,{children:"pivot_value"})," is the current value of the new base unit."]}),"\n",(0,r.jsxs)(n.p,{children:["If ",(0,r.jsx)(n.code,{children:"pivot_value = 0"}),", this results in ",(0,r.jsx)(n.strong,{children:"division by zero"}),", which is mathematically undefined."]}),"\n",(0,r.jsx)(n.h3,{id:"example-why-zero-fails",children:"Example: Why Zero Fails"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Current state:\n\u251c\u2500\u2500 Gram: value = 1 (base)\n\u251c\u2500\u2500 Kilogram: value = 1000\n\u2514\u2500\u2500 ZeroUnit: value = 0\n\nTrying to make ZeroUnit the base:\n\u251c\u2500\u2500 Gram: 1 / 0 = ??? (undefined!)\n\u251c\u2500\u2500 Kilogram: 1000 / 0 = ??? (undefined!)\n\u2514\u2500\u2500 ZeroUnit: 0 / 0 = ??? (undefined!)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"when-is-it-thrown",children:"When Is It Thrown?"}),"\n",(0,r.jsxs)(n.p,{children:["This exception is thrown when calling ",(0,r.jsx)(n.code,{children:"changeDefaultValue()"})," with a unit that has ",(0,r.jsx)(n.code,{children:"value = 0"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\UnitConverter\\Facades\\UnitConverter;\n\n// Create a unit with value = 0 (unusual but possible)\n$response = UnitConverter::store([\n    'type' => 'custom',\n    'value' => 0,\n    'translation' => [...],\n]);\n\n$zeroUnit = $response->data;\n\n// Later, trying to make it the base unit - WRONG!\nUnitConverter::changeDefaultValue($zeroUnit->id);\n// Throws: UnitValueZeroException\n"})}),"\n",(0,r.jsx)(n.h2,{id:"handling-the-exception",children:"Handling the Exception"}),"\n",(0,r.jsx)(n.h3,{id:"in-controllers",children:"In Controllers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\UnitConverter\\Exceptions\\UnitValueZeroException;\nuse JobMetric\\UnitConverter\\Facades\\UnitConverter;\n\nclass UnitController extends Controller\n{\n    public function changeBase(Request $request)\n    {\n        try {\n            $response = UnitConverter::changeDefaultValue($request->unit_id);\n            return response()->json($response->data);\n        } catch (UnitValueZeroException $e) {\n            return response()->json([\n                'error' => 'invalid_base_unit',\n                'message' => $e->getMessage(),\n                'hint' => 'Cannot use a unit with value = 0 as the base unit (division by zero).',\n            ], 400);\n        }\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"prevention",children:"Prevention"}),"\n",(0,r.jsx)(n.h3,{id:"1-validate-before-changing-base",children:"1. Validate Before Changing Base"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\UnitConverter\\Models\\Unit;\nuse JobMetric\\UnitConverter\\Facades\\UnitConverter;\n\nfunction safeChangeBase(int $unitId): mixed\n{\n    $unit = Unit::find($unitId);\n    \n    if (!$unit) {\n        throw new \\InvalidArgumentException('Unit not found');\n    }\n    \n    if ((float) $unit->value === 0.0) {\n        throw new \\InvalidArgumentException(\n            'Cannot use a unit with value = 0 as base unit'\n        );\n    }\n    \n    return UnitConverter::changeDefaultValue($unitId);\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-filter-zero-value-units-in-ui",children:"2. Filter Zero-Value Units in UI"}),"\n",(0,r.jsx)(n.p,{children:"When showing units that can become base:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Only show units with non-zero values as base candidates\n$eligibleForBase = Unit::where('type', $type)\n    ->where('value', '!=', 0)\n    ->get();\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-prevent-creating-zero-value-units",children:"3. Prevent Creating Zero-Value Units"}),"\n",(0,r.jsx)(n.p,{children:"Consider if zero-value units make sense in your application:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"class StoreUnitRequest extends FormRequest\n{\n    public function rules(): array\n    {\n        return [\n            'type' => 'required|string',\n            'value' => 'required|numeric|gt:0', // Must be greater than 0\n            'translation' => 'required|array',\n        ];\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"when-are-zero-value-units-valid",children:"When Are Zero-Value Units Valid?"}),"\n",(0,r.jsxs)(n.p,{children:["In most cases, a unit with ",(0,r.jsx)(n.code,{children:"value = 0"})," doesn't make practical sense. However, there might be edge cases:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Placeholder units"})," - Temporarily created units awaiting proper values"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Special markers"}),' - Units that represent "none" or "not applicable"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data migration"})," - During data cleanup or migration processes"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If you have such units, just ensure they're never used as the base unit."}),"\n",(0,r.jsx)(n.h2,{id:"related-exceptions",children:"Related Exceptions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./unit-type-default-value",children:"UnitTypeDefaultValueException"})," - When first unit doesn't have value = 1"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./unit-type-cannot-change-default-value",children:"UnitTypeCannotChangeDefaultValueException"})," - When trying to modify base unit's value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./unit-type-used-in",children:"UnitTypeUsedInException"})," - When unit is used in relations"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);