"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[3196],{4190(e,a,t){t.r(a),t.d(a,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"laravel-metadata/deep-diving/has-filter-meta","title":"HasFilterMeta","description":"The HasFilterMeta trait provides dynamic filtering capability based on metadata for any Eloquent model. It checks for metadata input in the HTTP request and applies conditional join and where clauses to the query builder accordingly.","source":"@site/packages/laravel-metadata/deep-diving/has-filter-meta.md","sourceDirName":"laravel-metadata/deep-diving","slug":"/laravel-metadata/deep-diving/has-filter-meta","permalink":"/packages/laravel-metadata/deep-diving/has-filter-meta","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-metadata/deep-diving/has-filter-meta.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"HasFilterMeta"},"sidebar":"packagesSidebar","previous":{"title":"HasMeta","permalink":"/packages/laravel-metadata/deep-diving/has-meta"},"next":{"title":"HasDynamicMeta","permalink":"/packages/laravel-metadata/deep-diving/has-dynamic-meta"}}');var r=t(4848),i=t(8453),l=t(8774);const s={sidebar_position:2,sidebar_label:"HasFilterMeta"},d="HasFilterMeta",c={},o=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Attach Trait to Controller or Service",id:"attach-trait-to-controller-or-service",level:3},{value:"Available Methods",id:"available-methods",level:2},{value:"Query Filter Metadata",id:"query-filter-metadata",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"Request Format",id:"request-format",level:2},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Controller with Metadata Filtering",id:"controller-with-metadata-filtering",level:3},{value:"Service with Custom Primary Column",id:"service-with-custom-primary-column",level:3},{value:"API Endpoint Example",id:"api-endpoint-example",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function u(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"hasfiltermeta",children:"HasFilterMeta"})}),"\n",(0,r.jsxs)(a.p,{children:["The ",(0,r.jsx)(a.code,{children:"HasFilterMeta"})," trait provides dynamic filtering capability based on metadata for any Eloquent model. It checks for metadata input in the HTTP request and applies conditional join and where clauses to the query builder accordingly."]}),"\n",(0,r.jsx)(a.h2,{id:"namespace",children:"Namespace"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-php",children:"JobMetric\\Metadata\\HasFilterMeta\n"})}),"\n",(0,r.jsx)(a.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(a.p,{children:["The ",(0,r.jsx)(a.code,{children:"HasFilterMeta"})," trait is typically used in controllers or services to allow filtering models via polymorphic metadata key-value pairs in APIs or admin panels. It automatically joins the metadata table and applies where clauses based on request parameters."]}),"\n",(0,r.jsx)(a.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,r.jsx)(a.h3,{id:"attach-trait-to-controller-or-service",children:"Attach Trait to Controller or Service"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-php",children:"use JobMetric\\Metadata\\HasFilterMeta;\n\nclass ProductController extends Controller\n{\n    use HasFilterMeta;\n\n    public function index(Request $request)\n    {\n        $query = Product::query();\n        \n        // Apply metadata filtering\n        $this->queryFilterMetadata($query, Product::class);\n        \n        return $query->get();\n    }\n}\n"})}),"\n",(0,r.jsx)(a.h2,{id:"available-methods",children:"Available Methods"}),"\n",(0,r.jsx)(a.h3,{id:"query-filter-metadata",children:"Query Filter Metadata"}),"\n",(0,r.jsx)(a.p,{children:"Applies dynamic filtering to a query based on metadata sent via HTTP request:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-php",children:"$query = Product::query();\n$this->queryFilterMetadata($query, Product::class);\n"})}),"\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"Builder &$query"})," - The Eloquent query builder instance (passed by reference)"]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"string $className"})," - The fully-qualified class name of the model being filtered"]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"string $primaryColumn"})," - The column name used as primary identifier (default: ",(0,r.jsx)(a.code,{children:"'id'"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.strong,{children:"Returns:"})," ",(0,r.jsx)(a.code,{children:"void"})]}),"\n",(0,r.jsx)(a.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,r.jsx)(a.p,{children:"The method:"}),"\n",(0,r.jsxs)(a.ol,{children:["\n",(0,r.jsxs)(a.li,{children:["Checks if a ",(0,r.jsx)(a.code,{children:"metadata"})," key exists in the request"]}),"\n",(0,r.jsx)(a.li,{children:"Validates that metadata contains valid key-value pairs"}),"\n",(0,r.jsx)(a.li,{children:"Joins the metadata table using a polymorphic relation"}),"\n",(0,r.jsxs)(a.li,{children:["Applies ",(0,r.jsx)(a.code,{children:"where"})," clauses to match requested metadata keys and values"]}),"\n"]}),"\n",(0,r.jsx)(a.h2,{id:"request-format",children:"Request Format"}),"\n",(0,r.jsx)(a.p,{children:"The method expects metadata in the request as an associative array:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{children:"GET /products?metadata[color]=red&metadata[size]=large\n"})}),"\n",(0,r.jsx)(a.p,{children:"Or in JSON:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-json",children:'{\n  "metadata": {\n    "color": "red",\n    "size": "large"\n  }\n}\n'})}),"\n",(0,r.jsx)(a.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,r.jsx)(a.h3,{id:"controller-with-metadata-filtering",children:"Controller with Metadata Filtering"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-php",children:"namespace App\\Http\\Controllers;\n\nuse App\\Models\\Product;\nuse Illuminate\\Http\\Request;\nuse JobMetric\\Metadata\\HasFilterMeta;\n\nclass ProductController extends Controller\n{\n    use HasFilterMeta;\n\n    public function index(Request $request)\n    {\n        $query = Product::query();\n        \n        // Apply metadata filtering\n        $this->queryFilterMetadata($query, Product::class);\n        \n        // Apply other filters\n        if ($request->has('category')) {\n            $query->where('category_id', $request->get('category'));\n        }\n        \n        return $query->paginate(15);\n    }\n}\n"})}),"\n",(0,r.jsx)(a.h3,{id:"service-with-custom-primary-column",children:"Service with Custom Primary Column"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-php",children:"namespace App\\Services;\n\nuse App\\Models\\Product;\nuse JobMetric\\Metadata\\HasFilterMeta;\n\nclass ProductService\n{\n    use HasFilterMeta;\n\n    public function search(array $filters)\n    {\n        $query = Product::query();\n        \n        // Use custom primary column\n        $this->queryFilterMetadata($query, Product::class, 'product_id');\n        \n        return $query->get();\n    }\n}\n"})}),"\n",(0,r.jsx)(a.h3,{id:"api-endpoint-example",children:"API Endpoint Example"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-php",children:"// Request: GET /api/products?metadata[color]=red&metadata[size]=large\n// Returns: Products with color='red' AND size='large'\n\nRoute::get('/products', [ProductController::class, 'index']);\n"})}),"\n",(0,r.jsx)(a.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["\n",(0,r.jsx)(l.A,{to:"/packages/laravel-metadata/deep-diving/has-meta",children:"HasMeta"}),"\n"]}),"\n",(0,r.jsxs)(a.li,{children:["\n",(0,r.jsx)(l.A,{to:"/packages/laravel-metadata/deep-diving/models/meta",children:"Meta Model"}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},8453(e,a,t){t.d(a,{R:()=>l,x:()=>s});var n=t(6540);const r={},i=n.createContext(r);function l(e){const a=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),n.createElement(i.Provider,{value:a},e.children)}}}]);