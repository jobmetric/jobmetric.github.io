"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[8289],{28453(e,n,s){s.d(n,{R:()=>l,x:()=>o});var t=s(96540);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}},89089(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"laravel-event-system/deep-diving/event-system-resource","title":"EventSystemResource","description":"The EventSystemResource transforms an Event model into a JSON-serializable array suitable for API responses. It ensures that all relevant fields from the model are exposed in a consistent format, including formatted timestamps and key configuration values.","source":"@site/packages/laravel-event-system/deep-diving/event-system-resource.md","sourceDirName":"laravel-event-system/deep-diving","slug":"/laravel-event-system/deep-diving/event-system-resource","permalink":"/packages/laravel-event-system/deep-diving/event-system-resource","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-event-system/deep-diving/event-system-resource.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"sidebar_label":"EventSystemResource"},"sidebar":"packagesSidebar","previous":{"title":"StoreEventSystemRequest","permalink":"/packages/laravel-event-system/deep-diving/store-event-system-request"},"next":{"title":"ClassExistRule","permalink":"/packages/laravel-event-system/deep-diving/class-exist-rule"}}');var r=s(74848),i=s(28453),l=s(28774);const o={sidebar_position:7,sidebar_label:"EventSystemResource"},d="EventSystemResource",c={},a=[{value:"Namespace",id:"namespace",level:2},{value:"Overview",id:"overview",level:2},{value:"Resource Structure",id:"resource-structure",level:2},{value:"Field Details",id:"field-details",level:2},{value:"Complete Field Reference",id:"complete-field-reference",level:3},{value:"Field Descriptions",id:"field-descriptions",level:3},{value:"<code>id</code> (integer)",id:"id-integer",level:4},{value:"<code>name</code> (string)",id:"name-string",level:4},{value:"<code>description</code> (string|null)",id:"description-stringnull",level:4},{value:"<code>event</code> (string)",id:"event-string",level:4},{value:"<code>listener</code> (string)",id:"listener-string",level:4},{value:"<code>priority</code> (integer)",id:"priority-integer",level:4},{value:"<code>status</code> (boolean)",id:"status-boolean",level:4},{value:"<code>created_at</code> (string)",id:"created_at-string",level:4},{value:"<code>updated_at</code> (string)",id:"updated_at-string",level:4},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Single Resource",id:"single-resource",level:3},{value:"Resource Collection",id:"resource-collection",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Example 1: Controller - Index (List All)",id:"example-1-controller---index-list-all",level:3},{value:"Example 2: Controller - Show (Single)",id:"example-2-controller---show-single",level:3},{value:"Example 3: Controller - Store (Create)",id:"example-3-controller---store-create",level:3},{value:"Example 4: Controller - With Pagination",id:"example-4-controller---with-pagination",level:3},{value:"Example 5: API Response with Status Code",id:"example-5-api-response-with-status-code",level:3},{value:"Example 6: Filtered Collection",id:"example-6-filtered-collection",level:3},{value:"Example 7: Service Response Integration",id:"example-7-service-response-integration",level:3},{value:"Example 8: Conditional Fields",id:"example-8-conditional-fields",level:3},{value:"Example 9: API Resource Wrapper",id:"example-9-api-resource-wrapper",level:3},{value:"Example 10: Export Functionality",id:"example-10-export-functionality",level:3},{value:"Resource Methods",id:"resource-methods",level:2},{value:"<code>make()</code>",id:"make",level:3},{value:"<code>collection()</code>",id:"collection",level:3},{value:"<code>toArray()</code>",id:"toarray",level:3},{value:"<code>response()</code>",id:"response",level:3},{value:"Timestamp Formatting",id:"timestamp-formatting",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"When NOT to Use",id:"when-not-to-use",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Always Use Resource for API Responses",id:"1-always-use-resource-for-api-responses",level:3},{value:"2. Use Collections for Multiple Items",id:"2-use-collections-for-multiple-items",level:3},{value:"3. Set Appropriate Status Codes",id:"3-set-appropriate-status-codes",level:3},{value:"4. Use with Service Responses",id:"4-use-with-service-responses",level:3},{value:"5. Extend for Custom Fields",id:"5-extend-for-custom-fields",level:3},{value:"Common Mistakes",id:"common-mistakes",level:2},{value:"Mistake 1: Not Using Resource for API Responses",id:"mistake-1-not-using-resource-for-api-responses",level:3},{value:"Mistake 2: Manual Array Building",id:"mistake-2-manual-array-building",level:3},{value:"Mistake 3: Not Handling Collections",id:"mistake-3-not-handling-collections",level:3},{value:"Mistake 4: Forgetting Status Codes",id:"mistake-4-forgetting-status-codes",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Eager Loading",id:"eager-loading",level:3},{value:"Pagination",id:"pagination",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"eventsystemresource",children:"EventSystemResource"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"EventSystemResource"})," transforms an ",(0,r.jsx)(n.code,{children:"Event"})," model into a JSON-serializable array suitable for API responses. It ensures that all relevant fields from the model are exposed in a consistent format, including formatted timestamps and key configuration values."]}),"\n",(0,r.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource\n"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"EventSystemResource"})," is a Laravel JSON resource that:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Transforms Event models"})," into consistent JSON structures"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Formats timestamps"})," in a standardized format (",(0,r.jsx)(n.code,{children:"Y-m-d H:i:s"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Exposes all model fields"})," in a predictable structure"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Supports collections"})," for multiple events"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Works with pagination"})," for large datasets"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Integrates seamlessly"})," with EventSystem service responses"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"resource-structure",children:"Resource Structure"}),"\n",(0,r.jsxs)(n.p,{children:["The resource transforms the ",(0,r.jsx)(n.code,{children:"Event"})," model into the following JSON structure:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "id": 1,\n    "name": "user.created",\n    "description": "Send welcome email when user registers",\n    "event": "App\\\\Events\\\\UserCreated",\n    "listener": "App\\\\Listeners\\\\SendWelcomeEmail",\n    "priority": 10,\n    "status": true,\n    "created_at": "2024-01-01 12:00:00",\n    "updated_at": "2024-01-01 12:00:00"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"field-details",children:"Field Details"}),"\n",(0,r.jsx)(n.h3,{id:"complete-field-reference",children:"Complete Field Reference"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"id"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"Unique identifier of the event-listener entry"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"1"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Human-readable unique name for the event binding"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"user.created"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"description"})}),(0,r.jsx)(n.td,{children:"string|null"}),(0,r.jsx)(n.td,{children:"Optional description for the entry"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"Send welcome email"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"event"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Fully qualified class name of the event"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"App\\\\Events\\\\UserCreated"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"listener"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Fully qualified class name of the listener"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"App\\\\Listeners\\\\SendWelcomeEmail"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"priority"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"Listener execution priority (lower = earlier)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"10"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"status"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsxs)(n.td,{children:["Whether the listener is active (",(0,r.jsx)(n.code,{children:"true"}),") or disabled (",(0,r.jsx)(n.code,{children:"false"}),")"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"created_at"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Timestamp when the record was created (formatted)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"2024-01-01 12:00:00"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"updated_at"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Timestamp when the record was last updated (formatted)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"2024-01-01 12:00:00"'})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"field-descriptions",children:"Field Descriptions"}),"\n",(0,r.jsxs)(n.h4,{id:"id-integer",children:[(0,r.jsx)(n.code,{children:"id"})," (integer)"]}),"\n",(0,r.jsx)(n.p,{children:"Unique identifier of the event-listener entry in the database."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "id": 1\n}\n'})}),"\n",(0,r.jsxs)(n.h4,{id:"name-string",children:[(0,r.jsx)(n.code,{children:"name"})," (string)"]}),"\n",(0,r.jsx)(n.p,{children:"Human-readable unique name for the event binding. Used for identification and reference."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "name": "user.created"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common naming patterns:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{entity}.{action}"})," - ",(0,r.jsx)(n.code,{children:'"user.created"'}),", ",(0,r.jsx)(n.code,{children:'"order.completed"'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{module}.{entity}.{action}"})," - ",(0,r.jsx)(n.code,{children:'"shop.order.completed"'})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{feature}.{action}"})," - ",(0,r.jsx)(n.code,{children:'"notification.send"'})]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"description-stringnull",children:[(0,r.jsx)(n.code,{children:"description"})," (string|null)"]}),"\n",(0,r.jsx)(n.p,{children:"Optional description for the entry. Provides context about what the event binding does."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "description": "Send welcome email when user registers"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"When null:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "description": null\n}\n'})}),"\n",(0,r.jsxs)(n.h4,{id:"event-string",children:[(0,r.jsx)(n.code,{children:"event"})," (string)"]}),"\n",(0,r.jsx)(n.p,{children:"Fully qualified class name of the event class. This is the event that will be dispatched."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "event": "App\\\\Events\\\\UserCreated"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'"App\\\\Events\\\\UserCreated"'})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'"App\\\\Events\\\\OrderCompleted"'})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'"JobMetric\\\\EventSystem\\\\Events\\\\EventSystemStoredEvent"'})}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"listener-string",children:[(0,r.jsx)(n.code,{children:"listener"})," (string)"]}),"\n",(0,r.jsx)(n.p,{children:"Fully qualified class name of the listener class. This is the class that handles the event."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "listener": "App\\\\Listeners\\\\SendWelcomeEmail"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'"App\\\\Listeners\\\\SendWelcomeEmail"'})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'"App\\\\Listeners\\\\ProcessOrder"'})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'"App\\\\Listeners\\\\NotifyAdmin"'})}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"priority-integer",children:[(0,r.jsx)(n.code,{children:"priority"})," (integer)"]}),"\n",(0,r.jsx)(n.p,{children:"Listener execution priority. Lower values execute earlier, higher values execute later."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "priority": 10\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Priority behavior:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Priority ",(0,r.jsx)(n.code,{children:"0"})," executes first"]}),"\n",(0,r.jsxs)(n.li,{children:["Priority ",(0,r.jsx)(n.code,{children:"10"})," executes after priority ",(0,r.jsx)(n.code,{children:"0-9"})]}),"\n",(0,r.jsxs)(n.li,{children:["Priority ",(0,r.jsx)(n.code,{children:"100"})," executes last"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"status-boolean",children:[(0,r.jsx)(n.code,{children:"status"})," (boolean)"]}),"\n",(0,r.jsxs)(n.p,{children:["Whether the listener is active (",(0,r.jsx)(n.code,{children:"true"}),") or disabled (",(0,r.jsx)(n.code,{children:"false"}),"). Disabled listeners are not executed."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "status": true\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Values:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"true"})," - Listener is active and will be executed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"false"})," - Listener is disabled and will not be executed"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"created_at-string",children:[(0,r.jsx)(n.code,{children:"created_at"})," (string)"]}),"\n",(0,r.jsxs)(n.p,{children:["Timestamp when the record was created, formatted as ",(0,r.jsx)(n.code,{children:"Y-m-d H:i:s"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "created_at": "2024-01-01 12:00:00"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Format:"})," ",(0,r.jsx)(n.code,{children:"YYYY-MM-DD HH:MM:SS"})," (24-hour format)"]}),"\n",(0,r.jsxs)(n.h4,{id:"updated_at-string",children:[(0,r.jsx)(n.code,{children:"updated_at"})," (string)"]}),"\n",(0,r.jsxs)(n.p,{children:["Timestamp when the record was last updated, formatted as ",(0,r.jsx)(n.code,{children:"Y-m-d H:i:s"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "updated_at": "2024-01-01 12:00:00"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Format:"})," ",(0,r.jsx)(n.code,{children:"YYYY-MM-DD HH:MM:SS"})," (24-hour format)"]}),"\n",(0,r.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,r.jsx)(n.h3,{id:"single-resource",children:"Single Resource"}),"\n",(0,r.jsxs)(n.p,{children:["Transform a single ",(0,r.jsx)(n.code,{children:"Event"})," model:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Models\\Event;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\n\n$event = Event::find(1);\n\nreturn EventSystemResource::make($event);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "id": 1,\n    "name": "user.created",\n    "description": "Send welcome email",\n    "event": "App\\\\Events\\\\UserCreated",\n    "listener": "App\\\\Listeners\\\\SendWelcomeEmail",\n    "priority": 10,\n    "status": true,\n    "created_at": "2024-01-01 12:00:00",\n    "updated_at": "2024-01-01 12:00:00"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"resource-collection",children:"Resource Collection"}),"\n",(0,r.jsxs)(n.p,{children:["Transform multiple ",(0,r.jsx)(n.code,{children:"Event"})," models:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Models\\Event;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\n\n$events = Event::where('status', true)->get();\n\nreturn EventSystemResource::collection($events);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "data": [\n        {\n            "id": 1,\n            "name": "user.created",\n            "description": "Send welcome email",\n            "event": "App\\\\Events\\\\UserCreated",\n            "listener": "App\\\\Listeners\\\\SendWelcomeEmail",\n            "priority": 10,\n            "status": true,\n            "created_at": "2024-01-01 12:00:00",\n            "updated_at": "2024-01-01 12:00:00"\n        },\n        {\n            "id": 2,\n            "name": "order.completed",\n            "description": "Send order confirmation",\n            "event": "App\\\\Events\\\\OrderCompleted",\n            "listener": "App\\\\Listeners\\\\SendOrderConfirmation",\n            "priority": 5,\n            "status": true,\n            "created_at": "2024-01-01 12:00:00",\n            "updated_at": "2024-01-01 12:00:00"\n        }\n    ]\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,r.jsx)(n.h3,{id:"example-1-controller---index-list-all",children:"Example 1: Controller - Index (List All)"}),"\n",(0,r.jsx)(n.p,{children:"List all event bindings:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"namespace App\\Http\\Controllers\\Admin;\n\nuse App\\Http\\Controllers\\Controller;\nuse JobMetric\\EventSystem\\Facades\\EventSystem;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\n\nclass EventSystemController extends Controller\n{\n    public function index()\n    {\n        $events = EventSystem::query()->get();\n\n        return EventSystemResource::collection($events);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-2-controller---show-single",children:"Example 2: Controller - Show (Single)"}),"\n",(0,r.jsx)(n.p,{children:"Get a single event binding:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"namespace App\\Http\\Controllers\\Admin;\n\nuse App\\Http\\Controllers\\Controller;\nuse JobMetric\\EventSystem\\Facades\\EventSystem;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\n\nclass EventSystemController extends Controller\n{\n    public function show(int $id)\n    {\n        $event = EventSystem::query()->findOrFail($id);\n\n        return EventSystemResource::make($event);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-3-controller---store-create",children:"Example 3: Controller - Store (Create)"}),"\n",(0,r.jsx)(n.p,{children:"Create a new event binding and return resource:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"namespace App\\Http\\Controllers\\Admin;\n\nuse App\\Http\\Controllers\\Controller;\nuse JobMetric\\EventSystem\\Facades\\EventSystem;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\nuse JobMetric\\EventSystem\\Http\\Requests\\StoreEventSystemRequest;\n\nclass EventSystemController extends Controller\n{\n    public function store(StoreEventSystemRequest $request)\n    {\n        $response = EventSystem::store($request->validated());\n\n        if ($response->isSuccess()) {\n            return EventSystemResource::make($response->getData())\n                ->response()\n                ->setStatusCode(201);\n        }\n\n        return response()->json([\n            'success' => false,\n            'message' => $response->getMessage(),\n            'errors' => $response->getErrors(),\n        ], 422);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-4-controller---with-pagination",children:"Example 4: Controller - With Pagination"}),"\n",(0,r.jsx)(n.p,{children:"Paginated event bindings:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"namespace App\\Http\\Controllers\\Admin;\n\nuse App\\Http\\Controllers\\Controller;\nuse JobMetric\\EventSystem\\Facades\\EventSystem;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\n\nclass EventSystemController extends Controller\n{\n    public function index()\n    {\n        $events = EventSystem::query()\n            ->where('status', true)\n            ->paginate(15);\n\n        return EventSystemResource::collection($events);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response with pagination:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "data": [\n        {\n            "id": 1,\n            "name": "user.created",\n            ...\n        }\n    ],\n    "links": {\n        "first": "http://example.com/api/events?page=1",\n        "last": "http://example.com/api/events?page=10",\n        "prev": null,\n        "next": "http://example.com/api/events?page=2"\n    },\n    "meta": {\n        "current_page": 1,\n        "from": 1,\n        "last_page": 10,\n        "path": "http://example.com/api/events",\n        "per_page": 15,\n        "to": 15,\n        "total": 150\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"example-5-api-response-with-status-code",children:"Example 5: API Response with Status Code"}),"\n",(0,r.jsx)(n.p,{children:"Return resource with custom status code:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\nuse JobMetric\\EventSystem\\Models\\Event;\n\n$event = Event::find(1);\n\nreturn EventSystemResource::make($event)\n    ->response()\n    ->setStatusCode(200);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-6-filtered-collection",children:"Example 6: Filtered Collection"}),"\n",(0,r.jsx)(n.p,{children:"Filter events before transforming:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Models\\Event;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\n\n$events = Event::where('status', true)\n    ->where('priority', '>', 5)\n    ->orderBy('priority', 'asc')\n    ->get();\n\nreturn EventSystemResource::collection($events);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-7-service-response-integration",children:"Example 7: Service Response Integration"}),"\n",(0,r.jsx)(n.p,{children:"Use with EventSystem service responses:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Facades\\EventSystem;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\n\n$response = EventSystem::store([\n    'name' => 'user.created',\n    'event' => App\\Events\\UserCreated::class,\n    'listener' => App\\Listeners\\SendWelcomeEmail::class,\n    'priority' => 10,\n    'status' => true,\n]);\n\nif ($response->isSuccess()) {\n    $resource = EventSystemResource::make($response->getData());\n    \n    return response()->json([\n        'success' => true,\n        'message' => $response->getMessage(),\n        'data' => $resource->toArray(request()),\n    ], 201);\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-8-conditional-fields",children:"Example 8: Conditional Fields"}),"\n",(0,r.jsx)(n.p,{children:"Extend resource for conditional fields:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"namespace App\\Http\\Resources;\n\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource as BaseResource;\n\nclass EventSystemResource extends BaseResource\n{\n    public function toArray($request): array\n    {\n        $data = parent::toArray($request);\n\n        // Add additional fields based on user permissions\n        if ($request->user()->can('view-details')) {\n            $data['additional_info'] = [\n                'registered_at' => $this->created_at->toIso8601String(),\n                'is_active' => $this->status,\n            ];\n        }\n\n        return $data;\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-9-api-resource-wrapper",children:"Example 9: API Resource Wrapper"}),"\n",(0,r.jsx)(n.p,{children:"Wrap resource in API response format:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\nuse JobMetric\\EventSystem\\Models\\Event;\n\n$event = Event::find(1);\n\nreturn response()->json([\n    'success' => true,\n    'data' => EventSystemResource::make($event)->toArray(request()),\n    'meta' => [\n        'timestamp' => now()->toIso8601String(),\n    ],\n]);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-10-export-functionality",children:"Example 10: Export Functionality"}),"\n",(0,r.jsx)(n.p,{children:"Export events as JSON:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use JobMetric\\EventSystem\\Models\\Event;\nuse JobMetric\\EventSystem\\Http\\Resources\\EventSystemResource;\n\n$events = Event::all();\n\n$export = EventSystemResource::collection($events)\n    ->toArray(request());\n\nreturn response()->json($export)\n    ->header('Content-Disposition', 'attachment; filename=\"events.json\"');\n"})}),"\n",(0,r.jsx)(n.h2,{id:"resource-methods",children:"Resource Methods"}),"\n",(0,r.jsx)(n.h3,{id:"make",children:(0,r.jsx)(n.code,{children:"make()"})}),"\n",(0,r.jsx)(n.p,{children:"Create a resource instance from a model:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"EventSystemResource::make($event)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"collection",children:(0,r.jsx)(n.code,{children:"collection()"})}),"\n",(0,r.jsx)(n.p,{children:"Create a resource collection from multiple models:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"EventSystemResource::collection($events)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"toarray",children:(0,r.jsx)(n.code,{children:"toArray()"})}),"\n",(0,r.jsx)(n.p,{children:"Convert resource to array:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$resource = EventSystemResource::make($event);\n$array = $resource->toArray(request());\n"})}),"\n",(0,r.jsx)(n.h3,{id:"response",children:(0,r.jsx)(n.code,{children:"response()"})}),"\n",(0,r.jsx)(n.p,{children:"Get HTTP response:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$resource = EventSystemResource::make($event);\nreturn $resource->response()->setStatusCode(201);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"timestamp-formatting",children:"Timestamp Formatting"}),"\n",(0,r.jsxs)(n.p,{children:["The resource formats timestamps using Carbon's ",(0,r.jsx)(n.code,{children:"format()"})," method:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"'created_at' => $this->created_at->format('Y-m-d H:i:s'),\n'updated_at' => $this->updated_at->format('Y-m-d H:i:s'),\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Format:"})," ",(0,r.jsx)(n.code,{children:"Y-m-d H:i:s"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Y"})," - 4-digit year"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"m"})," - 2-digit month (01-12)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"d"})," - 2-digit day (01-31)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"H"})," - 24-hour format hour (00-23)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"i"})," - Minutes (00-59)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"s"})," - Seconds (00-59)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Example:"})," ",(0,r.jsx)(n.code,{children:"2024-01-15 14:30:45"})]}),"\n",(0,r.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"EventSystemResource"})," when you need to:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API Responses"}),": Transform event models for JSON API responses"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consistent Formatting"}),": Ensure all event data follows the same structure"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timestamp Formatting"}),": Format timestamps in a consistent format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data Transformation"}),": Expose only necessary fields in API responses"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Resource Collections"}),": Use with resource collections for paginated responses"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Service Integration"}),": Integrate with EventSystem service responses"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Export Functionality"}),": Export event configurations as JSON"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"when-not-to-use",children:"When NOT to Use"}),"\n",(0,r.jsx)(n.p,{children:"Avoid using this resource when:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Direct Model Access"}),": If you need direct model access without transformation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom Formatting"}),": If you need different timestamp formats or field structures"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Internal Processing"}),": For internal processing that doesn't require JSON transformation"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-always-use-resource-for-api-responses",children:"1. Always Use Resource for API Responses"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Good: Use resource\nreturn EventSystemResource::make($event);\n\n// Avoid: Direct model\nreturn response()->json($event);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-use-collections-for-multiple-items",children:"2. Use Collections for Multiple Items"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Good: Use collection\nreturn EventSystemResource::collection($events);\n\n// Avoid: Manual array mapping\nreturn response()->json($events->map(function ($event) {\n    return [...];\n}));\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-set-appropriate-status-codes",children:"3. Set Appropriate Status Codes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Good: Set status code\nreturn EventSystemResource::make($event)\n    ->response()\n    ->setStatusCode(201);\n\n// Avoid: Default status code\nreturn EventSystemResource::make($event);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-use-with-service-responses",children:"4. Use with Service Responses"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Good: Use with service response\n$response = EventSystem::store($data);\nif ($response->isSuccess()) {\n    return EventSystemResource::make($response->getData());\n}\n\n// Avoid: Direct model access\n$event = Event::create($data);\nreturn EventSystemResource::make($event);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-extend-for-custom-fields",children:"5. Extend for Custom Fields"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Good: Extend for custom needs\nclass CustomEventSystemResource extends EventSystemResource\n{\n    public function toArray($request): array\n    {\n        $data = parent::toArray($request);\n        // Add custom fields\n        return $data;\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,r.jsx)(n.h3,{id:"mistake-1-not-using-resource-for-api-responses",children:"Mistake 1: Not Using Resource for API Responses"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Bad: Direct model serialization\nreturn response()->json($event);\n\n// Good: Use resource\nreturn EventSystemResource::make($event);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"mistake-2-manual-array-building",children:"Mistake 2: Manual Array Building"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Bad: Manual array building\nreturn response()->json([\n    'id' => $event->id,\n    'name' => $event->name,\n    // ...\n]);\n\n// Good: Use resource\nreturn EventSystemResource::make($event);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"mistake-3-not-handling-collections",children:"Mistake 3: Not Handling Collections"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Bad: Manual collection mapping\nreturn response()->json($events->map(function ($event) {\n    return EventSystemResource::make($event)->toArray(request());\n}));\n\n// Good: Use collection\nreturn EventSystemResource::collection($events);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"mistake-4-forgetting-status-codes",children:"Mistake 4: Forgetting Status Codes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Bad: Default status code for creation\nreturn EventSystemResource::make($event);\n\n// Good: Set appropriate status code\nreturn EventSystemResource::make($event)\n    ->response()\n    ->setStatusCode(201);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,r.jsx)(n.h3,{id:"eager-loading",children:"Eager Loading"}),"\n",(0,r.jsx)(n.p,{children:"When using resources with relationships, use eager loading:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Good: Eager load relationships\n$events = Event::with('relatedModel')->get();\nreturn EventSystemResource::collection($events);\n\n// Avoid: N+1 queries\n$events = Event::all();\nreturn EventSystemResource::collection($events);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pagination",children:"Pagination"}),"\n",(0,r.jsx)(n.p,{children:"Use pagination for large datasets:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Good: Paginate large datasets\n$events = Event::paginate(15);\nreturn EventSystemResource::collection($events);\n\n// Avoid: Loading all records\n$events = Event::all();\nreturn EventSystemResource::collection($events);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(l.A,{to:"/packages/laravel-event-system/deep-diving/event-system",children:"EventSystem"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(l.A,{to:"/packages/laravel-event-system/deep-diving/store-event-system-request",children:"StoreEventSystemRequest"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(l.A,{to:"/packages/laravel-event-system/deep-diving/domain-event",children:"DomainEvent"}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);