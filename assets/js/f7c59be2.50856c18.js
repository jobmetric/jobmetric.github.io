"use strict";(globalThis.webpackChunkjobmetric_document=globalThis.webpackChunkjobmetric_document||[]).push([[7502],{28453(e,n,s){s.d(n,{R:()=>t,x:()=>i});var r=s(96540);const a={},o=r.createContext(a);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(o.Provider,{value:n},e.children)}},95118(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"laravel-location/deep-diving/services/country","title":"Country Service","description":"The Country service provides CRUD operations for countries and a clean facade-driven API to manage country-level metadata such as calling code, validations, and address templates.","source":"@site/packages/laravel-location/deep-diving/services/country.md","sourceDirName":"laravel-location/deep-diving/services","slug":"/laravel-location/deep-diving/services/country","permalink":"/packages/laravel-location/deep-diving/services/country","draft":false,"unlisted":false,"editUrl":"https://github.com/jobmetric/document/blob/master/packages/laravel-location/deep-diving/services/country.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"Country"},"sidebar":"packagesSidebar","previous":{"title":"HasGeoArea","permalink":"/packages/laravel-location/deep-diving/has-geo-area"},"next":{"title":"Province","permalink":"/packages/laravel-location/deep-diving/services/province"}}');var a=s(74848),o=s(28453);const t={sidebar_position:1,sidebar_label:"Country"},i="Country Service",l={},d=[{value:"Namespace",id:"namespace",level:2},{value:"Facade",id:"facade",level:2},{value:"Response Shape",id:"response-shape",level:2},{value:"Basic CRUD Operations",id:"basic-crud-operations",level:2},{value:"Store",id:"store",level:3},{value:"Show",id:"show",level:3},{value:"Update",id:"update",level:3},{value:"Destroy / Restore / Force Delete",id:"destroy--restore--force-delete",level:3},{value:"Toggle Status",id:"toggle-status",level:3},{value:"Querying &amp; Pagination",id:"querying--pagination",level:2},{value:"QueryBuilder",id:"querybuilder",level:3},{value:"Paginate / All",id:"paginate--all",level:3},{value:"Soft-delete modes",id:"soft-delete-modes",level:3},{value:"Notes",id:"notes",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"country-service",children:"Country Service"})}),"\n",(0,a.jsx)(n.p,{children:"The Country service provides CRUD operations for countries and a clean facade-driven API to manage country-level metadata such as calling code, validations, and address templates."}),"\n",(0,a.jsx)(n.h2,{id:"namespace",children:"Namespace"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"JobMetric\\Location\\Services\\Country\n"})}),"\n",(0,a.jsx)(n.h2,{id:"facade",children:"Facade"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"use JobMetric\\Location\\Facades\\Country;\n"})}),"\n",(0,a.jsx)(n.h2,{id:"response-shape",children:"Response Shape"}),"\n",(0,a.jsxs)(n.p,{children:["Most service methods return a ",(0,a.jsx)(n.code,{children:"JobMetric\\PackageCore\\Output\\Response"})," instance:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$response->ok;      // bool\n$response->message; // string\n$response->data;    // resource|collection|null\n$response->status;  // int\n$response->errors;  // array\n"})}),"\n",(0,a.jsx)(n.h2,{id:"basic-crud-operations",children:"Basic CRUD Operations"}),"\n",(0,a.jsx)(n.h3,{id:"store",children:"Store"}),"\n",(0,a.jsx)(n.p,{children:"Create a new country."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$response = Country::store([\n    'name' => 'Iran',\n    'flag' => 'ir.svg',\n    'mobile_prefix' => 98,\n    'validation' => [\n        '/^9\\\\d{9}$/',\n    ],\n    'address_on_letter' => \"{country}, {province}, {city}\\n{district}, {street}, {number}\",\n    'status' => true,\n]);\n"})}),"\n",(0,a.jsx)(n.p,{children:"Minimal payload:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$response = Country::store([\n    'name' => 'Germany',\n]);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"show",children:"Show"}),"\n",(0,a.jsx)(n.p,{children:"Retrieve a specific country by ID."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$response = Country::show($countryId);\n\n// With relations (if your model defines them)\n$response = Country::show($countryId, ['provinces']);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"update",children:"Update"}),"\n",(0,a.jsx)(n.p,{children:"Update a country by ID."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$response = Country::update($countryId, [\n    'flag' => 'de.svg',\n    'mobile_prefix' => 49,\n]);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"destroy--restore--force-delete",children:"Destroy / Restore / Force Delete"}),"\n",(0,a.jsx)(n.p,{children:"Country supports soft deletes:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$response = Country::destroy($countryId);\n$response = Country::restore($countryId);\n$response = Country::forceDelete($countryId);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"toggle-status",children:"Toggle Status"}),"\n",(0,a.jsxs)(n.p,{children:["Enable/disable the country (requires a ",(0,a.jsx)(n.code,{children:"status"})," boolean column)."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$response = Country::toggleStatus($countryId);\n"})}),"\n",(0,a.jsx)(n.h2,{id:"querying--pagination",children:"Querying & Pagination"}),"\n",(0,a.jsx)(n.h3,{id:"querybuilder",children:"QueryBuilder"}),"\n",(0,a.jsxs)(n.p,{children:["All Location services expose a ",(0,a.jsx)(n.code,{children:"query()"})," method built on Spatie QueryBuilder. It supports:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Allowed fields / filters / sorts (package-defined)"}),"\n",(0,a.jsx)(n.li,{children:"Default sorting"}),"\n",(0,a.jsxs)(n.li,{children:["Simple ",(0,a.jsx)(n.code,{children:"where($filters)"})," injection"]}),"\n",(0,a.jsxs)(n.li,{children:["Optional soft-delete mode: ",(0,a.jsx)(n.code,{children:"withTrashed"})," | ",(0,a.jsx)(n.code,{children:"onlyTrashed"})," | ",(0,a.jsx)(n.code,{children:"null"})]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"$qb = Country::query(\n    filters: ['status' => true],\n    with: ['provinces'],\n    mode: null\n);\n\n$countries = $qb->get();\n"})}),"\n",(0,a.jsx)(n.h3,{id:"paginate--all",children:"Paginate / All"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"// Paginated\n$response = Country::paginate(15, ['status' => true], ['provinces']);\n\n// All (no pagination)\n$response = Country::all(['status' => true]);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"soft-delete-modes",children:"Soft-delete modes"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"// Include soft-deleted rows\n$response = Country::paginate(15, [], [], 'withTrashed');\n\n// Only soft-deleted rows\n$response = Country::paginate(15, [], [], 'onlyTrashed');\n"})}),"\n",(0,a.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"mobile_prefix"})," is stored without a plus sign and may be formatted by the model accessor."]}),"\n",(0,a.jsxs)(n.li,{children:["For datasets and import workflow, see: ",(0,a.jsx)(n.a,{href:"/packages/laravel-location/deep-diving/datasets",children:"Datasets"})," and ",(0,a.jsxs)(n.a,{href:"/packages/laravel-location/deep-diving/commands/import-location-data",children:["location",":import"]}),"."]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);